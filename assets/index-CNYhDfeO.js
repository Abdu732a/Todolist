(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const c of l)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function n(l){const c={};return l.integrity&&(c.integrity=l.integrity),l.referrerPolicy&&(c.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?c.credentials="include":l.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(l){if(l.ep)return;l.ep=!0;const c=n(l);fetch(l.href,c)}})();var Ad={exports:{}},ml={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var y_;function Z1(){if(y_)return ml;y_=1;var r=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(s,l,c){var d=null;if(c!==void 0&&(d=""+c),l.key!==void 0&&(d=""+l.key),"key"in l){c={};for(var g in l)g!=="key"&&(c[g]=l[g])}else c=l;return l=c.ref,{$$typeof:r,type:s,key:d,ref:l!==void 0?l:null,props:c}}return ml.Fragment=t,ml.jsx=n,ml.jsxs=n,ml}var __;function W1(){return __||(__=1,Ad.exports=Z1()),Ad.exports}var ct=W1(),Sd={exports:{}},bt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var v_;function J1(){if(v_)return bt;v_=1;var r=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),d=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),_=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),I=Symbol.iterator;function D(C){return C===null||typeof C!="object"?null:(C=I&&C[I]||C["@@iterator"],typeof C=="function"?C:null)}var H={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Z=Object.assign,nt={};function W(C,q,J){this.props=C,this.context=q,this.refs=nt,this.updater=J||H}W.prototype.isReactComponent={},W.prototype.setState=function(C,q){if(typeof C!="object"&&typeof C!="function"&&C!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,C,q,"setState")},W.prototype.forceUpdate=function(C){this.updater.enqueueForceUpdate(this,C,"forceUpdate")};function vt(){}vt.prototype=W.prototype;function dt(C,q,J){this.props=C,this.context=q,this.refs=nt,this.updater=J||H}var ht=dt.prototype=new vt;ht.constructor=dt,Z(ht,W.prototype),ht.isPureReactComponent=!0;var Vt=Array.isArray,Et={H:null,A:null,T:null,S:null,V:null},Ut=Object.prototype.hasOwnProperty;function V(C,q,J,$,at,At){return J=At.ref,{$$typeof:r,type:C,key:q,ref:J!==void 0?J:null,props:At}}function S(C,q){return V(C.type,q,void 0,void 0,void 0,C.props)}function w(C){return typeof C=="object"&&C!==null&&C.$$typeof===r}function O(C){var q={"=":"=0",":":"=2"};return"$"+C.replace(/[=:]/g,function(J){return q[J]})}var M=/\/+/g;function x(C,q){return typeof C=="object"&&C!==null&&C.key!=null?O(""+C.key):q.toString(36)}function R(){}function Ae(C){switch(C.status){case"fulfilled":return C.value;case"rejected":throw C.reason;default:switch(typeof C.status=="string"?C.then(R,R):(C.status="pending",C.then(function(q){C.status==="pending"&&(C.status="fulfilled",C.value=q)},function(q){C.status==="pending"&&(C.status="rejected",C.reason=q)})),C.status){case"fulfilled":return C.value;case"rejected":throw C.reason}}throw C}function ee(C,q,J,$,at){var At=typeof C;(At==="undefined"||At==="boolean")&&(C=null);var ft=!1;if(C===null)ft=!0;else switch(At){case"bigint":case"string":case"number":ft=!0;break;case"object":switch(C.$$typeof){case r:case t:ft=!0;break;case A:return ft=C._init,ee(ft(C._payload),q,J,$,at)}}if(ft)return at=at(C),ft=$===""?"."+x(C,0):$,Vt(at)?(J="",ft!=null&&(J=ft.replace(M,"$&/")+"/"),ee(at,q,J,"",function(Hn){return Hn})):at!=null&&(w(at)&&(at=S(at,J+(at.key==null||C&&C.key===at.key?"":(""+at.key).replace(M,"$&/")+"/")+ft)),q.push(at)),1;ft=0;var re=$===""?".":$+":";if(Vt(C))for(var Zt=0;Zt<C.length;Zt++)$=C[Zt],At=re+x($,Zt),ft+=ee($,q,J,At,at);else if(Zt=D(C),typeof Zt=="function")for(C=Zt.call(C),Zt=0;!($=C.next()).done;)$=$.value,At=re+x($,Zt++),ft+=ee($,q,J,At,at);else if(At==="object"){if(typeof C.then=="function")return ee(Ae(C),q,J,$,at);throw q=String(C),Error("Objects are not valid as a React child (found: "+(q==="[object Object]"?"object with keys {"+Object.keys(C).join(", ")+"}":q)+"). If you meant to render a collection of children, use an array instead.")}return ft}function G(C,q,J){if(C==null)return C;var $=[],at=0;return ee(C,$,"","",function(At){return q.call(J,At,at++)}),$}function et(C){if(C._status===-1){var q=C._result;q=q(),q.then(function(J){(C._status===0||C._status===-1)&&(C._status=1,C._result=J)},function(J){(C._status===0||C._status===-1)&&(C._status=2,C._result=J)}),C._status===-1&&(C._status=0,C._result=q)}if(C._status===1)return C._result.default;throw C._result}var ot=typeof reportError=="function"?reportError:function(C){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var q=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof C=="object"&&C!==null&&typeof C.message=="string"?String(C.message):String(C),error:C});if(!window.dispatchEvent(q))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",C);return}console.error(C)};function Lt(){}return bt.Children={map:G,forEach:function(C,q,J){G(C,function(){q.apply(this,arguments)},J)},count:function(C){var q=0;return G(C,function(){q++}),q},toArray:function(C){return G(C,function(q){return q})||[]},only:function(C){if(!w(C))throw Error("React.Children.only expected to receive a single React element child.");return C}},bt.Component=W,bt.Fragment=n,bt.Profiler=l,bt.PureComponent=dt,bt.StrictMode=s,bt.Suspense=p,bt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Et,bt.__COMPILER_RUNTIME={__proto__:null,c:function(C){return Et.H.useMemoCache(C)}},bt.cache=function(C){return function(){return C.apply(null,arguments)}},bt.cloneElement=function(C,q,J){if(C==null)throw Error("The argument must be a React element, but you passed "+C+".");var $=Z({},C.props),at=C.key,At=void 0;if(q!=null)for(ft in q.ref!==void 0&&(At=void 0),q.key!==void 0&&(at=""+q.key),q)!Ut.call(q,ft)||ft==="key"||ft==="__self"||ft==="__source"||ft==="ref"&&q.ref===void 0||($[ft]=q[ft]);var ft=arguments.length-2;if(ft===1)$.children=J;else if(1<ft){for(var re=Array(ft),Zt=0;Zt<ft;Zt++)re[Zt]=arguments[Zt+2];$.children=re}return V(C.type,at,void 0,void 0,At,$)},bt.createContext=function(C){return C={$$typeof:d,_currentValue:C,_currentValue2:C,_threadCount:0,Provider:null,Consumer:null},C.Provider=C,C.Consumer={$$typeof:c,_context:C},C},bt.createElement=function(C,q,J){var $,at={},At=null;if(q!=null)for($ in q.key!==void 0&&(At=""+q.key),q)Ut.call(q,$)&&$!=="key"&&$!=="__self"&&$!=="__source"&&(at[$]=q[$]);var ft=arguments.length-2;if(ft===1)at.children=J;else if(1<ft){for(var re=Array(ft),Zt=0;Zt<ft;Zt++)re[Zt]=arguments[Zt+2];at.children=re}if(C&&C.defaultProps)for($ in ft=C.defaultProps,ft)at[$]===void 0&&(at[$]=ft[$]);return V(C,At,void 0,void 0,null,at)},bt.createRef=function(){return{current:null}},bt.forwardRef=function(C){return{$$typeof:g,render:C}},bt.isValidElement=w,bt.lazy=function(C){return{$$typeof:A,_payload:{_status:-1,_result:C},_init:et}},bt.memo=function(C,q){return{$$typeof:_,type:C,compare:q===void 0?null:q}},bt.startTransition=function(C){var q=Et.T,J={};Et.T=J;try{var $=C(),at=Et.S;at!==null&&at(J,$),typeof $=="object"&&$!==null&&typeof $.then=="function"&&$.then(Lt,ot)}catch(At){ot(At)}finally{Et.T=q}},bt.unstable_useCacheRefresh=function(){return Et.H.useCacheRefresh()},bt.use=function(C){return Et.H.use(C)},bt.useActionState=function(C,q,J){return Et.H.useActionState(C,q,J)},bt.useCallback=function(C,q){return Et.H.useCallback(C,q)},bt.useContext=function(C){return Et.H.useContext(C)},bt.useDebugValue=function(){},bt.useDeferredValue=function(C,q){return Et.H.useDeferredValue(C,q)},bt.useEffect=function(C,q,J){var $=Et.H;if(typeof J=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return $.useEffect(C,q)},bt.useId=function(){return Et.H.useId()},bt.useImperativeHandle=function(C,q,J){return Et.H.useImperativeHandle(C,q,J)},bt.useInsertionEffect=function(C,q){return Et.H.useInsertionEffect(C,q)},bt.useLayoutEffect=function(C,q){return Et.H.useLayoutEffect(C,q)},bt.useMemo=function(C,q){return Et.H.useMemo(C,q)},bt.useOptimistic=function(C,q){return Et.H.useOptimistic(C,q)},bt.useReducer=function(C,q,J){return Et.H.useReducer(C,q,J)},bt.useRef=function(C){return Et.H.useRef(C)},bt.useState=function(C){return Et.H.useState(C)},bt.useSyncExternalStore=function(C,q,J){return Et.H.useSyncExternalStore(C,q,J)},bt.useTransition=function(){return Et.H.useTransition()},bt.version="19.1.1",bt}var E_;function mm(){return E_||(E_=1,Sd.exports=J1()),Sd.exports}var qe=mm(),bd={exports:{}},gl={},wd={exports:{}},Rd={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var T_;function tA(){return T_||(T_=1,(function(r){function t(G,et){var ot=G.length;G.push(et);t:for(;0<ot;){var Lt=ot-1>>>1,C=G[Lt];if(0<l(C,et))G[Lt]=et,G[ot]=C,ot=Lt;else break t}}function n(G){return G.length===0?null:G[0]}function s(G){if(G.length===0)return null;var et=G[0],ot=G.pop();if(ot!==et){G[0]=ot;t:for(var Lt=0,C=G.length,q=C>>>1;Lt<q;){var J=2*(Lt+1)-1,$=G[J],at=J+1,At=G[at];if(0>l($,ot))at<C&&0>l(At,$)?(G[Lt]=At,G[at]=ot,Lt=at):(G[Lt]=$,G[J]=ot,Lt=J);else if(at<C&&0>l(At,ot))G[Lt]=At,G[at]=ot,Lt=at;else break t}}return et}function l(G,et){var ot=G.sortIndex-et.sortIndex;return ot!==0?ot:G.id-et.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;r.unstable_now=function(){return c.now()}}else{var d=Date,g=d.now();r.unstable_now=function(){return d.now()-g}}var p=[],_=[],A=1,I=null,D=3,H=!1,Z=!1,nt=!1,W=!1,vt=typeof setTimeout=="function"?setTimeout:null,dt=typeof clearTimeout=="function"?clearTimeout:null,ht=typeof setImmediate<"u"?setImmediate:null;function Vt(G){for(var et=n(_);et!==null;){if(et.callback===null)s(_);else if(et.startTime<=G)s(_),et.sortIndex=et.expirationTime,t(p,et);else break;et=n(_)}}function Et(G){if(nt=!1,Vt(G),!Z)if(n(p)!==null)Z=!0,Ut||(Ut=!0,x());else{var et=n(_);et!==null&&ee(Et,et.startTime-G)}}var Ut=!1,V=-1,S=5,w=-1;function O(){return W?!0:!(r.unstable_now()-w<S)}function M(){if(W=!1,Ut){var G=r.unstable_now();w=G;var et=!0;try{t:{Z=!1,nt&&(nt=!1,dt(V),V=-1),H=!0;var ot=D;try{e:{for(Vt(G),I=n(p);I!==null&&!(I.expirationTime>G&&O());){var Lt=I.callback;if(typeof Lt=="function"){I.callback=null,D=I.priorityLevel;var C=Lt(I.expirationTime<=G);if(G=r.unstable_now(),typeof C=="function"){I.callback=C,Vt(G),et=!0;break e}I===n(p)&&s(p),Vt(G)}else s(p);I=n(p)}if(I!==null)et=!0;else{var q=n(_);q!==null&&ee(Et,q.startTime-G),et=!1}}break t}finally{I=null,D=ot,H=!1}et=void 0}}finally{et?x():Ut=!1}}}var x;if(typeof ht=="function")x=function(){ht(M)};else if(typeof MessageChannel<"u"){var R=new MessageChannel,Ae=R.port2;R.port1.onmessage=M,x=function(){Ae.postMessage(null)}}else x=function(){vt(M,0)};function ee(G,et){V=vt(function(){G(r.unstable_now())},et)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(G){G.callback=null},r.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<G?Math.floor(1e3/G):5},r.unstable_getCurrentPriorityLevel=function(){return D},r.unstable_next=function(G){switch(D){case 1:case 2:case 3:var et=3;break;default:et=D}var ot=D;D=et;try{return G()}finally{D=ot}},r.unstable_requestPaint=function(){W=!0},r.unstable_runWithPriority=function(G,et){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var ot=D;D=G;try{return et()}finally{D=ot}},r.unstable_scheduleCallback=function(G,et,ot){var Lt=r.unstable_now();switch(typeof ot=="object"&&ot!==null?(ot=ot.delay,ot=typeof ot=="number"&&0<ot?Lt+ot:Lt):ot=Lt,G){case 1:var C=-1;break;case 2:C=250;break;case 5:C=1073741823;break;case 4:C=1e4;break;default:C=5e3}return C=ot+C,G={id:A++,callback:et,priorityLevel:G,startTime:ot,expirationTime:C,sortIndex:-1},ot>Lt?(G.sortIndex=ot,t(_,G),n(p)===null&&G===n(_)&&(nt?(dt(V),V=-1):nt=!0,ee(Et,ot-Lt))):(G.sortIndex=C,t(p,G),Z||H||(Z=!0,Ut||(Ut=!0,x()))),G},r.unstable_shouldYield=O,r.unstable_wrapCallback=function(G){var et=D;return function(){var ot=D;D=et;try{return G.apply(this,arguments)}finally{D=ot}}}})(Rd)),Rd}var A_;function eA(){return A_||(A_=1,wd.exports=tA()),wd.exports}var Id={exports:{}},Ke={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var S_;function nA(){if(S_)return Ke;S_=1;var r=mm();function t(p){var _="https://react.dev/errors/"+p;if(1<arguments.length){_+="?args[]="+encodeURIComponent(arguments[1]);for(var A=2;A<arguments.length;A++)_+="&args[]="+encodeURIComponent(arguments[A])}return"Minified React error #"+p+"; visit "+_+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},l=Symbol.for("react.portal");function c(p,_,A){var I=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:I==null?null:""+I,children:p,containerInfo:_,implementation:A}}var d=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function g(p,_){if(p==="font")return"";if(typeof _=="string")return _==="use-credentials"?_:""}return Ke.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Ke.createPortal=function(p,_){var A=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_||_.nodeType!==1&&_.nodeType!==9&&_.nodeType!==11)throw Error(t(299));return c(p,_,null,A)},Ke.flushSync=function(p){var _=d.T,A=s.p;try{if(d.T=null,s.p=2,p)return p()}finally{d.T=_,s.p=A,s.d.f()}},Ke.preconnect=function(p,_){typeof p=="string"&&(_?(_=_.crossOrigin,_=typeof _=="string"?_==="use-credentials"?_:"":void 0):_=null,s.d.C(p,_))},Ke.prefetchDNS=function(p){typeof p=="string"&&s.d.D(p)},Ke.preinit=function(p,_){if(typeof p=="string"&&_&&typeof _.as=="string"){var A=_.as,I=g(A,_.crossOrigin),D=typeof _.integrity=="string"?_.integrity:void 0,H=typeof _.fetchPriority=="string"?_.fetchPriority:void 0;A==="style"?s.d.S(p,typeof _.precedence=="string"?_.precedence:void 0,{crossOrigin:I,integrity:D,fetchPriority:H}):A==="script"&&s.d.X(p,{crossOrigin:I,integrity:D,fetchPriority:H,nonce:typeof _.nonce=="string"?_.nonce:void 0})}},Ke.preinitModule=function(p,_){if(typeof p=="string")if(typeof _=="object"&&_!==null){if(_.as==null||_.as==="script"){var A=g(_.as,_.crossOrigin);s.d.M(p,{crossOrigin:A,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0})}}else _==null&&s.d.M(p)},Ke.preload=function(p,_){if(typeof p=="string"&&typeof _=="object"&&_!==null&&typeof _.as=="string"){var A=_.as,I=g(A,_.crossOrigin);s.d.L(p,A,{crossOrigin:I,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0,type:typeof _.type=="string"?_.type:void 0,fetchPriority:typeof _.fetchPriority=="string"?_.fetchPriority:void 0,referrerPolicy:typeof _.referrerPolicy=="string"?_.referrerPolicy:void 0,imageSrcSet:typeof _.imageSrcSet=="string"?_.imageSrcSet:void 0,imageSizes:typeof _.imageSizes=="string"?_.imageSizes:void 0,media:typeof _.media=="string"?_.media:void 0})}},Ke.preloadModule=function(p,_){if(typeof p=="string")if(_){var A=g(_.as,_.crossOrigin);s.d.m(p,{as:typeof _.as=="string"&&_.as!=="script"?_.as:void 0,crossOrigin:A,integrity:typeof _.integrity=="string"?_.integrity:void 0})}else s.d.m(p)},Ke.requestFormReset=function(p){s.d.r(p)},Ke.unstable_batchedUpdates=function(p,_){return p(_)},Ke.useFormState=function(p,_,A){return d.H.useFormState(p,_,A)},Ke.useFormStatus=function(){return d.H.useHostTransitionStatus()},Ke.version="19.1.1",Ke}var b_;function iA(){if(b_)return Id.exports;b_=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}return r(),Id.exports=nA(),Id.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var w_;function rA(){if(w_)return gl;w_=1;var r=eA(),t=mm(),n=iA();function s(e){var i="https://react.dev/errors/"+e;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function c(e){var i=e,a=e;if(e.alternate)for(;i.return;)i=i.return;else{e=i;do i=e,(i.flags&4098)!==0&&(a=i.return),e=i.return;while(e)}return i.tag===3?a:null}function d(e){if(e.tag===13){var i=e.memoizedState;if(i===null&&(e=e.alternate,e!==null&&(i=e.memoizedState)),i!==null)return i.dehydrated}return null}function g(e){if(c(e)!==e)throw Error(s(188))}function p(e){var i=e.alternate;if(!i){if(i=c(e),i===null)throw Error(s(188));return i!==e?null:e}for(var a=e,o=i;;){var h=a.return;if(h===null)break;var f=h.alternate;if(f===null){if(o=h.return,o!==null){a=o;continue}break}if(h.child===f.child){for(f=h.child;f;){if(f===a)return g(h),e;if(f===o)return g(h),i;f=f.sibling}throw Error(s(188))}if(a.return!==o.return)a=h,o=f;else{for(var v=!1,E=h.child;E;){if(E===a){v=!0,a=h,o=f;break}if(E===o){v=!0,o=h,a=f;break}E=E.sibling}if(!v){for(E=f.child;E;){if(E===a){v=!0,a=f,o=h;break}if(E===o){v=!0,o=f,a=h;break}E=E.sibling}if(!v)throw Error(s(189))}}if(a.alternate!==o)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?e:i}function _(e){var i=e.tag;if(i===5||i===26||i===27||i===6)return e;for(e=e.child;e!==null;){if(i=_(e),i!==null)return i;e=e.sibling}return null}var A=Object.assign,I=Symbol.for("react.element"),D=Symbol.for("react.transitional.element"),H=Symbol.for("react.portal"),Z=Symbol.for("react.fragment"),nt=Symbol.for("react.strict_mode"),W=Symbol.for("react.profiler"),vt=Symbol.for("react.provider"),dt=Symbol.for("react.consumer"),ht=Symbol.for("react.context"),Vt=Symbol.for("react.forward_ref"),Et=Symbol.for("react.suspense"),Ut=Symbol.for("react.suspense_list"),V=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),w=Symbol.for("react.activity"),O=Symbol.for("react.memo_cache_sentinel"),M=Symbol.iterator;function x(e){return e===null||typeof e!="object"?null:(e=M&&e[M]||e["@@iterator"],typeof e=="function"?e:null)}var R=Symbol.for("react.client.reference");function Ae(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===R?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Z:return"Fragment";case W:return"Profiler";case nt:return"StrictMode";case Et:return"Suspense";case Ut:return"SuspenseList";case w:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case H:return"Portal";case ht:return(e.displayName||"Context")+".Provider";case dt:return(e._context.displayName||"Context")+".Consumer";case Vt:var i=e.render;return e=e.displayName,e||(e=i.displayName||i.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case V:return i=e.displayName||null,i!==null?i:Ae(e.type)||"Memo";case S:i=e._payload,e=e._init;try{return Ae(e(i))}catch{}}return null}var ee=Array.isArray,G=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,et=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ot={pending:!1,data:null,method:null,action:null},Lt=[],C=-1;function q(e){return{current:e}}function J(e){0>C||(e.current=Lt[C],Lt[C]=null,C--)}function $(e,i){C++,Lt[C]=e.current,e.current=i}var at=q(null),At=q(null),ft=q(null),re=q(null);function Zt(e,i){switch($(ft,i),$(At,e),$(at,null),i.nodeType){case 9:case 11:e=(e=i.documentElement)&&(e=e.namespaceURI)?Fy(e):0;break;default:if(e=i.tagName,i=i.namespaceURI)i=Fy(i),e=Qy(i,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}J(at),$(at,e)}function Hn(){J(at),J(At),J(ft)}function Yi(e){e.memoizedState!==null&&$(re,e);var i=at.current,a=Qy(i,e.type);i!==a&&($(At,e),$(at,a))}function mi(e){At.current===e&&(J(at),J(At)),re.current===e&&(J(re),ul._currentValue=ot)}var Qr=Object.prototype.hasOwnProperty,Kr=r.unstable_scheduleCallback,Yr=r.unstable_cancelCallback,so=r.unstable_shouldYield,$l=r.unstable_requestPaint,_n=r.unstable_now,Th=r.unstable_getCurrentPriorityLevel,ao=r.unstable_ImmediatePriority,qs=r.unstable_UserBlockingPriority,Xr=r.unstable_NormalPriority,Ah=r.unstable_LowPriority,js=r.unstable_IdlePriority,oo=r.log,Zl=r.unstable_setDisableYieldValue,oe=null,Ht=null;function ln(e){if(typeof oo=="function"&&Zl(e),Ht&&typeof Ht.setStrictMode=="function")try{Ht.setStrictMode(oe,e)}catch{}}var Fe=Math.clz32?Math.clz32:$r,Wl=Math.log,Sh=Math.LN2;function $r(e){return e>>>=0,e===0?32:31-(Wl(e)/Sh|0)|0}var Zr=256,Wr=4194304;function Mn(e){var i=e&42;if(i!==0)return i;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Hs(e,i,a){var o=e.pendingLanes;if(o===0)return 0;var h=0,f=e.suspendedLanes,v=e.pingedLanes;e=e.warmLanes;var E=o&134217727;return E!==0?(o=E&~f,o!==0?h=Mn(o):(v&=E,v!==0?h=Mn(v):a||(a=E&~e,a!==0&&(h=Mn(a))))):(E=o&~f,E!==0?h=Mn(E):v!==0?h=Mn(v):a||(a=o&~e,a!==0&&(h=Mn(a)))),h===0?0:i!==0&&i!==h&&(i&f)===0&&(f=h&-h,a=i&-i,f>=a||f===32&&(a&4194048)!==0)?i:h}function Jr(e,i){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&i)===0}function lo(e,i){switch(e){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function uo(){var e=Zr;return Zr<<=1,(Zr&4194048)===0&&(Zr=256),e}function co(){var e=Wr;return Wr<<=1,(Wr&62914560)===0&&(Wr=4194304),e}function gi(e){for(var i=[],a=0;31>a;a++)i.push(e);return i}function pi(e,i){e.pendingLanes|=i,i!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function ho(e,i,a,o,h,f){var v=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var E=e.entanglements,b=e.expirationTimes,L=e.hiddenUpdates;for(a=v&~a;0<a;){var F=31-Fe(a),K=1<<F;E[F]=0,b[F]=-1;var z=L[F];if(z!==null)for(L[F]=null,F=0;F<z.length;F++){var B=z[F];B!==null&&(B.lane&=-536870913)}a&=~K}o!==0&&Gn(e,o,0),f!==0&&h===0&&e.tag!==0&&(e.suspendedLanes|=f&~(v&~i))}function Gn(e,i,a){e.pendingLanes|=i,e.suspendedLanes&=~i;var o=31-Fe(i);e.entangledLanes|=i,e.entanglements[o]=e.entanglements[o]|1073741824|a&4194090}function fo(e,i){var a=e.entangledLanes|=i;for(e=e.entanglements;a;){var o=31-Fe(a),h=1<<o;h&i|e[o]&i&&(e[o]|=i),a&=~h}}function Xi(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Gs(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function $i(){var e=et.p;return e!==0?e:(e=window.event,e===void 0?32:h_(e.type))}function Jl(e,i){var a=et.p;try{return et.p=e,i()}finally{et.p=a}}var ne=Math.random().toString(36).slice(2),Se="__reactFiber$"+ne,me="__reactProps$"+ne,vn="__reactContainer$"+ne,mo="__reactEvents$"+ne,bh="__reactListeners$"+ne,Zi="__reactHandles$"+ne,tu="__reactResources$"+ne,ts="__reactMarker$"+ne;function Wi(e){delete e[Se],delete e[me],delete e[mo],delete e[bh],delete e[Zi]}function yi(e){var i=e[Se];if(i)return i;for(var a=e.parentNode;a;){if(i=a[vn]||a[Se]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(e=$y(e);e!==null;){if(a=e[Se])return a;e=$y(e)}return i}e=a,a=e.parentNode}return null}function Fn(e){if(e=e[Se]||e[vn]){var i=e.tag;if(i===5||i===6||i===13||i===26||i===27||i===3)return e}return null}function Qn(e){var i=e.tag;if(i===5||i===26||i===27||i===6)return e.stateNode;throw Error(s(33))}function We(e){var i=e[tu];return i||(i=e[tu]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function ce(e){e[ts]=!0}var go=new Set,Fs={};function xn(e,i){_i(e,i),_i(e+"Capture",i)}function _i(e,i){for(Fs[e]=i,e=0;e<i.length;e++)go.add(i[e])}var eu=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),nu={},es={};function iu(e){return Qr.call(es,e)?!0:Qr.call(nu,e)?!1:eu.test(e)?es[e]=!0:(nu[e]=!0,!1)}function Ji(e,i,a){if(iu(i))if(a===null)e.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(i);return;case"boolean":var o=i.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){e.removeAttribute(i);return}}e.setAttribute(i,""+a)}}function Kn(e,i,a){if(a===null)e.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(i);return}e.setAttribute(i,""+a)}}function Pe(e,i,a,o){if(o===null)e.removeAttribute(a);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(i,a,""+o)}}var ns,ru;function vi(e){if(ns===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);ns=i&&i[1]||"",ru=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ns+e+ru}var Qs=!1;function Ks(e,i){if(!e||Qs)return"";Qs=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(i){var K=function(){throw Error()};if(Object.defineProperty(K.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(K,[])}catch(B){var z=B}Reflect.construct(e,[],K)}else{try{K.call()}catch(B){z=B}e.call(K.prototype)}}else{try{throw Error()}catch(B){z=B}(K=e())&&typeof K.catch=="function"&&K.catch(function(){})}}catch(B){if(B&&z&&typeof B.stack=="string")return[B.stack,z.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=o.DetermineComponentFrameRoot(),v=f[0],E=f[1];if(v&&E){var b=v.split(`
`),L=E.split(`
`);for(h=o=0;o<b.length&&!b[o].includes("DetermineComponentFrameRoot");)o++;for(;h<L.length&&!L[h].includes("DetermineComponentFrameRoot");)h++;if(o===b.length||h===L.length)for(o=b.length-1,h=L.length-1;1<=o&&0<=h&&b[o]!==L[h];)h--;for(;1<=o&&0<=h;o--,h--)if(b[o]!==L[h]){if(o!==1||h!==1)do if(o--,h--,0>h||b[o]!==L[h]){var F=`
`+b[o].replace(" at new "," at ");return e.displayName&&F.includes("<anonymous>")&&(F=F.replace("<anonymous>",e.displayName)),F}while(1<=o&&0<=h);break}}}finally{Qs=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?vi(a):""}function po(e){switch(e.tag){case 26:case 27:case 5:return vi(e.type);case 16:return vi("Lazy");case 13:return vi("Suspense");case 19:return vi("SuspenseList");case 0:case 15:return Ks(e.type,!1);case 11:return Ks(e.type.render,!1);case 1:return Ks(e.type,!0);case 31:return vi("Activity");default:return""}}function Ys(e){try{var i="";do i+=po(e),e=e.return;while(e);return i}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function Je(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function yo(e){var i=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function wh(e){var i=yo(e)?"checked":"value",a=Object.getOwnPropertyDescriptor(e.constructor.prototype,i),o=""+e[i];if(!e.hasOwnProperty(i)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var h=a.get,f=a.set;return Object.defineProperty(e,i,{configurable:!0,get:function(){return h.call(this)},set:function(v){o=""+v,f.call(this,v)}}),Object.defineProperty(e,i,{enumerable:a.enumerable}),{getValue:function(){return o},setValue:function(v){o=""+v},stopTracking:function(){e._valueTracker=null,delete e[i]}}}}function Xs(e){e._valueTracker||(e._valueTracker=wh(e))}function _o(e){if(!e)return!1;var i=e._valueTracker;if(!i)return!0;var a=i.getValue(),o="";return e&&(o=yo(e)?e.checked?"true":"false":e.value),e=o,e!==a?(i.setValue(e),!0):!1}function is(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Rh=/[\n"\\]/g;function ge(e){return e.replace(Rh,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function un(e,i,a,o,h,f,v,E){e.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?e.type=v:e.removeAttribute("type"),i!=null?v==="number"?(i===0&&e.value===""||e.value!=i)&&(e.value=""+Je(i)):e.value!==""+Je(i)&&(e.value=""+Je(i)):v!=="submit"&&v!=="reset"||e.removeAttribute("value"),i!=null?tr(e,v,Je(i)):a!=null?tr(e,v,Je(a)):o!=null&&e.removeAttribute("value"),h==null&&f!=null&&(e.defaultChecked=!!f),h!=null&&(e.checked=h&&typeof h!="function"&&typeof h!="symbol"),E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?e.name=""+Je(E):e.removeAttribute("name")}function rs(e,i,a,o,h,f,v,E){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(e.type=f),i!=null||a!=null){if(!(f!=="submit"&&f!=="reset"||i!=null))return;a=a!=null?""+Je(a):"",i=i!=null?""+Je(i):a,E||i===e.value||(e.value=i),e.defaultValue=i}o=o??h,o=typeof o!="function"&&typeof o!="symbol"&&!!o,e.checked=E?e.checked:!!o,e.defaultChecked=!!o,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(e.name=v)}function tr(e,i,a){i==="number"&&is(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function Ei(e,i,a,o){if(e=e.options,i){i={};for(var h=0;h<a.length;h++)i["$"+a[h]]=!0;for(a=0;a<e.length;a++)h=i.hasOwnProperty("$"+e[a].value),e[a].selected!==h&&(e[a].selected=h),h&&o&&(e[a].defaultSelected=!0)}else{for(a=""+Je(a),i=null,h=0;h<e.length;h++){if(e[h].value===a){e[h].selected=!0,o&&(e[h].defaultSelected=!0);return}i!==null||e[h].disabled||(i=e[h])}i!==null&&(i.selected=!0)}}function Qt(e,i,a){if(i!=null&&(i=""+Je(i),i!==e.value&&(e.value=i),a==null)){e.defaultValue!==i&&(e.defaultValue=i);return}e.defaultValue=a!=null?""+Je(a):""}function ss(e,i,a,o){if(i==null){if(o!=null){if(a!=null)throw Error(s(92));if(ee(o)){if(1<o.length)throw Error(s(93));o=o[0]}a=o}a==null&&(a=""),i=a}a=Je(i),e.defaultValue=a,o=e.textContent,o===a&&o!==""&&o!==null&&(e.value=o)}function En(e,i){if(i){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=i;return}}e.textContent=i}var as=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function su(e,i,a){var o=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?o?e.setProperty(i,""):i==="float"?e.cssFloat="":e[i]="":o?e.setProperty(i,a):typeof a!="number"||a===0||as.has(i)?i==="float"?e.cssFloat=a:e[i]=(""+a).trim():e[i]=a+"px"}function vo(e,i,a){if(i!=null&&typeof i!="object")throw Error(s(62));if(e=e.style,a!=null){for(var o in a)!a.hasOwnProperty(o)||i!=null&&i.hasOwnProperty(o)||(o.indexOf("--")===0?e.setProperty(o,""):o==="float"?e.cssFloat="":e[o]="");for(var h in i)o=i[h],i.hasOwnProperty(h)&&a[h]!==o&&su(e,h,o)}else for(var f in i)i.hasOwnProperty(f)&&su(e,f,i[f])}function Eo(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ih=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ch=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function $s(e){return Ch.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var Ti=null;function Tn(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ai=null,Si=null;function To(e){var i=Fn(e);if(i&&(e=i.stateNode)){var a=e[me]||null;t:switch(e=i.stateNode,i.type){case"input":if(un(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+ge(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var o=a[i];if(o!==e&&o.form===e.form){var h=o[me]||null;if(!h)throw Error(s(90));un(o,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(i=0;i<a.length;i++)o=a[i],o.form===e.form&&_o(o)}break t;case"textarea":Qt(e,a.value,a.defaultValue);break t;case"select":i=a.value,i!=null&&Ei(e,!!a.multiple,i,!1)}}}var Yn=!1;function au(e,i,a){if(Yn)return e(i,a);Yn=!0;try{var o=e(i);return o}finally{if(Yn=!1,(Ai!==null||Si!==null)&&(Ju(),Ai&&(i=Ai,e=Si,Si=Ai=null,To(i),e)))for(i=0;i<e.length;i++)To(e[i])}}function os(e,i){var a=e.stateNode;if(a===null)return null;var o=a[me]||null;if(o===null)return null;a=o[i];t:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(e=e.type,o=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!o;break t;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(s(231,i,typeof a));return a}var kn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),An=!1;if(kn)try{var ls={};Object.defineProperty(ls,"passive",{get:function(){An=!0}}),window.addEventListener("test",ls,ls),window.removeEventListener("test",ls,ls)}catch{An=!1}var Xn=null,er=null,bi=null;function Ao(){if(bi)return bi;var e,i=er,a=i.length,o,h="value"in Xn?Xn.value:Xn.textContent,f=h.length;for(e=0;e<a&&i[e]===h[e];e++);var v=a-e;for(o=1;o<=v&&i[a-o]===h[f-o];o++);return bi=h.slice(e,1<o?1-o:void 0)}function $n(e){var i=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&i===13&&(e=13)):e=i,e===10&&(e=13),32<=e||e===13?e:0}function Zn(){return!0}function So(){return!1}function Ne(e){function i(a,o,h,f,v){this._reactName=a,this._targetInst=h,this.type=o,this.nativeEvent=f,this.target=v,this.currentTarget=null;for(var E in e)e.hasOwnProperty(E)&&(a=e[E],this[E]=a?a(f):f[E]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?Zn:So,this.isPropagationStopped=So,this}return A(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Zn)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Zn)},persist:function(){},isPersistent:Zn}),i}var qt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Zs=Ne(qt),us=A({},qt,{view:0,detail:0}),ou=Ne(us),Ws,Js,Wn,cs=A({},us,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ds,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Wn&&(Wn&&e.type==="mousemove"?(Ws=e.screenX-Wn.screenX,Js=e.screenY-Wn.screenY):Js=Ws=0,Wn=e),Ws)},movementY:function(e){return"movementY"in e?e.movementY:Js}}),Sn=Ne(cs),lu=A({},cs,{dataTransfer:0}),Dh=Ne(lu),hs=A({},us,{relatedTarget:0}),ta=Ne(hs),bo=A({},qt,{animationName:0,elapsedTime:0,pseudoElement:0}),ea=Ne(bo),uu=A({},qt,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),na=Ne(uu),Nh=A({},qt,{data:0}),wo=Ne(Nh),fs={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},cu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ro(e){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(e):(e=hu[e])?!!i[e]:!1}function ds(){return Ro}var fu=A({},us,{key:function(e){if(e.key){var i=fs[e.key]||e.key;if(i!=="Unidentified")return i}return e.type==="keypress"?(e=$n(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?cu[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ds,charCode:function(e){return e.type==="keypress"?$n(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?$n(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),ia=Ne(fu),du=A({},cs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Io=Ne(du),wi=A({},us,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ds}),mu=Ne(wi),gu=A({},qt,{propertyName:0,elapsedTime:0,pseudoElement:0}),pu=Ne(gu),yu=A({},cs,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),ra=Ne(yu),tn=A({},qt,{newState:0,oldState:0}),_u=Ne(tn),vu=[9,13,27,32],Jn=kn&&"CompositionEvent"in window,u=null;kn&&"documentMode"in document&&(u=document.documentMode);var m=kn&&"TextEvent"in window&&!u,y=kn&&(!Jn||u&&8<u&&11>=u),T=" ",P=!1;function j(e,i){switch(e){case"keyup":return vu.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function tt(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Mt=!1;function be(e,i){switch(e){case"compositionend":return tt(i);case"keypress":return i.which!==32?null:(P=!0,T);case"textInput":return e=i.data,e===T&&P?null:e;default:return null}}function xt(e,i){if(Mt)return e==="compositionend"||!Jn&&j(e,i)?(e=Ao(),bi=er=Xn=null,Mt=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return y&&i.locale!=="ko"?null:i.data;default:return null}}var Oe={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function we(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i==="input"?!!Oe[e.type]:i==="textarea"}function Ri(e,i,a,o){Ai?Si?Si.push(o):Si=[o]:Ai=o,i=sc(i,"onChange"),0<i.length&&(a=new Zs("onChange","change",null,a,o),e.push({event:a,listeners:i}))}var Ue=null,ti=null;function Co(e){By(e,0)}function Eu(e){var i=Qn(e);if(_o(i))return e}function og(e,i){if(e==="change")return i}var lg=!1;if(kn){var Oh;if(kn){var Vh="oninput"in document;if(!Vh){var ug=document.createElement("div");ug.setAttribute("oninput","return;"),Vh=typeof ug.oninput=="function"}Oh=Vh}else Oh=!1;lg=Oh&&(!document.documentMode||9<document.documentMode)}function cg(){Ue&&(Ue.detachEvent("onpropertychange",hg),ti=Ue=null)}function hg(e){if(e.propertyName==="value"&&Eu(ti)){var i=[];Ri(i,ti,e,Tn(e)),au(Co,i)}}function I0(e,i,a){e==="focusin"?(cg(),Ue=i,ti=a,Ue.attachEvent("onpropertychange",hg)):e==="focusout"&&cg()}function C0(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Eu(ti)}function D0(e,i){if(e==="click")return Eu(i)}function N0(e,i){if(e==="input"||e==="change")return Eu(i)}function O0(e,i){return e===i&&(e!==0||1/e===1/i)||e!==e&&i!==i}var cn=typeof Object.is=="function"?Object.is:O0;function Do(e,i){if(cn(e,i))return!0;if(typeof e!="object"||e===null||typeof i!="object"||i===null)return!1;var a=Object.keys(e),o=Object.keys(i);if(a.length!==o.length)return!1;for(o=0;o<a.length;o++){var h=a[o];if(!Qr.call(i,h)||!cn(e[h],i[h]))return!1}return!0}function fg(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function dg(e,i){var a=fg(e);e=0;for(var o;a;){if(a.nodeType===3){if(o=e+a.textContent.length,e<=i&&o>=i)return{node:a,offset:i-e};e=o}t:{for(;a;){if(a.nextSibling){a=a.nextSibling;break t}a=a.parentNode}a=void 0}a=fg(a)}}function mg(e,i){return e&&i?e===i?!0:e&&e.nodeType===3?!1:i&&i.nodeType===3?mg(e,i.parentNode):"contains"in e?e.contains(i):e.compareDocumentPosition?!!(e.compareDocumentPosition(i)&16):!1:!1}function gg(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var i=is(e.document);i instanceof e.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)e=i.contentWindow;else break;i=is(e.document)}return i}function Mh(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i&&(i==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||i==="textarea"||e.contentEditable==="true")}var V0=kn&&"documentMode"in document&&11>=document.documentMode,sa=null,xh=null,No=null,kh=!1;function pg(e,i,a){var o=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;kh||sa==null||sa!==is(o)||(o=sa,"selectionStart"in o&&Mh(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),No&&Do(No,o)||(No=o,o=sc(xh,"onSelect"),0<o.length&&(i=new Zs("onSelect","select",null,i,a),e.push({event:i,listeners:o}),i.target=sa)))}function ms(e,i){var a={};return a[e.toLowerCase()]=i.toLowerCase(),a["Webkit"+e]="webkit"+i,a["Moz"+e]="moz"+i,a}var aa={animationend:ms("Animation","AnimationEnd"),animationiteration:ms("Animation","AnimationIteration"),animationstart:ms("Animation","AnimationStart"),transitionrun:ms("Transition","TransitionRun"),transitionstart:ms("Transition","TransitionStart"),transitioncancel:ms("Transition","TransitionCancel"),transitionend:ms("Transition","TransitionEnd")},Ph={},yg={};kn&&(yg=document.createElement("div").style,"AnimationEvent"in window||(delete aa.animationend.animation,delete aa.animationiteration.animation,delete aa.animationstart.animation),"TransitionEvent"in window||delete aa.transitionend.transition);function gs(e){if(Ph[e])return Ph[e];if(!aa[e])return e;var i=aa[e],a;for(a in i)if(i.hasOwnProperty(a)&&a in yg)return Ph[e]=i[a];return e}var _g=gs("animationend"),vg=gs("animationiteration"),Eg=gs("animationstart"),M0=gs("transitionrun"),x0=gs("transitionstart"),k0=gs("transitioncancel"),Tg=gs("transitionend"),Ag=new Map,Uh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Uh.push("scrollEnd");function Pn(e,i){Ag.set(e,i),xn(i,[e])}var Sg=new WeakMap;function bn(e,i){if(typeof e=="object"&&e!==null){var a=Sg.get(e);return a!==void 0?a:(i={value:e,source:i,stack:Ys(i)},Sg.set(e,i),i)}return{value:e,source:i,stack:Ys(i)}}var wn=[],oa=0,Lh=0;function Tu(){for(var e=oa,i=Lh=oa=0;i<e;){var a=wn[i];wn[i++]=null;var o=wn[i];wn[i++]=null;var h=wn[i];wn[i++]=null;var f=wn[i];if(wn[i++]=null,o!==null&&h!==null){var v=o.pending;v===null?h.next=h:(h.next=v.next,v.next=h),o.pending=h}f!==0&&bg(a,h,f)}}function Au(e,i,a,o){wn[oa++]=e,wn[oa++]=i,wn[oa++]=a,wn[oa++]=o,Lh|=o,e.lanes|=o,e=e.alternate,e!==null&&(e.lanes|=o)}function zh(e,i,a,o){return Au(e,i,a,o),Su(e)}function la(e,i){return Au(e,null,null,i),Su(e)}function bg(e,i,a){e.lanes|=a;var o=e.alternate;o!==null&&(o.lanes|=a);for(var h=!1,f=e.return;f!==null;)f.childLanes|=a,o=f.alternate,o!==null&&(o.childLanes|=a),f.tag===22&&(e=f.stateNode,e===null||e._visibility&1||(h=!0)),e=f,f=f.return;return e.tag===3?(f=e.stateNode,h&&i!==null&&(h=31-Fe(a),e=f.hiddenUpdates,o=e[h],o===null?e[h]=[i]:o.push(i),i.lane=a|536870912),f):null}function Su(e){if(50<el)throw el=0,Qf=null,Error(s(185));for(var i=e.return;i!==null;)e=i,i=e.return;return e.tag===3?e.stateNode:null}var ua={};function P0(e,i,a,o){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function hn(e,i,a,o){return new P0(e,i,a,o)}function Bh(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Ii(e,i){var a=e.alternate;return a===null?(a=hn(e.tag,i,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=i,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,i=e.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function wg(e,i){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=i,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,i=a.dependencies,e.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),e}function bu(e,i,a,o,h,f){var v=0;if(o=e,typeof e=="function")Bh(e)&&(v=1);else if(typeof e=="string")v=L1(e,a,at.current)?26:e==="html"||e==="head"||e==="body"?27:5;else t:switch(e){case w:return e=hn(31,a,i,h),e.elementType=w,e.lanes=f,e;case Z:return ps(a.children,h,f,i);case nt:v=8,h|=24;break;case W:return e=hn(12,a,i,h|2),e.elementType=W,e.lanes=f,e;case Et:return e=hn(13,a,i,h),e.elementType=Et,e.lanes=f,e;case Ut:return e=hn(19,a,i,h),e.elementType=Ut,e.lanes=f,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case vt:case ht:v=10;break t;case dt:v=9;break t;case Vt:v=11;break t;case V:v=14;break t;case S:v=16,o=null;break t}v=29,a=Error(s(130,e===null?"null":typeof e,"")),o=null}return i=hn(v,a,i,h),i.elementType=e,i.type=o,i.lanes=f,i}function ps(e,i,a,o){return e=hn(7,e,o,i),e.lanes=a,e}function qh(e,i,a){return e=hn(6,e,null,i),e.lanes=a,e}function jh(e,i,a){return i=hn(4,e.children!==null?e.children:[],e.key,i),i.lanes=a,i.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},i}var ca=[],ha=0,wu=null,Ru=0,Rn=[],In=0,ys=null,Ci=1,Di="";function _s(e,i){ca[ha++]=Ru,ca[ha++]=wu,wu=e,Ru=i}function Rg(e,i,a){Rn[In++]=Ci,Rn[In++]=Di,Rn[In++]=ys,ys=e;var o=Ci;e=Di;var h=32-Fe(o)-1;o&=~(1<<h),a+=1;var f=32-Fe(i)+h;if(30<f){var v=h-h%5;f=(o&(1<<v)-1).toString(32),o>>=v,h-=v,Ci=1<<32-Fe(i)+h|a<<h|o,Di=f+e}else Ci=1<<f|a<<h|o,Di=e}function Hh(e){e.return!==null&&(_s(e,1),Rg(e,1,0))}function Gh(e){for(;e===wu;)wu=ca[--ha],ca[ha]=null,Ru=ca[--ha],ca[ha]=null;for(;e===ys;)ys=Rn[--In],Rn[In]=null,Di=Rn[--In],Rn[In]=null,Ci=Rn[--In],Rn[In]=null}var en=null,le=null,Bt=!1,vs=null,ei=!1,Fh=Error(s(519));function Es(e){var i=Error(s(418,""));throw Mo(bn(i,e)),Fh}function Ig(e){var i=e.stateNode,a=e.type,o=e.memoizedProps;switch(i[Se]=e,i[me]=o,a){case"dialog":Ct("cancel",i),Ct("close",i);break;case"iframe":case"object":case"embed":Ct("load",i);break;case"video":case"audio":for(a=0;a<il.length;a++)Ct(il[a],i);break;case"source":Ct("error",i);break;case"img":case"image":case"link":Ct("error",i),Ct("load",i);break;case"details":Ct("toggle",i);break;case"input":Ct("invalid",i),rs(i,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0),Xs(i);break;case"select":Ct("invalid",i);break;case"textarea":Ct("invalid",i),ss(i,o.value,o.defaultValue,o.children),Xs(i)}a=o.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||o.suppressHydrationWarning===!0||Gy(i.textContent,a)?(o.popover!=null&&(Ct("beforetoggle",i),Ct("toggle",i)),o.onScroll!=null&&Ct("scroll",i),o.onScrollEnd!=null&&Ct("scrollend",i),o.onClick!=null&&(i.onclick=ac),i=!0):i=!1,i||Es(e)}function Cg(e){for(en=e.return;en;)switch(en.tag){case 5:case 13:ei=!1;return;case 27:case 3:ei=!0;return;default:en=en.return}}function Oo(e){if(e!==en)return!1;if(!Bt)return Cg(e),Bt=!0,!1;var i=e.tag,a;if((a=i!==3&&i!==27)&&((a=i===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||ld(e.type,e.memoizedProps)),a=!a),a&&le&&Es(e),Cg(e),i===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));t:{for(e=e.nextSibling,i=0;e;){if(e.nodeType===8)if(a=e.data,a==="/$"){if(i===0){le=Ln(e.nextSibling);break t}i--}else a!=="$"&&a!=="$!"&&a!=="$?"||i++;e=e.nextSibling}le=null}}else i===27?(i=le,yr(e.type)?(e=fd,fd=null,le=e):le=i):le=en?Ln(e.stateNode.nextSibling):null;return!0}function Vo(){le=en=null,Bt=!1}function Dg(){var e=vs;return e!==null&&(sn===null?sn=e:sn.push.apply(sn,e),vs=null),e}function Mo(e){vs===null?vs=[e]:vs.push(e)}var Qh=q(null),Ts=null,Ni=null;function nr(e,i,a){$(Qh,i._currentValue),i._currentValue=a}function Oi(e){e._currentValue=Qh.current,J(Qh)}function Kh(e,i,a){for(;e!==null;){var o=e.alternate;if((e.childLanes&i)!==i?(e.childLanes|=i,o!==null&&(o.childLanes|=i)):o!==null&&(o.childLanes&i)!==i&&(o.childLanes|=i),e===a)break;e=e.return}}function Yh(e,i,a,o){var h=e.child;for(h!==null&&(h.return=e);h!==null;){var f=h.dependencies;if(f!==null){var v=h.child;f=f.firstContext;t:for(;f!==null;){var E=f;f=h;for(var b=0;b<i.length;b++)if(E.context===i[b]){f.lanes|=a,E=f.alternate,E!==null&&(E.lanes|=a),Kh(f.return,a,e),o||(v=null);break t}f=E.next}}else if(h.tag===18){if(v=h.return,v===null)throw Error(s(341));v.lanes|=a,f=v.alternate,f!==null&&(f.lanes|=a),Kh(v,a,e),v=null}else v=h.child;if(v!==null)v.return=h;else for(v=h;v!==null;){if(v===e){v=null;break}if(h=v.sibling,h!==null){h.return=v.return,v=h;break}v=v.return}h=v}}function xo(e,i,a,o){e=null;for(var h=i,f=!1;h!==null;){if(!f){if((h.flags&524288)!==0)f=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var v=h.alternate;if(v===null)throw Error(s(387));if(v=v.memoizedProps,v!==null){var E=h.type;cn(h.pendingProps.value,v.value)||(e!==null?e.push(E):e=[E])}}else if(h===re.current){if(v=h.alternate,v===null)throw Error(s(387));v.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(e!==null?e.push(ul):e=[ul])}h=h.return}e!==null&&Yh(i,e,a,o),i.flags|=262144}function Iu(e){for(e=e.firstContext;e!==null;){if(!cn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function As(e){Ts=e,Ni=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Qe(e){return Ng(Ts,e)}function Cu(e,i){return Ts===null&&As(e),Ng(e,i)}function Ng(e,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},Ni===null){if(e===null)throw Error(s(308));Ni=i,e.dependencies={lanes:0,firstContext:i},e.flags|=524288}else Ni=Ni.next=i;return a}var U0=typeof AbortController<"u"?AbortController:function(){var e=[],i=this.signal={aborted:!1,addEventListener:function(a,o){e.push(o)}};this.abort=function(){i.aborted=!0,e.forEach(function(a){return a()})}},L0=r.unstable_scheduleCallback,z0=r.unstable_NormalPriority,Re={$$typeof:ht,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Xh(){return{controller:new U0,data:new Map,refCount:0}}function ko(e){e.refCount--,e.refCount===0&&L0(z0,function(){e.controller.abort()})}var Po=null,$h=0,fa=0,da=null;function B0(e,i){if(Po===null){var a=Po=[];$h=0,fa=Jf(),da={status:"pending",value:void 0,then:function(o){a.push(o)}}}return $h++,i.then(Og,Og),i}function Og(){if(--$h===0&&Po!==null){da!==null&&(da.status="fulfilled");var e=Po;Po=null,fa=0,da=null;for(var i=0;i<e.length;i++)(0,e[i])()}}function q0(e,i){var a=[],o={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return e.then(function(){o.status="fulfilled",o.value=i;for(var h=0;h<a.length;h++)(0,a[h])(i)},function(h){for(o.status="rejected",o.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),o}var Vg=G.S;G.S=function(e,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&B0(e,i),Vg!==null&&Vg(e,i)};var Ss=q(null);function Zh(){var e=Ss.current;return e!==null?e:Wt.pooledCache}function Du(e,i){i===null?$(Ss,Ss.current):$(Ss,i.pool)}function Mg(){var e=Zh();return e===null?null:{parent:Re._currentValue,pool:e}}var Uo=Error(s(460)),xg=Error(s(474)),Nu=Error(s(542)),Wh={then:function(){}};function kg(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Ou(){}function Pg(e,i,a){switch(a=e[a],a===void 0?e.push(i):a!==i&&(i.then(Ou,Ou),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw e=i.reason,Lg(e),e;default:if(typeof i.status=="string")i.then(Ou,Ou);else{if(e=Wt,e!==null&&100<e.shellSuspendCounter)throw Error(s(482));e=i,e.status="pending",e.then(function(o){if(i.status==="pending"){var h=i;h.status="fulfilled",h.value=o}},function(o){if(i.status==="pending"){var h=i;h.status="rejected",h.reason=o}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw e=i.reason,Lg(e),e}throw Lo=i,Uo}}var Lo=null;function Ug(){if(Lo===null)throw Error(s(459));var e=Lo;return Lo=null,e}function Lg(e){if(e===Uo||e===Nu)throw Error(s(483))}var ir=!1;function Jh(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function tf(e,i){e=e.updateQueue,i.updateQueue===e&&(i.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function rr(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function sr(e,i,a){var o=e.updateQueue;if(o===null)return null;if(o=o.shared,(Gt&2)!==0){var h=o.pending;return h===null?i.next=i:(i.next=h.next,h.next=i),o.pending=i,i=Su(e),bg(e,null,a),i}return Au(e,o,i,a),Su(e)}function zo(e,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194048)!==0)){var o=i.lanes;o&=e.pendingLanes,a|=o,i.lanes=a,fo(e,a)}}function ef(e,i){var a=e.updateQueue,o=e.alternate;if(o!==null&&(o=o.updateQueue,a===o)){var h=null,f=null;if(a=a.firstBaseUpdate,a!==null){do{var v={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};f===null?h=f=v:f=f.next=v,a=a.next}while(a!==null);f===null?h=f=i:f=f.next=i}else h=f=i;a={baseState:o.baseState,firstBaseUpdate:h,lastBaseUpdate:f,shared:o.shared,callbacks:o.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=i:e.next=i,a.lastBaseUpdate=i}var nf=!1;function Bo(){if(nf){var e=da;if(e!==null)throw e}}function qo(e,i,a,o){nf=!1;var h=e.updateQueue;ir=!1;var f=h.firstBaseUpdate,v=h.lastBaseUpdate,E=h.shared.pending;if(E!==null){h.shared.pending=null;var b=E,L=b.next;b.next=null,v===null?f=L:v.next=L,v=b;var F=e.alternate;F!==null&&(F=F.updateQueue,E=F.lastBaseUpdate,E!==v&&(E===null?F.firstBaseUpdate=L:E.next=L,F.lastBaseUpdate=b))}if(f!==null){var K=h.baseState;v=0,F=L=b=null,E=f;do{var z=E.lane&-536870913,B=z!==E.lane;if(B?(kt&z)===z:(o&z)===z){z!==0&&z===fa&&(nf=!0),F!==null&&(F=F.next={lane:0,tag:E.tag,payload:E.payload,callback:null,next:null});t:{var _t=e,mt=E;z=i;var Xt=a;switch(mt.tag){case 1:if(_t=mt.payload,typeof _t=="function"){K=_t.call(Xt,K,z);break t}K=_t;break t;case 3:_t.flags=_t.flags&-65537|128;case 0:if(_t=mt.payload,z=typeof _t=="function"?_t.call(Xt,K,z):_t,z==null)break t;K=A({},K,z);break t;case 2:ir=!0}}z=E.callback,z!==null&&(e.flags|=64,B&&(e.flags|=8192),B=h.callbacks,B===null?h.callbacks=[z]:B.push(z))}else B={lane:z,tag:E.tag,payload:E.payload,callback:E.callback,next:null},F===null?(L=F=B,b=K):F=F.next=B,v|=z;if(E=E.next,E===null){if(E=h.shared.pending,E===null)break;B=E,E=B.next,B.next=null,h.lastBaseUpdate=B,h.shared.pending=null}}while(!0);F===null&&(b=K),h.baseState=b,h.firstBaseUpdate=L,h.lastBaseUpdate=F,f===null&&(h.shared.lanes=0),dr|=v,e.lanes=v,e.memoizedState=K}}function zg(e,i){if(typeof e!="function")throw Error(s(191,e));e.call(i)}function Bg(e,i){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)zg(a[e],i)}var ma=q(null),Vu=q(0);function qg(e,i){e=Li,$(Vu,e),$(ma,i),Li=e|i.baseLanes}function rf(){$(Vu,Li),$(ma,ma.current)}function sf(){Li=Vu.current,J(ma),J(Vu)}var ar=0,wt=null,Kt=null,pe=null,Mu=!1,ga=!1,bs=!1,xu=0,jo=0,pa=null,j0=0;function he(){throw Error(s(321))}function af(e,i){if(i===null)return!1;for(var a=0;a<i.length&&a<e.length;a++)if(!cn(e[a],i[a]))return!1;return!0}function of(e,i,a,o,h,f){return ar=f,wt=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,G.H=e===null||e.memoizedState===null?bp:wp,bs=!1,f=a(o,h),bs=!1,ga&&(f=Hg(i,a,o,h)),jg(e),f}function jg(e){G.H=Bu;var i=Kt!==null&&Kt.next!==null;if(ar=0,pe=Kt=wt=null,Mu=!1,jo=0,pa=null,i)throw Error(s(300));e===null||Ve||(e=e.dependencies,e!==null&&Iu(e)&&(Ve=!0))}function Hg(e,i,a,o){wt=e;var h=0;do{if(ga&&(pa=null),jo=0,ga=!1,25<=h)throw Error(s(301));if(h+=1,pe=Kt=null,e.updateQueue!=null){var f=e.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}G.H=X0,f=i(a,o)}while(ga);return f}function H0(){var e=G.H,i=e.useState()[0];return i=typeof i.then=="function"?Ho(i):i,e=e.useState()[0],(Kt!==null?Kt.memoizedState:null)!==e&&(wt.flags|=1024),i}function lf(){var e=xu!==0;return xu=0,e}function uf(e,i,a){i.updateQueue=e.updateQueue,i.flags&=-2053,e.lanes&=~a}function cf(e){if(Mu){for(e=e.memoizedState;e!==null;){var i=e.queue;i!==null&&(i.pending=null),e=e.next}Mu=!1}ar=0,pe=Kt=wt=null,ga=!1,jo=xu=0,pa=null}function nn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return pe===null?wt.memoizedState=pe=e:pe=pe.next=e,pe}function ye(){if(Kt===null){var e=wt.alternate;e=e!==null?e.memoizedState:null}else e=Kt.next;var i=pe===null?wt.memoizedState:pe.next;if(i!==null)pe=i,Kt=e;else{if(e===null)throw wt.alternate===null?Error(s(467)):Error(s(310));Kt=e,e={memoizedState:Kt.memoizedState,baseState:Kt.baseState,baseQueue:Kt.baseQueue,queue:Kt.queue,next:null},pe===null?wt.memoizedState=pe=e:pe=pe.next=e}return pe}function hf(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ho(e){var i=jo;return jo+=1,pa===null&&(pa=[]),e=Pg(pa,e,i),i=wt,(pe===null?i.memoizedState:pe.next)===null&&(i=i.alternate,G.H=i===null||i.memoizedState===null?bp:wp),e}function ku(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Ho(e);if(e.$$typeof===ht)return Qe(e)}throw Error(s(438,String(e)))}function ff(e){var i=null,a=wt.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var o=wt.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(i={data:o.data.map(function(h){return h.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=hf(),wt.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(e),o=0;o<e;o++)a[o]=O;return i.index++,a}function Vi(e,i){return typeof i=="function"?i(e):i}function Pu(e){var i=ye();return df(i,Kt,e)}function df(e,i,a){var o=e.queue;if(o===null)throw Error(s(311));o.lastRenderedReducer=a;var h=e.baseQueue,f=o.pending;if(f!==null){if(h!==null){var v=h.next;h.next=f.next,f.next=v}i.baseQueue=h=f,o.pending=null}if(f=e.baseState,h===null)e.memoizedState=f;else{i=h.next;var E=v=null,b=null,L=i,F=!1;do{var K=L.lane&-536870913;if(K!==L.lane?(kt&K)===K:(ar&K)===K){var z=L.revertLane;if(z===0)b!==null&&(b=b.next={lane:0,revertLane:0,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null}),K===fa&&(F=!0);else if((ar&z)===z){L=L.next,z===fa&&(F=!0);continue}else K={lane:0,revertLane:L.revertLane,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null},b===null?(E=b=K,v=f):b=b.next=K,wt.lanes|=z,dr|=z;K=L.action,bs&&a(f,K),f=L.hasEagerState?L.eagerState:a(f,K)}else z={lane:K,revertLane:L.revertLane,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null},b===null?(E=b=z,v=f):b=b.next=z,wt.lanes|=K,dr|=K;L=L.next}while(L!==null&&L!==i);if(b===null?v=f:b.next=E,!cn(f,e.memoizedState)&&(Ve=!0,F&&(a=da,a!==null)))throw a;e.memoizedState=f,e.baseState=v,e.baseQueue=b,o.lastRenderedState=f}return h===null&&(o.lanes=0),[e.memoizedState,o.dispatch]}function mf(e){var i=ye(),a=i.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=e;var o=a.dispatch,h=a.pending,f=i.memoizedState;if(h!==null){a.pending=null;var v=h=h.next;do f=e(f,v.action),v=v.next;while(v!==h);cn(f,i.memoizedState)||(Ve=!0),i.memoizedState=f,i.baseQueue===null&&(i.baseState=f),a.lastRenderedState=f}return[f,o]}function Gg(e,i,a){var o=wt,h=ye(),f=Bt;if(f){if(a===void 0)throw Error(s(407));a=a()}else a=i();var v=!cn((Kt||h).memoizedState,a);v&&(h.memoizedState=a,Ve=!0),h=h.queue;var E=Kg.bind(null,o,h,e);if(Go(2048,8,E,[e]),h.getSnapshot!==i||v||pe!==null&&pe.memoizedState.tag&1){if(o.flags|=2048,ya(9,Uu(),Qg.bind(null,o,h,a,i),null),Wt===null)throw Error(s(349));f||(ar&124)!==0||Fg(o,i,a)}return a}function Fg(e,i,a){e.flags|=16384,e={getSnapshot:i,value:a},i=wt.updateQueue,i===null?(i=hf(),wt.updateQueue=i,i.stores=[e]):(a=i.stores,a===null?i.stores=[e]:a.push(e))}function Qg(e,i,a,o){i.value=a,i.getSnapshot=o,Yg(i)&&Xg(e)}function Kg(e,i,a){return a(function(){Yg(i)&&Xg(e)})}function Yg(e){var i=e.getSnapshot;e=e.value;try{var a=i();return!cn(e,a)}catch{return!0}}function Xg(e){var i=la(e,2);i!==null&&pn(i,e,2)}function gf(e){var i=nn();if(typeof e=="function"){var a=e;if(e=a(),bs){ln(!0);try{a()}finally{ln(!1)}}}return i.memoizedState=i.baseState=e,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vi,lastRenderedState:e},i}function $g(e,i,a,o){return e.baseState=a,df(e,Kt,typeof o=="function"?o:Vi)}function G0(e,i,a,o,h){if(zu(e))throw Error(s(485));if(e=i.action,e!==null){var f={payload:h,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){f.listeners.push(v)}};G.T!==null?a(!0):f.isTransition=!1,o(f),a=i.pending,a===null?(f.next=i.pending=f,Zg(i,f)):(f.next=a.next,i.pending=a.next=f)}}function Zg(e,i){var a=i.action,o=i.payload,h=e.state;if(i.isTransition){var f=G.T,v={};G.T=v;try{var E=a(h,o),b=G.S;b!==null&&b(v,E),Wg(e,i,E)}catch(L){pf(e,i,L)}finally{G.T=f}}else try{f=a(h,o),Wg(e,i,f)}catch(L){pf(e,i,L)}}function Wg(e,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(o){Jg(e,i,o)},function(o){return pf(e,i,o)}):Jg(e,i,a)}function Jg(e,i,a){i.status="fulfilled",i.value=a,tp(i),e.state=a,i=e.pending,i!==null&&(a=i.next,a===i?e.pending=null:(a=a.next,i.next=a,Zg(e,a)))}function pf(e,i,a){var o=e.pending;if(e.pending=null,o!==null){o=o.next;do i.status="rejected",i.reason=a,tp(i),i=i.next;while(i!==o)}e.action=null}function tp(e){e=e.listeners;for(var i=0;i<e.length;i++)(0,e[i])()}function ep(e,i){return i}function np(e,i){if(Bt){var a=Wt.formState;if(a!==null){t:{var o=wt;if(Bt){if(le){e:{for(var h=le,f=ei;h.nodeType!==8;){if(!f){h=null;break e}if(h=Ln(h.nextSibling),h===null){h=null;break e}}f=h.data,h=f==="F!"||f==="F"?h:null}if(h){le=Ln(h.nextSibling),o=h.data==="F!";break t}}Es(o)}o=!1}o&&(i=a[0])}}return a=nn(),a.memoizedState=a.baseState=i,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ep,lastRenderedState:i},a.queue=o,a=Tp.bind(null,wt,o),o.dispatch=a,o=gf(!1),f=Tf.bind(null,wt,!1,o.queue),o=nn(),h={state:i,dispatch:null,action:e,pending:null},o.queue=h,a=G0.bind(null,wt,h,f,a),h.dispatch=a,o.memoizedState=e,[i,a,!1]}function ip(e){var i=ye();return rp(i,Kt,e)}function rp(e,i,a){if(i=df(e,i,ep)[0],e=Pu(Vi)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var o=Ho(i)}catch(v){throw v===Uo?Nu:v}else o=i;i=ye();var h=i.queue,f=h.dispatch;return a!==i.memoizedState&&(wt.flags|=2048,ya(9,Uu(),F0.bind(null,h,a),null)),[o,f,e]}function F0(e,i){e.action=i}function sp(e){var i=ye(),a=Kt;if(a!==null)return rp(i,a,e);ye(),i=i.memoizedState,a=ye();var o=a.queue.dispatch;return a.memoizedState=e,[i,o,!1]}function ya(e,i,a,o){return e={tag:e,create:a,deps:o,inst:i,next:null},i=wt.updateQueue,i===null&&(i=hf(),wt.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=e.next=e:(o=a.next,a.next=e,e.next=o,i.lastEffect=e),e}function Uu(){return{destroy:void 0,resource:void 0}}function ap(){return ye().memoizedState}function Lu(e,i,a,o){var h=nn();o=o===void 0?null:o,wt.flags|=e,h.memoizedState=ya(1|i,Uu(),a,o)}function Go(e,i,a,o){var h=ye();o=o===void 0?null:o;var f=h.memoizedState.inst;Kt!==null&&o!==null&&af(o,Kt.memoizedState.deps)?h.memoizedState=ya(i,f,a,o):(wt.flags|=e,h.memoizedState=ya(1|i,f,a,o))}function op(e,i){Lu(8390656,8,e,i)}function lp(e,i){Go(2048,8,e,i)}function up(e,i){return Go(4,2,e,i)}function cp(e,i){return Go(4,4,e,i)}function hp(e,i){if(typeof i=="function"){e=e();var a=i(e);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return e=e(),i.current=e,function(){i.current=null}}function fp(e,i,a){a=a!=null?a.concat([e]):null,Go(4,4,hp.bind(null,i,e),a)}function yf(){}function dp(e,i){var a=ye();i=i===void 0?null:i;var o=a.memoizedState;return i!==null&&af(i,o[1])?o[0]:(a.memoizedState=[e,i],e)}function mp(e,i){var a=ye();i=i===void 0?null:i;var o=a.memoizedState;if(i!==null&&af(i,o[1]))return o[0];if(o=e(),bs){ln(!0);try{e()}finally{ln(!1)}}return a.memoizedState=[o,i],o}function _f(e,i,a){return a===void 0||(ar&1073741824)!==0?e.memoizedState=i:(e.memoizedState=a,e=yy(),wt.lanes|=e,dr|=e,a)}function gp(e,i,a,o){return cn(a,i)?a:ma.current!==null?(e=_f(e,a,o),cn(e,i)||(Ve=!0),e):(ar&42)===0?(Ve=!0,e.memoizedState=a):(e=yy(),wt.lanes|=e,dr|=e,i)}function pp(e,i,a,o,h){var f=et.p;et.p=f!==0&&8>f?f:8;var v=G.T,E={};G.T=E,Tf(e,!1,i,a);try{var b=h(),L=G.S;if(L!==null&&L(E,b),b!==null&&typeof b=="object"&&typeof b.then=="function"){var F=q0(b,o);Fo(e,i,F,gn(e))}else Fo(e,i,o,gn(e))}catch(K){Fo(e,i,{then:function(){},status:"rejected",reason:K},gn())}finally{et.p=f,G.T=v}}function Q0(){}function vf(e,i,a,o){if(e.tag!==5)throw Error(s(476));var h=yp(e).queue;pp(e,h,i,ot,a===null?Q0:function(){return _p(e),a(o)})}function yp(e){var i=e.memoizedState;if(i!==null)return i;i={memoizedState:ot,baseState:ot,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vi,lastRenderedState:ot},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vi,lastRenderedState:a},next:null},e.memoizedState=i,e=e.alternate,e!==null&&(e.memoizedState=i),i}function _p(e){var i=yp(e).next.queue;Fo(e,i,{},gn())}function Ef(){return Qe(ul)}function vp(){return ye().memoizedState}function Ep(){return ye().memoizedState}function K0(e){for(var i=e.return;i!==null;){switch(i.tag){case 24:case 3:var a=gn();e=rr(a);var o=sr(i,e,a);o!==null&&(pn(o,i,a),zo(o,i,a)),i={cache:Xh()},e.payload=i;return}i=i.return}}function Y0(e,i,a){var o=gn();a={lane:o,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},zu(e)?Ap(i,a):(a=zh(e,i,a,o),a!==null&&(pn(a,e,o),Sp(a,i,o)))}function Tp(e,i,a){var o=gn();Fo(e,i,a,o)}function Fo(e,i,a,o){var h={lane:o,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(zu(e))Ap(i,h);else{var f=e.alternate;if(e.lanes===0&&(f===null||f.lanes===0)&&(f=i.lastRenderedReducer,f!==null))try{var v=i.lastRenderedState,E=f(v,a);if(h.hasEagerState=!0,h.eagerState=E,cn(E,v))return Au(e,i,h,0),Wt===null&&Tu(),!1}catch{}finally{}if(a=zh(e,i,h,o),a!==null)return pn(a,e,o),Sp(a,i,o),!0}return!1}function Tf(e,i,a,o){if(o={lane:2,revertLane:Jf(),action:o,hasEagerState:!1,eagerState:null,next:null},zu(e)){if(i)throw Error(s(479))}else i=zh(e,a,o,2),i!==null&&pn(i,e,2)}function zu(e){var i=e.alternate;return e===wt||i!==null&&i===wt}function Ap(e,i){ga=Mu=!0;var a=e.pending;a===null?i.next=i:(i.next=a.next,a.next=i),e.pending=i}function Sp(e,i,a){if((a&4194048)!==0){var o=i.lanes;o&=e.pendingLanes,a|=o,i.lanes=a,fo(e,a)}}var Bu={readContext:Qe,use:ku,useCallback:he,useContext:he,useEffect:he,useImperativeHandle:he,useLayoutEffect:he,useInsertionEffect:he,useMemo:he,useReducer:he,useRef:he,useState:he,useDebugValue:he,useDeferredValue:he,useTransition:he,useSyncExternalStore:he,useId:he,useHostTransitionStatus:he,useFormState:he,useActionState:he,useOptimistic:he,useMemoCache:he,useCacheRefresh:he},bp={readContext:Qe,use:ku,useCallback:function(e,i){return nn().memoizedState=[e,i===void 0?null:i],e},useContext:Qe,useEffect:op,useImperativeHandle:function(e,i,a){a=a!=null?a.concat([e]):null,Lu(4194308,4,hp.bind(null,i,e),a)},useLayoutEffect:function(e,i){return Lu(4194308,4,e,i)},useInsertionEffect:function(e,i){Lu(4,2,e,i)},useMemo:function(e,i){var a=nn();i=i===void 0?null:i;var o=e();if(bs){ln(!0);try{e()}finally{ln(!1)}}return a.memoizedState=[o,i],o},useReducer:function(e,i,a){var o=nn();if(a!==void 0){var h=a(i);if(bs){ln(!0);try{a(i)}finally{ln(!1)}}}else h=i;return o.memoizedState=o.baseState=h,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:h},o.queue=e,e=e.dispatch=Y0.bind(null,wt,e),[o.memoizedState,e]},useRef:function(e){var i=nn();return e={current:e},i.memoizedState=e},useState:function(e){e=gf(e);var i=e.queue,a=Tp.bind(null,wt,i);return i.dispatch=a,[e.memoizedState,a]},useDebugValue:yf,useDeferredValue:function(e,i){var a=nn();return _f(a,e,i)},useTransition:function(){var e=gf(!1);return e=pp.bind(null,wt,e.queue,!0,!1),nn().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,i,a){var o=wt,h=nn();if(Bt){if(a===void 0)throw Error(s(407));a=a()}else{if(a=i(),Wt===null)throw Error(s(349));(kt&124)!==0||Fg(o,i,a)}h.memoizedState=a;var f={value:a,getSnapshot:i};return h.queue=f,op(Kg.bind(null,o,f,e),[e]),o.flags|=2048,ya(9,Uu(),Qg.bind(null,o,f,a,i),null),a},useId:function(){var e=nn(),i=Wt.identifierPrefix;if(Bt){var a=Di,o=Ci;a=(o&~(1<<32-Fe(o)-1)).toString(32)+a,i=""+i+"R"+a,a=xu++,0<a&&(i+="H"+a.toString(32)),i+=""}else a=j0++,i=""+i+"r"+a.toString(32)+"";return e.memoizedState=i},useHostTransitionStatus:Ef,useFormState:np,useActionState:np,useOptimistic:function(e){var i=nn();i.memoizedState=i.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=Tf.bind(null,wt,!0,a),a.dispatch=i,[e,i]},useMemoCache:ff,useCacheRefresh:function(){return nn().memoizedState=K0.bind(null,wt)}},wp={readContext:Qe,use:ku,useCallback:dp,useContext:Qe,useEffect:lp,useImperativeHandle:fp,useInsertionEffect:up,useLayoutEffect:cp,useMemo:mp,useReducer:Pu,useRef:ap,useState:function(){return Pu(Vi)},useDebugValue:yf,useDeferredValue:function(e,i){var a=ye();return gp(a,Kt.memoizedState,e,i)},useTransition:function(){var e=Pu(Vi)[0],i=ye().memoizedState;return[typeof e=="boolean"?e:Ho(e),i]},useSyncExternalStore:Gg,useId:vp,useHostTransitionStatus:Ef,useFormState:ip,useActionState:ip,useOptimistic:function(e,i){var a=ye();return $g(a,Kt,e,i)},useMemoCache:ff,useCacheRefresh:Ep},X0={readContext:Qe,use:ku,useCallback:dp,useContext:Qe,useEffect:lp,useImperativeHandle:fp,useInsertionEffect:up,useLayoutEffect:cp,useMemo:mp,useReducer:mf,useRef:ap,useState:function(){return mf(Vi)},useDebugValue:yf,useDeferredValue:function(e,i){var a=ye();return Kt===null?_f(a,e,i):gp(a,Kt.memoizedState,e,i)},useTransition:function(){var e=mf(Vi)[0],i=ye().memoizedState;return[typeof e=="boolean"?e:Ho(e),i]},useSyncExternalStore:Gg,useId:vp,useHostTransitionStatus:Ef,useFormState:sp,useActionState:sp,useOptimistic:function(e,i){var a=ye();return Kt!==null?$g(a,Kt,e,i):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:ff,useCacheRefresh:Ep},_a=null,Qo=0;function qu(e){var i=Qo;return Qo+=1,_a===null&&(_a=[]),Pg(_a,e,i)}function Ko(e,i){i=i.props.ref,e.ref=i!==void 0?i:null}function ju(e,i){throw i.$$typeof===I?Error(s(525)):(e=Object.prototype.toString.call(i),Error(s(31,e==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":e)))}function Rp(e){var i=e._init;return i(e._payload)}function Ip(e){function i(k,N){if(e){var U=k.deletions;U===null?(k.deletions=[N],k.flags|=16):U.push(N)}}function a(k,N){if(!e)return null;for(;N!==null;)i(k,N),N=N.sibling;return null}function o(k){for(var N=new Map;k!==null;)k.key!==null?N.set(k.key,k):N.set(k.index,k),k=k.sibling;return N}function h(k,N){return k=Ii(k,N),k.index=0,k.sibling=null,k}function f(k,N,U){return k.index=U,e?(U=k.alternate,U!==null?(U=U.index,U<N?(k.flags|=67108866,N):U):(k.flags|=67108866,N)):(k.flags|=1048576,N)}function v(k){return e&&k.alternate===null&&(k.flags|=67108866),k}function E(k,N,U,Q){return N===null||N.tag!==6?(N=qh(U,k.mode,Q),N.return=k,N):(N=h(N,U),N.return=k,N)}function b(k,N,U,Q){var st=U.type;return st===Z?F(k,N,U.props.children,Q,U.key):N!==null&&(N.elementType===st||typeof st=="object"&&st!==null&&st.$$typeof===S&&Rp(st)===N.type)?(N=h(N,U.props),Ko(N,U),N.return=k,N):(N=bu(U.type,U.key,U.props,null,k.mode,Q),Ko(N,U),N.return=k,N)}function L(k,N,U,Q){return N===null||N.tag!==4||N.stateNode.containerInfo!==U.containerInfo||N.stateNode.implementation!==U.implementation?(N=jh(U,k.mode,Q),N.return=k,N):(N=h(N,U.children||[]),N.return=k,N)}function F(k,N,U,Q,st){return N===null||N.tag!==7?(N=ps(U,k.mode,Q,st),N.return=k,N):(N=h(N,U),N.return=k,N)}function K(k,N,U){if(typeof N=="string"&&N!==""||typeof N=="number"||typeof N=="bigint")return N=qh(""+N,k.mode,U),N.return=k,N;if(typeof N=="object"&&N!==null){switch(N.$$typeof){case D:return U=bu(N.type,N.key,N.props,null,k.mode,U),Ko(U,N),U.return=k,U;case H:return N=jh(N,k.mode,U),N.return=k,N;case S:var Q=N._init;return N=Q(N._payload),K(k,N,U)}if(ee(N)||x(N))return N=ps(N,k.mode,U,null),N.return=k,N;if(typeof N.then=="function")return K(k,qu(N),U);if(N.$$typeof===ht)return K(k,Cu(k,N),U);ju(k,N)}return null}function z(k,N,U,Q){var st=N!==null?N.key:null;if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return st!==null?null:E(k,N,""+U,Q);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case D:return U.key===st?b(k,N,U,Q):null;case H:return U.key===st?L(k,N,U,Q):null;case S:return st=U._init,U=st(U._payload),z(k,N,U,Q)}if(ee(U)||x(U))return st!==null?null:F(k,N,U,Q,null);if(typeof U.then=="function")return z(k,N,qu(U),Q);if(U.$$typeof===ht)return z(k,N,Cu(k,U),Q);ju(k,U)}return null}function B(k,N,U,Q,st){if(typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint")return k=k.get(U)||null,E(N,k,""+Q,st);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case D:return k=k.get(Q.key===null?U:Q.key)||null,b(N,k,Q,st);case H:return k=k.get(Q.key===null?U:Q.key)||null,L(N,k,Q,st);case S:var Rt=Q._init;return Q=Rt(Q._payload),B(k,N,U,Q,st)}if(ee(Q)||x(Q))return k=k.get(U)||null,F(N,k,Q,st,null);if(typeof Q.then=="function")return B(k,N,U,qu(Q),st);if(Q.$$typeof===ht)return B(k,N,U,Cu(N,Q),st);ju(N,Q)}return null}function _t(k,N,U,Q){for(var st=null,Rt=null,lt=N,gt=N=0,xe=null;lt!==null&&gt<U.length;gt++){lt.index>gt?(xe=lt,lt=null):xe=lt.sibling;var zt=z(k,lt,U[gt],Q);if(zt===null){lt===null&&(lt=xe);break}e&&lt&&zt.alternate===null&&i(k,lt),N=f(zt,N,gt),Rt===null?st=zt:Rt.sibling=zt,Rt=zt,lt=xe}if(gt===U.length)return a(k,lt),Bt&&_s(k,gt),st;if(lt===null){for(;gt<U.length;gt++)lt=K(k,U[gt],Q),lt!==null&&(N=f(lt,N,gt),Rt===null?st=lt:Rt.sibling=lt,Rt=lt);return Bt&&_s(k,gt),st}for(lt=o(lt);gt<U.length;gt++)xe=B(lt,k,gt,U[gt],Q),xe!==null&&(e&&xe.alternate!==null&&lt.delete(xe.key===null?gt:xe.key),N=f(xe,N,gt),Rt===null?st=xe:Rt.sibling=xe,Rt=xe);return e&&lt.forEach(function(Ar){return i(k,Ar)}),Bt&&_s(k,gt),st}function mt(k,N,U,Q){if(U==null)throw Error(s(151));for(var st=null,Rt=null,lt=N,gt=N=0,xe=null,zt=U.next();lt!==null&&!zt.done;gt++,zt=U.next()){lt.index>gt?(xe=lt,lt=null):xe=lt.sibling;var Ar=z(k,lt,zt.value,Q);if(Ar===null){lt===null&&(lt=xe);break}e&&lt&&Ar.alternate===null&&i(k,lt),N=f(Ar,N,gt),Rt===null?st=Ar:Rt.sibling=Ar,Rt=Ar,lt=xe}if(zt.done)return a(k,lt),Bt&&_s(k,gt),st;if(lt===null){for(;!zt.done;gt++,zt=U.next())zt=K(k,zt.value,Q),zt!==null&&(N=f(zt,N,gt),Rt===null?st=zt:Rt.sibling=zt,Rt=zt);return Bt&&_s(k,gt),st}for(lt=o(lt);!zt.done;gt++,zt=U.next())zt=B(lt,k,gt,zt.value,Q),zt!==null&&(e&&zt.alternate!==null&&lt.delete(zt.key===null?gt:zt.key),N=f(zt,N,gt),Rt===null?st=zt:Rt.sibling=zt,Rt=zt);return e&&lt.forEach(function($1){return i(k,$1)}),Bt&&_s(k,gt),st}function Xt(k,N,U,Q){if(typeof U=="object"&&U!==null&&U.type===Z&&U.key===null&&(U=U.props.children),typeof U=="object"&&U!==null){switch(U.$$typeof){case D:t:{for(var st=U.key;N!==null;){if(N.key===st){if(st=U.type,st===Z){if(N.tag===7){a(k,N.sibling),Q=h(N,U.props.children),Q.return=k,k=Q;break t}}else if(N.elementType===st||typeof st=="object"&&st!==null&&st.$$typeof===S&&Rp(st)===N.type){a(k,N.sibling),Q=h(N,U.props),Ko(Q,U),Q.return=k,k=Q;break t}a(k,N);break}else i(k,N);N=N.sibling}U.type===Z?(Q=ps(U.props.children,k.mode,Q,U.key),Q.return=k,k=Q):(Q=bu(U.type,U.key,U.props,null,k.mode,Q),Ko(Q,U),Q.return=k,k=Q)}return v(k);case H:t:{for(st=U.key;N!==null;){if(N.key===st)if(N.tag===4&&N.stateNode.containerInfo===U.containerInfo&&N.stateNode.implementation===U.implementation){a(k,N.sibling),Q=h(N,U.children||[]),Q.return=k,k=Q;break t}else{a(k,N);break}else i(k,N);N=N.sibling}Q=jh(U,k.mode,Q),Q.return=k,k=Q}return v(k);case S:return st=U._init,U=st(U._payload),Xt(k,N,U,Q)}if(ee(U))return _t(k,N,U,Q);if(x(U)){if(st=x(U),typeof st!="function")throw Error(s(150));return U=st.call(U),mt(k,N,U,Q)}if(typeof U.then=="function")return Xt(k,N,qu(U),Q);if(U.$$typeof===ht)return Xt(k,N,Cu(k,U),Q);ju(k,U)}return typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint"?(U=""+U,N!==null&&N.tag===6?(a(k,N.sibling),Q=h(N,U),Q.return=k,k=Q):(a(k,N),Q=qh(U,k.mode,Q),Q.return=k,k=Q),v(k)):a(k,N)}return function(k,N,U,Q){try{Qo=0;var st=Xt(k,N,U,Q);return _a=null,st}catch(lt){if(lt===Uo||lt===Nu)throw lt;var Rt=hn(29,lt,null,k.mode);return Rt.lanes=Q,Rt.return=k,Rt}finally{}}}var va=Ip(!0),Cp=Ip(!1),Cn=q(null),ni=null;function or(e){var i=e.alternate;$(Ie,Ie.current&1),$(Cn,e),ni===null&&(i===null||ma.current!==null||i.memoizedState!==null)&&(ni=e)}function Dp(e){if(e.tag===22){if($(Ie,Ie.current),$(Cn,e),ni===null){var i=e.alternate;i!==null&&i.memoizedState!==null&&(ni=e)}}else lr()}function lr(){$(Ie,Ie.current),$(Cn,Cn.current)}function Mi(e){J(Cn),ni===e&&(ni=null),J(Ie)}var Ie=q(0);function Hu(e){for(var i=e;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||hd(a)))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}function Af(e,i,a,o){i=e.memoizedState,a=a(o,i),a=a==null?i:A({},i,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var Sf={enqueueSetState:function(e,i,a){e=e._reactInternals;var o=gn(),h=rr(o);h.payload=i,a!=null&&(h.callback=a),i=sr(e,h,o),i!==null&&(pn(i,e,o),zo(i,e,o))},enqueueReplaceState:function(e,i,a){e=e._reactInternals;var o=gn(),h=rr(o);h.tag=1,h.payload=i,a!=null&&(h.callback=a),i=sr(e,h,o),i!==null&&(pn(i,e,o),zo(i,e,o))},enqueueForceUpdate:function(e,i){e=e._reactInternals;var a=gn(),o=rr(a);o.tag=2,i!=null&&(o.callback=i),i=sr(e,o,a),i!==null&&(pn(i,e,a),zo(i,e,a))}};function Np(e,i,a,o,h,f,v){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(o,f,v):i.prototype&&i.prototype.isPureReactComponent?!Do(a,o)||!Do(h,f):!0}function Op(e,i,a,o){e=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,o),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,o),i.state!==e&&Sf.enqueueReplaceState(i,i.state,null)}function ws(e,i){var a=i;if("ref"in i){a={};for(var o in i)o!=="ref"&&(a[o]=i[o])}if(e=e.defaultProps){a===i&&(a=A({},a));for(var h in e)a[h]===void 0&&(a[h]=e[h])}return a}var Gu=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function Vp(e){Gu(e)}function Mp(e){console.error(e)}function xp(e){Gu(e)}function Fu(e,i){try{var a=e.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(o){setTimeout(function(){throw o})}}function kp(e,i,a){try{var o=e.onCaughtError;o(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function bf(e,i,a){return a=rr(a),a.tag=3,a.payload={element:null},a.callback=function(){Fu(e,i)},a}function Pp(e){return e=rr(e),e.tag=3,e}function Up(e,i,a,o){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var f=o.value;e.payload=function(){return h(f)},e.callback=function(){kp(i,a,o)}}var v=a.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(e.callback=function(){kp(i,a,o),typeof h!="function"&&(mr===null?mr=new Set([this]):mr.add(this));var E=o.stack;this.componentDidCatch(o.value,{componentStack:E!==null?E:""})})}function $0(e,i,a,o,h){if(a.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(i=a.alternate,i!==null&&xo(i,a,h,!0),a=Cn.current,a!==null){switch(a.tag){case 13:return ni===null?Yf():a.alternate===null&&ue===0&&(ue=3),a.flags&=-257,a.flags|=65536,a.lanes=h,o===Wh?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([o]):i.add(o),$f(e,o,h)),!1;case 22:return a.flags|=65536,o===Wh?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([o])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([o]):a.add(o)),$f(e,o,h)),!1}throw Error(s(435,a.tag))}return $f(e,o,h),Yf(),!1}if(Bt)return i=Cn.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=h,o!==Fh&&(e=Error(s(422),{cause:o}),Mo(bn(e,a)))):(o!==Fh&&(i=Error(s(423),{cause:o}),Mo(bn(i,a))),e=e.current.alternate,e.flags|=65536,h&=-h,e.lanes|=h,o=bn(o,a),h=bf(e.stateNode,o,h),ef(e,h),ue!==4&&(ue=2)),!1;var f=Error(s(520),{cause:o});if(f=bn(f,a),tl===null?tl=[f]:tl.push(f),ue!==4&&(ue=2),i===null)return!0;o=bn(o,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,e=h&-h,a.lanes|=e,e=bf(a.stateNode,o,e),ef(a,e),!1;case 1:if(i=a.type,f=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(mr===null||!mr.has(f))))return a.flags|=65536,h&=-h,a.lanes|=h,h=Pp(h),Up(h,e,a,o),ef(a,h),!1}a=a.return}while(a!==null);return!1}var Lp=Error(s(461)),Ve=!1;function Le(e,i,a,o){i.child=e===null?Cp(i,null,a,o):va(i,e.child,a,o)}function zp(e,i,a,o,h){a=a.render;var f=i.ref;if("ref"in o){var v={};for(var E in o)E!=="ref"&&(v[E]=o[E])}else v=o;return As(i),o=of(e,i,a,v,f,h),E=lf(),e!==null&&!Ve?(uf(e,i,h),xi(e,i,h)):(Bt&&E&&Hh(i),i.flags|=1,Le(e,i,o,h),i.child)}function Bp(e,i,a,o,h){if(e===null){var f=a.type;return typeof f=="function"&&!Bh(f)&&f.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=f,qp(e,i,f,o,h)):(e=bu(a.type,null,o,i,i.mode,h),e.ref=i.ref,e.return=i,i.child=e)}if(f=e.child,!Vf(e,h)){var v=f.memoizedProps;if(a=a.compare,a=a!==null?a:Do,a(v,o)&&e.ref===i.ref)return xi(e,i,h)}return i.flags|=1,e=Ii(f,o),e.ref=i.ref,e.return=i,i.child=e}function qp(e,i,a,o,h){if(e!==null){var f=e.memoizedProps;if(Do(f,o)&&e.ref===i.ref)if(Ve=!1,i.pendingProps=o=f,Vf(e,h))(e.flags&131072)!==0&&(Ve=!0);else return i.lanes=e.lanes,xi(e,i,h)}return wf(e,i,a,o,h)}function jp(e,i,a){var o=i.pendingProps,h=o.children,f=e!==null?e.memoizedState:null;if(o.mode==="hidden"){if((i.flags&128)!==0){if(o=f!==null?f.baseLanes|a:a,e!==null){for(h=i.child=e.child,f=0;h!==null;)f=f|h.lanes|h.childLanes,h=h.sibling;i.childLanes=f&~o}else i.childLanes=0,i.child=null;return Hp(e,i,o,a)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},e!==null&&Du(i,f!==null?f.cachePool:null),f!==null?qg(i,f):rf(),Dp(i);else return i.lanes=i.childLanes=536870912,Hp(e,i,f!==null?f.baseLanes|a:a,a)}else f!==null?(Du(i,f.cachePool),qg(i,f),lr(),i.memoizedState=null):(e!==null&&Du(i,null),rf(),lr());return Le(e,i,h,a),i.child}function Hp(e,i,a,o){var h=Zh();return h=h===null?null:{parent:Re._currentValue,pool:h},i.memoizedState={baseLanes:a,cachePool:h},e!==null&&Du(i,null),rf(),Dp(i),e!==null&&xo(e,i,o,!0),null}function Qu(e,i){var a=i.ref;if(a===null)e!==null&&e.ref!==null&&(i.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(e===null||e.ref!==a)&&(i.flags|=4194816)}}function wf(e,i,a,o,h){return As(i),a=of(e,i,a,o,void 0,h),o=lf(),e!==null&&!Ve?(uf(e,i,h),xi(e,i,h)):(Bt&&o&&Hh(i),i.flags|=1,Le(e,i,a,h),i.child)}function Gp(e,i,a,o,h,f){return As(i),i.updateQueue=null,a=Hg(i,o,a,h),jg(e),o=lf(),e!==null&&!Ve?(uf(e,i,f),xi(e,i,f)):(Bt&&o&&Hh(i),i.flags|=1,Le(e,i,a,f),i.child)}function Fp(e,i,a,o,h){if(As(i),i.stateNode===null){var f=ua,v=a.contextType;typeof v=="object"&&v!==null&&(f=Qe(v)),f=new a(o,f),i.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=Sf,i.stateNode=f,f._reactInternals=i,f=i.stateNode,f.props=o,f.state=i.memoizedState,f.refs={},Jh(i),v=a.contextType,f.context=typeof v=="object"&&v!==null?Qe(v):ua,f.state=i.memoizedState,v=a.getDerivedStateFromProps,typeof v=="function"&&(Af(i,a,v,o),f.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(v=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),v!==f.state&&Sf.enqueueReplaceState(f,f.state,null),qo(i,o,f,h),Bo(),f.state=i.memoizedState),typeof f.componentDidMount=="function"&&(i.flags|=4194308),o=!0}else if(e===null){f=i.stateNode;var E=i.memoizedProps,b=ws(a,E);f.props=b;var L=f.context,F=a.contextType;v=ua,typeof F=="object"&&F!==null&&(v=Qe(F));var K=a.getDerivedStateFromProps;F=typeof K=="function"||typeof f.getSnapshotBeforeUpdate=="function",E=i.pendingProps!==E,F||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(E||L!==v)&&Op(i,f,o,v),ir=!1;var z=i.memoizedState;f.state=z,qo(i,o,f,h),Bo(),L=i.memoizedState,E||z!==L||ir?(typeof K=="function"&&(Af(i,a,K,o),L=i.memoizedState),(b=ir||Np(i,a,b,o,z,L,v))?(F||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(i.flags|=4194308)):(typeof f.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=o,i.memoizedState=L),f.props=o,f.state=L,f.context=v,o=b):(typeof f.componentDidMount=="function"&&(i.flags|=4194308),o=!1)}else{f=i.stateNode,tf(e,i),v=i.memoizedProps,F=ws(a,v),f.props=F,K=i.pendingProps,z=f.context,L=a.contextType,b=ua,typeof L=="object"&&L!==null&&(b=Qe(L)),E=a.getDerivedStateFromProps,(L=typeof E=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(v!==K||z!==b)&&Op(i,f,o,b),ir=!1,z=i.memoizedState,f.state=z,qo(i,o,f,h),Bo();var B=i.memoizedState;v!==K||z!==B||ir||e!==null&&e.dependencies!==null&&Iu(e.dependencies)?(typeof E=="function"&&(Af(i,a,E,o),B=i.memoizedState),(F=ir||Np(i,a,F,o,z,B,b)||e!==null&&e.dependencies!==null&&Iu(e.dependencies))?(L||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(o,B,b),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(o,B,b)),typeof f.componentDidUpdate=="function"&&(i.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof f.componentDidUpdate!="function"||v===e.memoizedProps&&z===e.memoizedState||(i.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&z===e.memoizedState||(i.flags|=1024),i.memoizedProps=o,i.memoizedState=B),f.props=o,f.state=B,f.context=b,o=F):(typeof f.componentDidUpdate!="function"||v===e.memoizedProps&&z===e.memoizedState||(i.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&z===e.memoizedState||(i.flags|=1024),o=!1)}return f=o,Qu(e,i),o=(i.flags&128)!==0,f||o?(f=i.stateNode,a=o&&typeof a.getDerivedStateFromError!="function"?null:f.render(),i.flags|=1,e!==null&&o?(i.child=va(i,e.child,null,h),i.child=va(i,null,a,h)):Le(e,i,a,h),i.memoizedState=f.state,e=i.child):e=xi(e,i,h),e}function Qp(e,i,a,o){return Vo(),i.flags|=256,Le(e,i,a,o),i.child}var Rf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function If(e){return{baseLanes:e,cachePool:Mg()}}function Cf(e,i,a){return e=e!==null?e.childLanes&~a:0,i&&(e|=Dn),e}function Kp(e,i,a){var o=i.pendingProps,h=!1,f=(i.flags&128)!==0,v;if((v=f)||(v=e!==null&&e.memoizedState===null?!1:(Ie.current&2)!==0),v&&(h=!0,i.flags&=-129),v=(i.flags&32)!==0,i.flags&=-33,e===null){if(Bt){if(h?or(i):lr(),Bt){var E=le,b;if(b=E){t:{for(b=E,E=ei;b.nodeType!==8;){if(!E){E=null;break t}if(b=Ln(b.nextSibling),b===null){E=null;break t}}E=b}E!==null?(i.memoizedState={dehydrated:E,treeContext:ys!==null?{id:Ci,overflow:Di}:null,retryLane:536870912,hydrationErrors:null},b=hn(18,null,null,0),b.stateNode=E,b.return=i,i.child=b,en=i,le=null,b=!0):b=!1}b||Es(i)}if(E=i.memoizedState,E!==null&&(E=E.dehydrated,E!==null))return hd(E)?i.lanes=32:i.lanes=536870912,null;Mi(i)}return E=o.children,o=o.fallback,h?(lr(),h=i.mode,E=Ku({mode:"hidden",children:E},h),o=ps(o,h,a,null),E.return=i,o.return=i,E.sibling=o,i.child=E,h=i.child,h.memoizedState=If(a),h.childLanes=Cf(e,v,a),i.memoizedState=Rf,o):(or(i),Df(i,E))}if(b=e.memoizedState,b!==null&&(E=b.dehydrated,E!==null)){if(f)i.flags&256?(or(i),i.flags&=-257,i=Nf(e,i,a)):i.memoizedState!==null?(lr(),i.child=e.child,i.flags|=128,i=null):(lr(),h=o.fallback,E=i.mode,o=Ku({mode:"visible",children:o.children},E),h=ps(h,E,a,null),h.flags|=2,o.return=i,h.return=i,o.sibling=h,i.child=o,va(i,e.child,null,a),o=i.child,o.memoizedState=If(a),o.childLanes=Cf(e,v,a),i.memoizedState=Rf,i=h);else if(or(i),hd(E)){if(v=E.nextSibling&&E.nextSibling.dataset,v)var L=v.dgst;v=L,o=Error(s(419)),o.stack="",o.digest=v,Mo({value:o,source:null,stack:null}),i=Nf(e,i,a)}else if(Ve||xo(e,i,a,!1),v=(a&e.childLanes)!==0,Ve||v){if(v=Wt,v!==null&&(o=a&-a,o=(o&42)!==0?1:Xi(o),o=(o&(v.suspendedLanes|a))!==0?0:o,o!==0&&o!==b.retryLane))throw b.retryLane=o,la(e,o),pn(v,e,o),Lp;E.data==="$?"||Yf(),i=Nf(e,i,a)}else E.data==="$?"?(i.flags|=192,i.child=e.child,i=null):(e=b.treeContext,le=Ln(E.nextSibling),en=i,Bt=!0,vs=null,ei=!1,e!==null&&(Rn[In++]=Ci,Rn[In++]=Di,Rn[In++]=ys,Ci=e.id,Di=e.overflow,ys=i),i=Df(i,o.children),i.flags|=4096);return i}return h?(lr(),h=o.fallback,E=i.mode,b=e.child,L=b.sibling,o=Ii(b,{mode:"hidden",children:o.children}),o.subtreeFlags=b.subtreeFlags&65011712,L!==null?h=Ii(L,h):(h=ps(h,E,a,null),h.flags|=2),h.return=i,o.return=i,o.sibling=h,i.child=o,o=h,h=i.child,E=e.child.memoizedState,E===null?E=If(a):(b=E.cachePool,b!==null?(L=Re._currentValue,b=b.parent!==L?{parent:L,pool:L}:b):b=Mg(),E={baseLanes:E.baseLanes|a,cachePool:b}),h.memoizedState=E,h.childLanes=Cf(e,v,a),i.memoizedState=Rf,o):(or(i),a=e.child,e=a.sibling,a=Ii(a,{mode:"visible",children:o.children}),a.return=i,a.sibling=null,e!==null&&(v=i.deletions,v===null?(i.deletions=[e],i.flags|=16):v.push(e)),i.child=a,i.memoizedState=null,a)}function Df(e,i){return i=Ku({mode:"visible",children:i},e.mode),i.return=e,e.child=i}function Ku(e,i){return e=hn(22,e,null,i),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function Nf(e,i,a){return va(i,e.child,null,a),e=Df(i,i.pendingProps.children),e.flags|=2,i.memoizedState=null,e}function Yp(e,i,a){e.lanes|=i;var o=e.alternate;o!==null&&(o.lanes|=i),Kh(e.return,i,a)}function Of(e,i,a,o,h){var f=e.memoizedState;f===null?e.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:o,tail:a,tailMode:h}:(f.isBackwards=i,f.rendering=null,f.renderingStartTime=0,f.last=o,f.tail=a,f.tailMode=h)}function Xp(e,i,a){var o=i.pendingProps,h=o.revealOrder,f=o.tail;if(Le(e,i,o.children,a),o=Ie.current,(o&2)!==0)o=o&1|2,i.flags|=128;else{if(e!==null&&(e.flags&128)!==0)t:for(e=i.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Yp(e,a,i);else if(e.tag===19)Yp(e,a,i);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===i)break t;for(;e.sibling===null;){if(e.return===null||e.return===i)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}o&=1}switch($(Ie,o),h){case"forwards":for(a=i.child,h=null;a!==null;)e=a.alternate,e!==null&&Hu(e)===null&&(h=a),a=a.sibling;a=h,a===null?(h=i.child,i.child=null):(h=a.sibling,a.sibling=null),Of(i,!1,h,a,f);break;case"backwards":for(a=null,h=i.child,i.child=null;h!==null;){if(e=h.alternate,e!==null&&Hu(e)===null){i.child=h;break}e=h.sibling,h.sibling=a,a=h,h=e}Of(i,!0,a,null,f);break;case"together":Of(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function xi(e,i,a){if(e!==null&&(i.dependencies=e.dependencies),dr|=i.lanes,(a&i.childLanes)===0)if(e!==null){if(xo(e,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(e!==null&&i.child!==e.child)throw Error(s(153));if(i.child!==null){for(e=i.child,a=Ii(e,e.pendingProps),i.child=a,a.return=i;e.sibling!==null;)e=e.sibling,a=a.sibling=Ii(e,e.pendingProps),a.return=i;a.sibling=null}return i.child}function Vf(e,i){return(e.lanes&i)!==0?!0:(e=e.dependencies,!!(e!==null&&Iu(e)))}function Z0(e,i,a){switch(i.tag){case 3:Zt(i,i.stateNode.containerInfo),nr(i,Re,e.memoizedState.cache),Vo();break;case 27:case 5:Yi(i);break;case 4:Zt(i,i.stateNode.containerInfo);break;case 10:nr(i,i.type,i.memoizedProps.value);break;case 13:var o=i.memoizedState;if(o!==null)return o.dehydrated!==null?(or(i),i.flags|=128,null):(a&i.child.childLanes)!==0?Kp(e,i,a):(or(i),e=xi(e,i,a),e!==null?e.sibling:null);or(i);break;case 19:var h=(e.flags&128)!==0;if(o=(a&i.childLanes)!==0,o||(xo(e,i,a,!1),o=(a&i.childLanes)!==0),h){if(o)return Xp(e,i,a);i.flags|=128}if(h=i.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),$(Ie,Ie.current),o)break;return null;case 22:case 23:return i.lanes=0,jp(e,i,a);case 24:nr(i,Re,e.memoizedState.cache)}return xi(e,i,a)}function $p(e,i,a){if(e!==null)if(e.memoizedProps!==i.pendingProps)Ve=!0;else{if(!Vf(e,a)&&(i.flags&128)===0)return Ve=!1,Z0(e,i,a);Ve=(e.flags&131072)!==0}else Ve=!1,Bt&&(i.flags&1048576)!==0&&Rg(i,Ru,i.index);switch(i.lanes=0,i.tag){case 16:t:{e=i.pendingProps;var o=i.elementType,h=o._init;if(o=h(o._payload),i.type=o,typeof o=="function")Bh(o)?(e=ws(o,e),i.tag=1,i=Fp(null,i,o,e,a)):(i.tag=0,i=wf(null,i,o,e,a));else{if(o!=null){if(h=o.$$typeof,h===Vt){i.tag=11,i=zp(null,i,o,e,a);break t}else if(h===V){i.tag=14,i=Bp(null,i,o,e,a);break t}}throw i=Ae(o)||o,Error(s(306,i,""))}}return i;case 0:return wf(e,i,i.type,i.pendingProps,a);case 1:return o=i.type,h=ws(o,i.pendingProps),Fp(e,i,o,h,a);case 3:t:{if(Zt(i,i.stateNode.containerInfo),e===null)throw Error(s(387));o=i.pendingProps;var f=i.memoizedState;h=f.element,tf(e,i),qo(i,o,null,a);var v=i.memoizedState;if(o=v.cache,nr(i,Re,o),o!==f.cache&&Yh(i,[Re],a,!0),Bo(),o=v.element,f.isDehydrated)if(f={element:o,isDehydrated:!1,cache:v.cache},i.updateQueue.baseState=f,i.memoizedState=f,i.flags&256){i=Qp(e,i,o,a);break t}else if(o!==h){h=bn(Error(s(424)),i),Mo(h),i=Qp(e,i,o,a);break t}else{switch(e=i.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(le=Ln(e.firstChild),en=i,Bt=!0,vs=null,ei=!0,a=Cp(i,null,o,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Vo(),o===h){i=xi(e,i,a);break t}Le(e,i,o,a)}i=i.child}return i;case 26:return Qu(e,i),e===null?(a=t_(i.type,null,i.pendingProps,null))?i.memoizedState=a:Bt||(a=i.type,e=i.pendingProps,o=oc(ft.current).createElement(a),o[Se]=i,o[me]=e,Be(o,a,e),ce(o),i.stateNode=o):i.memoizedState=t_(i.type,e.memoizedProps,i.pendingProps,e.memoizedState),null;case 27:return Yi(i),e===null&&Bt&&(o=i.stateNode=Zy(i.type,i.pendingProps,ft.current),en=i,ei=!0,h=le,yr(i.type)?(fd=h,le=Ln(o.firstChild)):le=h),Le(e,i,i.pendingProps.children,a),Qu(e,i),e===null&&(i.flags|=4194304),i.child;case 5:return e===null&&Bt&&((h=o=le)&&(o=w1(o,i.type,i.pendingProps,ei),o!==null?(i.stateNode=o,en=i,le=Ln(o.firstChild),ei=!1,h=!0):h=!1),h||Es(i)),Yi(i),h=i.type,f=i.pendingProps,v=e!==null?e.memoizedProps:null,o=f.children,ld(h,f)?o=null:v!==null&&ld(h,v)&&(i.flags|=32),i.memoizedState!==null&&(h=of(e,i,H0,null,null,a),ul._currentValue=h),Qu(e,i),Le(e,i,o,a),i.child;case 6:return e===null&&Bt&&((e=a=le)&&(a=R1(a,i.pendingProps,ei),a!==null?(i.stateNode=a,en=i,le=null,e=!0):e=!1),e||Es(i)),null;case 13:return Kp(e,i,a);case 4:return Zt(i,i.stateNode.containerInfo),o=i.pendingProps,e===null?i.child=va(i,null,o,a):Le(e,i,o,a),i.child;case 11:return zp(e,i,i.type,i.pendingProps,a);case 7:return Le(e,i,i.pendingProps,a),i.child;case 8:return Le(e,i,i.pendingProps.children,a),i.child;case 12:return Le(e,i,i.pendingProps.children,a),i.child;case 10:return o=i.pendingProps,nr(i,i.type,o.value),Le(e,i,o.children,a),i.child;case 9:return h=i.type._context,o=i.pendingProps.children,As(i),h=Qe(h),o=o(h),i.flags|=1,Le(e,i,o,a),i.child;case 14:return Bp(e,i,i.type,i.pendingProps,a);case 15:return qp(e,i,i.type,i.pendingProps,a);case 19:return Xp(e,i,a);case 31:return o=i.pendingProps,a=i.mode,o={mode:o.mode,children:o.children},e===null?(a=Ku(o,a),a.ref=i.ref,i.child=a,a.return=i,i=a):(a=Ii(e.child,o),a.ref=i.ref,i.child=a,a.return=i,i=a),i;case 22:return jp(e,i,a);case 24:return As(i),o=Qe(Re),e===null?(h=Zh(),h===null&&(h=Wt,f=Xh(),h.pooledCache=f,f.refCount++,f!==null&&(h.pooledCacheLanes|=a),h=f),i.memoizedState={parent:o,cache:h},Jh(i),nr(i,Re,h)):((e.lanes&a)!==0&&(tf(e,i),qo(i,null,null,a),Bo()),h=e.memoizedState,f=i.memoizedState,h.parent!==o?(h={parent:o,cache:o},i.memoizedState=h,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=h),nr(i,Re,o)):(o=f.cache,nr(i,Re,o),o!==h.cache&&Yh(i,[Re],a,!0))),Le(e,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}function ki(e){e.flags|=4}function Zp(e,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!s_(i)){if(i=Cn.current,i!==null&&((kt&4194048)===kt?ni!==null:(kt&62914560)!==kt&&(kt&536870912)===0||i!==ni))throw Lo=Wh,xg;e.flags|=8192}}function Yu(e,i){i!==null&&(e.flags|=4),e.flags&16384&&(i=e.tag!==22?co():536870912,e.lanes|=i,Sa|=i)}function Yo(e,i){if(!Bt)switch(e.tailMode){case"hidden":i=e.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var o=null;a!==null;)a.alternate!==null&&(o=a),a=a.sibling;o===null?i||e.tail===null?e.tail=null:e.tail.sibling=null:o.sibling=null}}function se(e){var i=e.alternate!==null&&e.alternate.child===e.child,a=0,o=0;if(i)for(var h=e.child;h!==null;)a|=h.lanes|h.childLanes,o|=h.subtreeFlags&65011712,o|=h.flags&65011712,h.return=e,h=h.sibling;else for(h=e.child;h!==null;)a|=h.lanes|h.childLanes,o|=h.subtreeFlags,o|=h.flags,h.return=e,h=h.sibling;return e.subtreeFlags|=o,e.childLanes=a,i}function W0(e,i,a){var o=i.pendingProps;switch(Gh(i),i.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return se(i),null;case 1:return se(i),null;case 3:return a=i.stateNode,o=null,e!==null&&(o=e.memoizedState.cache),i.memoizedState.cache!==o&&(i.flags|=2048),Oi(Re),Hn(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(Oo(i)?ki(i):e===null||e.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Dg())),se(i),null;case 26:return a=i.memoizedState,e===null?(ki(i),a!==null?(se(i),Zp(i,a)):(se(i),i.flags&=-16777217)):a?a!==e.memoizedState?(ki(i),se(i),Zp(i,a)):(se(i),i.flags&=-16777217):(e.memoizedProps!==o&&ki(i),se(i),i.flags&=-16777217),null;case 27:mi(i),a=ft.current;var h=i.type;if(e!==null&&i.stateNode!=null)e.memoizedProps!==o&&ki(i);else{if(!o){if(i.stateNode===null)throw Error(s(166));return se(i),null}e=at.current,Oo(i)?Ig(i):(e=Zy(h,o,a),i.stateNode=e,ki(i))}return se(i),null;case 5:if(mi(i),a=i.type,e!==null&&i.stateNode!=null)e.memoizedProps!==o&&ki(i);else{if(!o){if(i.stateNode===null)throw Error(s(166));return se(i),null}if(e=at.current,Oo(i))Ig(i);else{switch(h=oc(ft.current),e){case 1:e=h.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:e=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":e=h.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":e=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":e=h.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof o.is=="string"?h.createElement("select",{is:o.is}):h.createElement("select"),o.multiple?e.multiple=!0:o.size&&(e.size=o.size);break;default:e=typeof o.is=="string"?h.createElement(a,{is:o.is}):h.createElement(a)}}e[Se]=i,e[me]=o;t:for(h=i.child;h!==null;){if(h.tag===5||h.tag===6)e.appendChild(h.stateNode);else if(h.tag!==4&&h.tag!==27&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===i)break t;for(;h.sibling===null;){if(h.return===null||h.return===i)break t;h=h.return}h.sibling.return=h.return,h=h.sibling}i.stateNode=e;t:switch(Be(e,a,o),a){case"button":case"input":case"select":case"textarea":e=!!o.autoFocus;break t;case"img":e=!0;break t;default:e=!1}e&&ki(i)}}return se(i),i.flags&=-16777217,null;case 6:if(e&&i.stateNode!=null)e.memoizedProps!==o&&ki(i);else{if(typeof o!="string"&&i.stateNode===null)throw Error(s(166));if(e=ft.current,Oo(i)){if(e=i.stateNode,a=i.memoizedProps,o=null,h=en,h!==null)switch(h.tag){case 27:case 5:o=h.memoizedProps}e[Se]=i,e=!!(e.nodeValue===a||o!==null&&o.suppressHydrationWarning===!0||Gy(e.nodeValue,a)),e||Es(i)}else e=oc(e).createTextNode(o),e[Se]=i,i.stateNode=e}return se(i),null;case 13:if(o=i.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(h=Oo(i),o!==null&&o.dehydrated!==null){if(e===null){if(!h)throw Error(s(318));if(h=i.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(s(317));h[Se]=i}else Vo(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;se(i),h=!1}else h=Dg(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=h),h=!0;if(!h)return i.flags&256?(Mi(i),i):(Mi(i),null)}if(Mi(i),(i.flags&128)!==0)return i.lanes=a,i;if(a=o!==null,e=e!==null&&e.memoizedState!==null,a){o=i.child,h=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(h=o.alternate.memoizedState.cachePool.pool);var f=null;o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(f=o.memoizedState.cachePool.pool),f!==h&&(o.flags|=2048)}return a!==e&&a&&(i.child.flags|=8192),Yu(i,i.updateQueue),se(i),null;case 4:return Hn(),e===null&&id(i.stateNode.containerInfo),se(i),null;case 10:return Oi(i.type),se(i),null;case 19:if(J(Ie),h=i.memoizedState,h===null)return se(i),null;if(o=(i.flags&128)!==0,f=h.rendering,f===null)if(o)Yo(h,!1);else{if(ue!==0||e!==null&&(e.flags&128)!==0)for(e=i.child;e!==null;){if(f=Hu(e),f!==null){for(i.flags|=128,Yo(h,!1),e=f.updateQueue,i.updateQueue=e,Yu(i,e),i.subtreeFlags=0,e=a,a=i.child;a!==null;)wg(a,e),a=a.sibling;return $(Ie,Ie.current&1|2),i.child}e=e.sibling}h.tail!==null&&_n()>Zu&&(i.flags|=128,o=!0,Yo(h,!1),i.lanes=4194304)}else{if(!o)if(e=Hu(f),e!==null){if(i.flags|=128,o=!0,e=e.updateQueue,i.updateQueue=e,Yu(i,e),Yo(h,!0),h.tail===null&&h.tailMode==="hidden"&&!f.alternate&&!Bt)return se(i),null}else 2*_n()-h.renderingStartTime>Zu&&a!==536870912&&(i.flags|=128,o=!0,Yo(h,!1),i.lanes=4194304);h.isBackwards?(f.sibling=i.child,i.child=f):(e=h.last,e!==null?e.sibling=f:i.child=f,h.last=f)}return h.tail!==null?(i=h.tail,h.rendering=i,h.tail=i.sibling,h.renderingStartTime=_n(),i.sibling=null,e=Ie.current,$(Ie,o?e&1|2:e&1),i):(se(i),null);case 22:case 23:return Mi(i),sf(),o=i.memoizedState!==null,e!==null?e.memoizedState!==null!==o&&(i.flags|=8192):o&&(i.flags|=8192),o?(a&536870912)!==0&&(i.flags&128)===0&&(se(i),i.subtreeFlags&6&&(i.flags|=8192)):se(i),a=i.updateQueue,a!==null&&Yu(i,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),o=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(o=i.memoizedState.cachePool.pool),o!==a&&(i.flags|=2048),e!==null&&J(Ss),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),Oi(Re),se(i),null;case 25:return null;case 30:return null}throw Error(s(156,i.tag))}function J0(e,i){switch(Gh(i),i.tag){case 1:return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 3:return Oi(Re),Hn(),e=i.flags,(e&65536)!==0&&(e&128)===0?(i.flags=e&-65537|128,i):null;case 26:case 27:case 5:return mi(i),null;case 13:if(Mi(i),e=i.memoizedState,e!==null&&e.dehydrated!==null){if(i.alternate===null)throw Error(s(340));Vo()}return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 19:return J(Ie),null;case 4:return Hn(),null;case 10:return Oi(i.type),null;case 22:case 23:return Mi(i),sf(),e!==null&&J(Ss),e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 24:return Oi(Re),null;case 25:return null;default:return null}}function Wp(e,i){switch(Gh(i),i.tag){case 3:Oi(Re),Hn();break;case 26:case 27:case 5:mi(i);break;case 4:Hn();break;case 13:Mi(i);break;case 19:J(Ie);break;case 10:Oi(i.type);break;case 22:case 23:Mi(i),sf(),e!==null&&J(Ss);break;case 24:Oi(Re)}}function Xo(e,i){try{var a=i.updateQueue,o=a!==null?a.lastEffect:null;if(o!==null){var h=o.next;a=h;do{if((a.tag&e)===e){o=void 0;var f=a.create,v=a.inst;o=f(),v.destroy=o}a=a.next}while(a!==h)}}catch(E){$t(i,i.return,E)}}function ur(e,i,a){try{var o=i.updateQueue,h=o!==null?o.lastEffect:null;if(h!==null){var f=h.next;o=f;do{if((o.tag&e)===e){var v=o.inst,E=v.destroy;if(E!==void 0){v.destroy=void 0,h=i;var b=a,L=E;try{L()}catch(F){$t(h,b,F)}}}o=o.next}while(o!==f)}}catch(F){$t(i,i.return,F)}}function Jp(e){var i=e.updateQueue;if(i!==null){var a=e.stateNode;try{Bg(i,a)}catch(o){$t(e,e.return,o)}}}function ty(e,i,a){a.props=ws(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(o){$t(e,i,o)}}function $o(e,i){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var o=e.stateNode;break;case 30:o=e.stateNode;break;default:o=e.stateNode}typeof a=="function"?e.refCleanup=a(o):a.current=o}}catch(h){$t(e,i,h)}}function ii(e,i){var a=e.ref,o=e.refCleanup;if(a!==null)if(typeof o=="function")try{o()}catch(h){$t(e,i,h)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){$t(e,i,h)}else a.current=null}function ey(e){var i=e.type,a=e.memoizedProps,o=e.stateNode;try{t:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&o.focus();break t;case"img":a.src?o.src=a.src:a.srcSet&&(o.srcset=a.srcSet)}}catch(h){$t(e,e.return,h)}}function Mf(e,i,a){try{var o=e.stateNode;E1(o,e.type,a,i),o[me]=i}catch(h){$t(e,e.return,h)}}function ny(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&yr(e.type)||e.tag===4}function xf(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||ny(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&yr(e.type)||e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function kf(e,i,a){var o=e.tag;if(o===5||o===6)e=e.stateNode,i?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,i):(i=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,i.appendChild(e),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=ac));else if(o!==4&&(o===27&&yr(e.type)&&(a=e.stateNode,i=null),e=e.child,e!==null))for(kf(e,i,a),e=e.sibling;e!==null;)kf(e,i,a),e=e.sibling}function Xu(e,i,a){var o=e.tag;if(o===5||o===6)e=e.stateNode,i?a.insertBefore(e,i):a.appendChild(e);else if(o!==4&&(o===27&&yr(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(Xu(e,i,a),e=e.sibling;e!==null;)Xu(e,i,a),e=e.sibling}function iy(e){var i=e.stateNode,a=e.memoizedProps;try{for(var o=e.type,h=i.attributes;h.length;)i.removeAttributeNode(h[0]);Be(i,o,a),i[Se]=e,i[me]=a}catch(f){$t(e,e.return,f)}}var Pi=!1,fe=!1,Pf=!1,ry=typeof WeakSet=="function"?WeakSet:Set,Me=null;function t1(e,i){if(e=e.containerInfo,ad=dc,e=gg(e),Mh(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else t:{a=(a=e.ownerDocument)&&a.defaultView||window;var o=a.getSelection&&a.getSelection();if(o&&o.rangeCount!==0){a=o.anchorNode;var h=o.anchorOffset,f=o.focusNode;o=o.focusOffset;try{a.nodeType,f.nodeType}catch{a=null;break t}var v=0,E=-1,b=-1,L=0,F=0,K=e,z=null;e:for(;;){for(var B;K!==a||h!==0&&K.nodeType!==3||(E=v+h),K!==f||o!==0&&K.nodeType!==3||(b=v+o),K.nodeType===3&&(v+=K.nodeValue.length),(B=K.firstChild)!==null;)z=K,K=B;for(;;){if(K===e)break e;if(z===a&&++L===h&&(E=v),z===f&&++F===o&&(b=v),(B=K.nextSibling)!==null)break;K=z,z=K.parentNode}K=B}a=E===-1||b===-1?null:{start:E,end:b}}else a=null}a=a||{start:0,end:0}}else a=null;for(od={focusedElem:e,selectionRange:a},dc=!1,Me=i;Me!==null;)if(i=Me,e=i.child,(i.subtreeFlags&1024)!==0&&e!==null)e.return=i,Me=e;else for(;Me!==null;){switch(i=Me,f=i.alternate,e=i.flags,i.tag){case 0:break;case 11:case 15:break;case 1:if((e&1024)!==0&&f!==null){e=void 0,a=i,h=f.memoizedProps,f=f.memoizedState,o=a.stateNode;try{var _t=ws(a.type,h,a.elementType===a.type);e=o.getSnapshotBeforeUpdate(_t,f),o.__reactInternalSnapshotBeforeUpdate=e}catch(mt){$t(a,a.return,mt)}}break;case 3:if((e&1024)!==0){if(e=i.stateNode.containerInfo,a=e.nodeType,a===9)cd(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":cd(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(s(163))}if(e=i.sibling,e!==null){e.return=i.return,Me=e;break}Me=i.return}}function sy(e,i,a){var o=a.flags;switch(a.tag){case 0:case 11:case 15:cr(e,a),o&4&&Xo(5,a);break;case 1:if(cr(e,a),o&4)if(e=a.stateNode,i===null)try{e.componentDidMount()}catch(v){$t(a,a.return,v)}else{var h=ws(a.type,i.memoizedProps);i=i.memoizedState;try{e.componentDidUpdate(h,i,e.__reactInternalSnapshotBeforeUpdate)}catch(v){$t(a,a.return,v)}}o&64&&Jp(a),o&512&&$o(a,a.return);break;case 3:if(cr(e,a),o&64&&(e=a.updateQueue,e!==null)){if(i=null,a.child!==null)switch(a.child.tag){case 27:case 5:i=a.child.stateNode;break;case 1:i=a.child.stateNode}try{Bg(e,i)}catch(v){$t(a,a.return,v)}}break;case 27:i===null&&o&4&&iy(a);case 26:case 5:cr(e,a),i===null&&o&4&&ey(a),o&512&&$o(a,a.return);break;case 12:cr(e,a);break;case 13:cr(e,a),o&4&&ly(e,a),o&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=u1.bind(null,a),I1(e,a))));break;case 22:if(o=a.memoizedState!==null||Pi,!o){i=i!==null&&i.memoizedState!==null||fe,h=Pi;var f=fe;Pi=o,(fe=i)&&!f?hr(e,a,(a.subtreeFlags&8772)!==0):cr(e,a),Pi=h,fe=f}break;case 30:break;default:cr(e,a)}}function ay(e){var i=e.alternate;i!==null&&(e.alternate=null,ay(i)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(i=e.stateNode,i!==null&&Wi(i)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var ie=null,rn=!1;function Ui(e,i,a){for(a=a.child;a!==null;)oy(e,i,a),a=a.sibling}function oy(e,i,a){if(Ht&&typeof Ht.onCommitFiberUnmount=="function")try{Ht.onCommitFiberUnmount(oe,a)}catch{}switch(a.tag){case 26:fe||ii(a,i),Ui(e,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:fe||ii(a,i);var o=ie,h=rn;yr(a.type)&&(ie=a.stateNode,rn=!1),Ui(e,i,a),sl(a.stateNode),ie=o,rn=h;break;case 5:fe||ii(a,i);case 6:if(o=ie,h=rn,ie=null,Ui(e,i,a),ie=o,rn=h,ie!==null)if(rn)try{(ie.nodeType===9?ie.body:ie.nodeName==="HTML"?ie.ownerDocument.body:ie).removeChild(a.stateNode)}catch(f){$t(a,i,f)}else try{ie.removeChild(a.stateNode)}catch(f){$t(a,i,f)}break;case 18:ie!==null&&(rn?(e=ie,Xy(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),dl(e)):Xy(ie,a.stateNode));break;case 4:o=ie,h=rn,ie=a.stateNode.containerInfo,rn=!0,Ui(e,i,a),ie=o,rn=h;break;case 0:case 11:case 14:case 15:fe||ur(2,a,i),fe||ur(4,a,i),Ui(e,i,a);break;case 1:fe||(ii(a,i),o=a.stateNode,typeof o.componentWillUnmount=="function"&&ty(a,i,o)),Ui(e,i,a);break;case 21:Ui(e,i,a);break;case 22:fe=(o=fe)||a.memoizedState!==null,Ui(e,i,a),fe=o;break;default:Ui(e,i,a)}}function ly(e,i){if(i.memoizedState===null&&(e=i.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{dl(e)}catch(a){$t(i,i.return,a)}}function e1(e){switch(e.tag){case 13:case 19:var i=e.stateNode;return i===null&&(i=e.stateNode=new ry),i;case 22:return e=e.stateNode,i=e._retryCache,i===null&&(i=e._retryCache=new ry),i;default:throw Error(s(435,e.tag))}}function Uf(e,i){var a=e1(e);i.forEach(function(o){var h=c1.bind(null,e,o);a.has(o)||(a.add(o),o.then(h,h))})}function fn(e,i){var a=i.deletions;if(a!==null)for(var o=0;o<a.length;o++){var h=a[o],f=e,v=i,E=v;t:for(;E!==null;){switch(E.tag){case 27:if(yr(E.type)){ie=E.stateNode,rn=!1;break t}break;case 5:ie=E.stateNode,rn=!1;break t;case 3:case 4:ie=E.stateNode.containerInfo,rn=!0;break t}E=E.return}if(ie===null)throw Error(s(160));oy(f,v,h),ie=null,rn=!1,f=h.alternate,f!==null&&(f.return=null),h.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)uy(i,e),i=i.sibling}var Un=null;function uy(e,i){var a=e.alternate,o=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:fn(i,e),dn(e),o&4&&(ur(3,e,e.return),Xo(3,e),ur(5,e,e.return));break;case 1:fn(i,e),dn(e),o&512&&(fe||a===null||ii(a,a.return)),o&64&&Pi&&(e=e.updateQueue,e!==null&&(o=e.callbacks,o!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?o:a.concat(o))));break;case 26:var h=Un;if(fn(i,e),dn(e),o&512&&(fe||a===null||ii(a,a.return)),o&4){var f=a!==null?a.memoizedState:null;if(o=e.memoizedState,a===null)if(o===null)if(e.stateNode===null){t:{o=e.type,a=e.memoizedProps,h=h.ownerDocument||h;e:switch(o){case"title":f=h.getElementsByTagName("title")[0],(!f||f[ts]||f[Se]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=h.createElement(o),h.head.insertBefore(f,h.querySelector("head > title"))),Be(f,o,a),f[Se]=e,ce(f),o=f;break t;case"link":var v=i_("link","href",h).get(o+(a.href||""));if(v){for(var E=0;E<v.length;E++)if(f=v[E],f.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&f.getAttribute("rel")===(a.rel==null?null:a.rel)&&f.getAttribute("title")===(a.title==null?null:a.title)&&f.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){v.splice(E,1);break e}}f=h.createElement(o),Be(f,o,a),h.head.appendChild(f);break;case"meta":if(v=i_("meta","content",h).get(o+(a.content||""))){for(E=0;E<v.length;E++)if(f=v[E],f.getAttribute("content")===(a.content==null?null:""+a.content)&&f.getAttribute("name")===(a.name==null?null:a.name)&&f.getAttribute("property")===(a.property==null?null:a.property)&&f.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&f.getAttribute("charset")===(a.charSet==null?null:a.charSet)){v.splice(E,1);break e}}f=h.createElement(o),Be(f,o,a),h.head.appendChild(f);break;default:throw Error(s(468,o))}f[Se]=e,ce(f),o=f}e.stateNode=o}else r_(h,e.type,e.stateNode);else e.stateNode=n_(h,o,e.memoizedProps);else f!==o?(f===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):f.count--,o===null?r_(h,e.type,e.stateNode):n_(h,o,e.memoizedProps)):o===null&&e.stateNode!==null&&Mf(e,e.memoizedProps,a.memoizedProps)}break;case 27:fn(i,e),dn(e),o&512&&(fe||a===null||ii(a,a.return)),a!==null&&o&4&&Mf(e,e.memoizedProps,a.memoizedProps);break;case 5:if(fn(i,e),dn(e),o&512&&(fe||a===null||ii(a,a.return)),e.flags&32){h=e.stateNode;try{En(h,"")}catch(B){$t(e,e.return,B)}}o&4&&e.stateNode!=null&&(h=e.memoizedProps,Mf(e,h,a!==null?a.memoizedProps:h)),o&1024&&(Pf=!0);break;case 6:if(fn(i,e),dn(e),o&4){if(e.stateNode===null)throw Error(s(162));o=e.memoizedProps,a=e.stateNode;try{a.nodeValue=o}catch(B){$t(e,e.return,B)}}break;case 3:if(cc=null,h=Un,Un=lc(i.containerInfo),fn(i,e),Un=h,dn(e),o&4&&a!==null&&a.memoizedState.isDehydrated)try{dl(i.containerInfo)}catch(B){$t(e,e.return,B)}Pf&&(Pf=!1,cy(e));break;case 4:o=Un,Un=lc(e.stateNode.containerInfo),fn(i,e),dn(e),Un=o;break;case 12:fn(i,e),dn(e);break;case 13:fn(i,e),dn(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Hf=_n()),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,Uf(e,o)));break;case 22:h=e.memoizedState!==null;var b=a!==null&&a.memoizedState!==null,L=Pi,F=fe;if(Pi=L||h,fe=F||b,fn(i,e),fe=F,Pi=L,dn(e),o&8192)t:for(i=e.stateNode,i._visibility=h?i._visibility&-2:i._visibility|1,h&&(a===null||b||Pi||fe||Rs(e)),a=null,i=e;;){if(i.tag===5||i.tag===26){if(a===null){b=a=i;try{if(f=b.stateNode,h)v=f.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{E=b.stateNode;var K=b.memoizedProps.style,z=K!=null&&K.hasOwnProperty("display")?K.display:null;E.style.display=z==null||typeof z=="boolean"?"":(""+z).trim()}}catch(B){$t(b,b.return,B)}}}else if(i.tag===6){if(a===null){b=i;try{b.stateNode.nodeValue=h?"":b.memoizedProps}catch(B){$t(b,b.return,B)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===e)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break t;for(;i.sibling===null;){if(i.return===null||i.return===e)break t;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}o&4&&(o=e.updateQueue,o!==null&&(a=o.retryQueue,a!==null&&(o.retryQueue=null,Uf(e,a))));break;case 19:fn(i,e),dn(e),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,Uf(e,o)));break;case 30:break;case 21:break;default:fn(i,e),dn(e)}}function dn(e){var i=e.flags;if(i&2){try{for(var a,o=e.return;o!==null;){if(ny(o)){a=o;break}o=o.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var h=a.stateNode,f=xf(e);Xu(e,f,h);break;case 5:var v=a.stateNode;a.flags&32&&(En(v,""),a.flags&=-33);var E=xf(e);Xu(e,E,v);break;case 3:case 4:var b=a.stateNode.containerInfo,L=xf(e);kf(e,L,b);break;default:throw Error(s(161))}}catch(F){$t(e,e.return,F)}e.flags&=-3}i&4096&&(e.flags&=-4097)}function cy(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var i=e;cy(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),e=e.sibling}}function cr(e,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)sy(e,i.alternate,i),i=i.sibling}function Rs(e){for(e=e.child;e!==null;){var i=e;switch(i.tag){case 0:case 11:case 14:case 15:ur(4,i,i.return),Rs(i);break;case 1:ii(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&ty(i,i.return,a),Rs(i);break;case 27:sl(i.stateNode);case 26:case 5:ii(i,i.return),Rs(i);break;case 22:i.memoizedState===null&&Rs(i);break;case 30:Rs(i);break;default:Rs(i)}e=e.sibling}}function hr(e,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var o=i.alternate,h=e,f=i,v=f.flags;switch(f.tag){case 0:case 11:case 15:hr(h,f,a),Xo(4,f);break;case 1:if(hr(h,f,a),o=f,h=o.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(L){$t(o,o.return,L)}if(o=f,h=o.updateQueue,h!==null){var E=o.stateNode;try{var b=h.shared.hiddenCallbacks;if(b!==null)for(h.shared.hiddenCallbacks=null,h=0;h<b.length;h++)zg(b[h],E)}catch(L){$t(o,o.return,L)}}a&&v&64&&Jp(f),$o(f,f.return);break;case 27:iy(f);case 26:case 5:hr(h,f,a),a&&o===null&&v&4&&ey(f),$o(f,f.return);break;case 12:hr(h,f,a);break;case 13:hr(h,f,a),a&&v&4&&ly(h,f);break;case 22:f.memoizedState===null&&hr(h,f,a),$o(f,f.return);break;case 30:break;default:hr(h,f,a)}i=i.sibling}}function Lf(e,i){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(e=i.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&ko(a))}function zf(e,i){e=null,i.alternate!==null&&(e=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==e&&(i.refCount++,e!=null&&ko(e))}function ri(e,i,a,o){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)hy(e,i,a,o),i=i.sibling}function hy(e,i,a,o){var h=i.flags;switch(i.tag){case 0:case 11:case 15:ri(e,i,a,o),h&2048&&Xo(9,i);break;case 1:ri(e,i,a,o);break;case 3:ri(e,i,a,o),h&2048&&(e=null,i.alternate!==null&&(e=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==e&&(i.refCount++,e!=null&&ko(e)));break;case 12:if(h&2048){ri(e,i,a,o),e=i.stateNode;try{var f=i.memoizedProps,v=f.id,E=f.onPostCommit;typeof E=="function"&&E(v,i.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(b){$t(i,i.return,b)}}else ri(e,i,a,o);break;case 13:ri(e,i,a,o);break;case 23:break;case 22:f=i.stateNode,v=i.alternate,i.memoizedState!==null?f._visibility&2?ri(e,i,a,o):Zo(e,i):f._visibility&2?ri(e,i,a,o):(f._visibility|=2,Ea(e,i,a,o,(i.subtreeFlags&10256)!==0)),h&2048&&Lf(v,i);break;case 24:ri(e,i,a,o),h&2048&&zf(i.alternate,i);break;default:ri(e,i,a,o)}}function Ea(e,i,a,o,h){for(h=h&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var f=e,v=i,E=a,b=o,L=v.flags;switch(v.tag){case 0:case 11:case 15:Ea(f,v,E,b,h),Xo(8,v);break;case 23:break;case 22:var F=v.stateNode;v.memoizedState!==null?F._visibility&2?Ea(f,v,E,b,h):Zo(f,v):(F._visibility|=2,Ea(f,v,E,b,h)),h&&L&2048&&Lf(v.alternate,v);break;case 24:Ea(f,v,E,b,h),h&&L&2048&&zf(v.alternate,v);break;default:Ea(f,v,E,b,h)}i=i.sibling}}function Zo(e,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=e,o=i,h=o.flags;switch(o.tag){case 22:Zo(a,o),h&2048&&Lf(o.alternate,o);break;case 24:Zo(a,o),h&2048&&zf(o.alternate,o);break;default:Zo(a,o)}i=i.sibling}}var Wo=8192;function Ta(e){if(e.subtreeFlags&Wo)for(e=e.child;e!==null;)fy(e),e=e.sibling}function fy(e){switch(e.tag){case 26:Ta(e),e.flags&Wo&&e.memoizedState!==null&&B1(Un,e.memoizedState,e.memoizedProps);break;case 5:Ta(e);break;case 3:case 4:var i=Un;Un=lc(e.stateNode.containerInfo),Ta(e),Un=i;break;case 22:e.memoizedState===null&&(i=e.alternate,i!==null&&i.memoizedState!==null?(i=Wo,Wo=16777216,Ta(e),Wo=i):Ta(e));break;default:Ta(e)}}function dy(e){var i=e.alternate;if(i!==null&&(e=i.child,e!==null)){i.child=null;do i=e.sibling,e.sibling=null,e=i;while(e!==null)}}function Jo(e){var i=e.deletions;if((e.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var o=i[a];Me=o,gy(o,e)}dy(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)my(e),e=e.sibling}function my(e){switch(e.tag){case 0:case 11:case 15:Jo(e),e.flags&2048&&ur(9,e,e.return);break;case 3:Jo(e);break;case 12:Jo(e);break;case 22:var i=e.stateNode;e.memoizedState!==null&&i._visibility&2&&(e.return===null||e.return.tag!==13)?(i._visibility&=-3,$u(e)):Jo(e);break;default:Jo(e)}}function $u(e){var i=e.deletions;if((e.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var o=i[a];Me=o,gy(o,e)}dy(e)}for(e=e.child;e!==null;){switch(i=e,i.tag){case 0:case 11:case 15:ur(8,i,i.return),$u(i);break;case 22:a=i.stateNode,a._visibility&2&&(a._visibility&=-3,$u(i));break;default:$u(i)}e=e.sibling}}function gy(e,i){for(;Me!==null;){var a=Me;switch(a.tag){case 0:case 11:case 15:ur(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var o=a.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:ko(a.memoizedState.cache)}if(o=a.child,o!==null)o.return=a,Me=o;else t:for(a=e;Me!==null;){o=Me;var h=o.sibling,f=o.return;if(ay(o),o===a){Me=null;break t}if(h!==null){h.return=f,Me=h;break t}Me=f}}}var n1={getCacheForType:function(e){var i=Qe(Re),a=i.data.get(e);return a===void 0&&(a=e(),i.data.set(e,a)),a}},i1=typeof WeakMap=="function"?WeakMap:Map,Gt=0,Wt=null,It=null,kt=0,Ft=0,mn=null,fr=!1,Aa=!1,Bf=!1,Li=0,ue=0,dr=0,Is=0,qf=0,Dn=0,Sa=0,tl=null,sn=null,jf=!1,Hf=0,Zu=1/0,Wu=null,mr=null,ze=0,gr=null,ba=null,wa=0,Gf=0,Ff=null,py=null,el=0,Qf=null;function gn(){if((Gt&2)!==0&&kt!==0)return kt&-kt;if(G.T!==null){var e=fa;return e!==0?e:Jf()}return $i()}function yy(){Dn===0&&(Dn=(kt&536870912)===0||Bt?uo():536870912);var e=Cn.current;return e!==null&&(e.flags|=32),Dn}function pn(e,i,a){(e===Wt&&(Ft===2||Ft===9)||e.cancelPendingCommit!==null)&&(Ra(e,0),pr(e,kt,Dn,!1)),pi(e,a),((Gt&2)===0||e!==Wt)&&(e===Wt&&((Gt&2)===0&&(Is|=a),ue===4&&pr(e,kt,Dn,!1)),si(e))}function _y(e,i,a){if((Gt&6)!==0)throw Error(s(327));var o=!a&&(i&124)===0&&(i&e.expiredLanes)===0||Jr(e,i),h=o?a1(e,i):Xf(e,i,!0),f=o;do{if(h===0){Aa&&!o&&pr(e,i,0,!1);break}else{if(a=e.current.alternate,f&&!r1(a)){h=Xf(e,i,!1),f=!1;continue}if(h===2){if(f=i,e.errorRecoveryDisabledLanes&f)var v=0;else v=e.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){i=v;t:{var E=e;h=tl;var b=E.current.memoizedState.isDehydrated;if(b&&(Ra(E,v).flags|=256),v=Xf(E,v,!1),v!==2){if(Bf&&!b){E.errorRecoveryDisabledLanes|=f,Is|=f,h=4;break t}f=sn,sn=h,f!==null&&(sn===null?sn=f:sn.push.apply(sn,f))}h=v}if(f=!1,h!==2)continue}}if(h===1){Ra(e,0),pr(e,i,0,!0);break}t:{switch(o=e,f=h,f){case 0:case 1:throw Error(s(345));case 4:if((i&4194048)!==i)break;case 6:pr(o,i,Dn,!fr);break t;case 2:sn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((i&62914560)===i&&(h=Hf+300-_n(),10<h)){if(pr(o,i,Dn,!fr),Hs(o,0,!0)!==0)break t;o.timeoutHandle=Ky(vy.bind(null,o,a,sn,Wu,jf,i,Dn,Is,Sa,fr,f,2,-0,0),h);break t}vy(o,a,sn,Wu,jf,i,Dn,Is,Sa,fr,f,0,-0,0)}}break}while(!0);si(e)}function vy(e,i,a,o,h,f,v,E,b,L,F,K,z,B){if(e.timeoutHandle=-1,K=i.subtreeFlags,(K&8192||(K&16785408)===16785408)&&(ll={stylesheets:null,count:0,unsuspend:z1},fy(i),K=q1(),K!==null)){e.cancelPendingCommit=K(Ry.bind(null,e,i,f,a,o,h,v,E,b,F,1,z,B)),pr(e,f,v,!L);return}Ry(e,i,f,a,o,h,v,E,b)}function r1(e){for(var i=e;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var o=0;o<a.length;o++){var h=a[o],f=h.getSnapshot;h=h.value;try{if(!cn(f(),h))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function pr(e,i,a,o){i&=~qf,i&=~Is,e.suspendedLanes|=i,e.pingedLanes&=~i,o&&(e.warmLanes|=i),o=e.expirationTimes;for(var h=i;0<h;){var f=31-Fe(h),v=1<<f;o[f]=-1,h&=~v}a!==0&&Gn(e,a,i)}function Ju(){return(Gt&6)===0?(nl(0),!1):!0}function Kf(){if(It!==null){if(Ft===0)var e=It.return;else e=It,Ni=Ts=null,cf(e),_a=null,Qo=0,e=It;for(;e!==null;)Wp(e.alternate,e),e=e.return;It=null}}function Ra(e,i){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,A1(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),Kf(),Wt=e,It=a=Ii(e.current,null),kt=i,Ft=0,mn=null,fr=!1,Aa=Jr(e,i),Bf=!1,Sa=Dn=qf=Is=dr=ue=0,sn=tl=null,jf=!1,(i&8)!==0&&(i|=i&32);var o=e.entangledLanes;if(o!==0)for(e=e.entanglements,o&=i;0<o;){var h=31-Fe(o),f=1<<h;i|=e[h],o&=~f}return Li=i,Tu(),a}function Ey(e,i){wt=null,G.H=Bu,i===Uo||i===Nu?(i=Ug(),Ft=3):i===xg?(i=Ug(),Ft=4):Ft=i===Lp?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,mn=i,It===null&&(ue=1,Fu(e,bn(i,e.current)))}function Ty(){var e=G.H;return G.H=Bu,e===null?Bu:e}function Ay(){var e=G.A;return G.A=n1,e}function Yf(){ue=4,fr||(kt&4194048)!==kt&&Cn.current!==null||(Aa=!0),(dr&134217727)===0&&(Is&134217727)===0||Wt===null||pr(Wt,kt,Dn,!1)}function Xf(e,i,a){var o=Gt;Gt|=2;var h=Ty(),f=Ay();(Wt!==e||kt!==i)&&(Wu=null,Ra(e,i)),i=!1;var v=ue;t:do try{if(Ft!==0&&It!==null){var E=It,b=mn;switch(Ft){case 8:Kf(),v=6;break t;case 3:case 2:case 9:case 6:Cn.current===null&&(i=!0);var L=Ft;if(Ft=0,mn=null,Ia(e,E,b,L),a&&Aa){v=0;break t}break;default:L=Ft,Ft=0,mn=null,Ia(e,E,b,L)}}s1(),v=ue;break}catch(F){Ey(e,F)}while(!0);return i&&e.shellSuspendCounter++,Ni=Ts=null,Gt=o,G.H=h,G.A=f,It===null&&(Wt=null,kt=0,Tu()),v}function s1(){for(;It!==null;)Sy(It)}function a1(e,i){var a=Gt;Gt|=2;var o=Ty(),h=Ay();Wt!==e||kt!==i?(Wu=null,Zu=_n()+500,Ra(e,i)):Aa=Jr(e,i);t:do try{if(Ft!==0&&It!==null){i=It;var f=mn;e:switch(Ft){case 1:Ft=0,mn=null,Ia(e,i,f,1);break;case 2:case 9:if(kg(f)){Ft=0,mn=null,by(i);break}i=function(){Ft!==2&&Ft!==9||Wt!==e||(Ft=7),si(e)},f.then(i,i);break t;case 3:Ft=7;break t;case 4:Ft=5;break t;case 7:kg(f)?(Ft=0,mn=null,by(i)):(Ft=0,mn=null,Ia(e,i,f,7));break;case 5:var v=null;switch(It.tag){case 26:v=It.memoizedState;case 5:case 27:var E=It;if(!v||s_(v)){Ft=0,mn=null;var b=E.sibling;if(b!==null)It=b;else{var L=E.return;L!==null?(It=L,tc(L)):It=null}break e}}Ft=0,mn=null,Ia(e,i,f,5);break;case 6:Ft=0,mn=null,Ia(e,i,f,6);break;case 8:Kf(),ue=6;break t;default:throw Error(s(462))}}o1();break}catch(F){Ey(e,F)}while(!0);return Ni=Ts=null,G.H=o,G.A=h,Gt=a,It!==null?0:(Wt=null,kt=0,Tu(),ue)}function o1(){for(;It!==null&&!so();)Sy(It)}function Sy(e){var i=$p(e.alternate,e,Li);e.memoizedProps=e.pendingProps,i===null?tc(e):It=i}function by(e){var i=e,a=i.alternate;switch(i.tag){case 15:case 0:i=Gp(a,i,i.pendingProps,i.type,void 0,kt);break;case 11:i=Gp(a,i,i.pendingProps,i.type.render,i.ref,kt);break;case 5:cf(i);default:Wp(a,i),i=It=wg(i,Li),i=$p(a,i,Li)}e.memoizedProps=e.pendingProps,i===null?tc(e):It=i}function Ia(e,i,a,o){Ni=Ts=null,cf(i),_a=null,Qo=0;var h=i.return;try{if($0(e,h,i,a,kt)){ue=1,Fu(e,bn(a,e.current)),It=null;return}}catch(f){if(h!==null)throw It=h,f;ue=1,Fu(e,bn(a,e.current)),It=null;return}i.flags&32768?(Bt||o===1?e=!0:Aa||(kt&536870912)!==0?e=!1:(fr=e=!0,(o===2||o===9||o===3||o===6)&&(o=Cn.current,o!==null&&o.tag===13&&(o.flags|=16384))),wy(i,e)):tc(i)}function tc(e){var i=e;do{if((i.flags&32768)!==0){wy(i,fr);return}e=i.return;var a=W0(i.alternate,i,Li);if(a!==null){It=a;return}if(i=i.sibling,i!==null){It=i;return}It=i=e}while(i!==null);ue===0&&(ue=5)}function wy(e,i){do{var a=J0(e.alternate,e);if(a!==null){a.flags&=32767,It=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(e=e.sibling,e!==null)){It=e;return}It=e=a}while(e!==null);ue=6,It=null}function Ry(e,i,a,o,h,f,v,E,b){e.cancelPendingCommit=null;do ec();while(ze!==0);if((Gt&6)!==0)throw Error(s(327));if(i!==null){if(i===e.current)throw Error(s(177));if(f=i.lanes|i.childLanes,f|=Lh,ho(e,a,f,v,E,b),e===Wt&&(It=Wt=null,kt=0),ba=i,gr=e,wa=a,Gf=f,Ff=h,py=o,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,h1(Xr,function(){return Oy(),null})):(e.callbackNode=null,e.callbackPriority=0),o=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||o){o=G.T,G.T=null,h=et.p,et.p=2,v=Gt,Gt|=4;try{t1(e,i,a)}finally{Gt=v,et.p=h,G.T=o}}ze=1,Iy(),Cy(),Dy()}}function Iy(){if(ze===1){ze=0;var e=gr,i=ba,a=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||a){a=G.T,G.T=null;var o=et.p;et.p=2;var h=Gt;Gt|=4;try{uy(i,e);var f=od,v=gg(e.containerInfo),E=f.focusedElem,b=f.selectionRange;if(v!==E&&E&&E.ownerDocument&&mg(E.ownerDocument.documentElement,E)){if(b!==null&&Mh(E)){var L=b.start,F=b.end;if(F===void 0&&(F=L),"selectionStart"in E)E.selectionStart=L,E.selectionEnd=Math.min(F,E.value.length);else{var K=E.ownerDocument||document,z=K&&K.defaultView||window;if(z.getSelection){var B=z.getSelection(),_t=E.textContent.length,mt=Math.min(b.start,_t),Xt=b.end===void 0?mt:Math.min(b.end,_t);!B.extend&&mt>Xt&&(v=Xt,Xt=mt,mt=v);var k=dg(E,mt),N=dg(E,Xt);if(k&&N&&(B.rangeCount!==1||B.anchorNode!==k.node||B.anchorOffset!==k.offset||B.focusNode!==N.node||B.focusOffset!==N.offset)){var U=K.createRange();U.setStart(k.node,k.offset),B.removeAllRanges(),mt>Xt?(B.addRange(U),B.extend(N.node,N.offset)):(U.setEnd(N.node,N.offset),B.addRange(U))}}}}for(K=[],B=E;B=B.parentNode;)B.nodeType===1&&K.push({element:B,left:B.scrollLeft,top:B.scrollTop});for(typeof E.focus=="function"&&E.focus(),E=0;E<K.length;E++){var Q=K[E];Q.element.scrollLeft=Q.left,Q.element.scrollTop=Q.top}}dc=!!ad,od=ad=null}finally{Gt=h,et.p=o,G.T=a}}e.current=i,ze=2}}function Cy(){if(ze===2){ze=0;var e=gr,i=ba,a=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||a){a=G.T,G.T=null;var o=et.p;et.p=2;var h=Gt;Gt|=4;try{sy(e,i.alternate,i)}finally{Gt=h,et.p=o,G.T=a}}ze=3}}function Dy(){if(ze===4||ze===3){ze=0,$l();var e=gr,i=ba,a=wa,o=py;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?ze=5:(ze=0,ba=gr=null,Ny(e,e.pendingLanes));var h=e.pendingLanes;if(h===0&&(mr=null),Gs(a),i=i.stateNode,Ht&&typeof Ht.onCommitFiberRoot=="function")try{Ht.onCommitFiberRoot(oe,i,void 0,(i.current.flags&128)===128)}catch{}if(o!==null){i=G.T,h=et.p,et.p=2,G.T=null;try{for(var f=e.onRecoverableError,v=0;v<o.length;v++){var E=o[v];f(E.value,{componentStack:E.stack})}}finally{G.T=i,et.p=h}}(wa&3)!==0&&ec(),si(e),h=e.pendingLanes,(a&4194090)!==0&&(h&42)!==0?e===Qf?el++:(el=0,Qf=e):el=0,nl(0)}}function Ny(e,i){(e.pooledCacheLanes&=i)===0&&(i=e.pooledCache,i!=null&&(e.pooledCache=null,ko(i)))}function ec(e){return Iy(),Cy(),Dy(),Oy()}function Oy(){if(ze!==5)return!1;var e=gr,i=Gf;Gf=0;var a=Gs(wa),o=G.T,h=et.p;try{et.p=32>a?32:a,G.T=null,a=Ff,Ff=null;var f=gr,v=wa;if(ze=0,ba=gr=null,wa=0,(Gt&6)!==0)throw Error(s(331));var E=Gt;if(Gt|=4,my(f.current),hy(f,f.current,v,a),Gt=E,nl(0,!1),Ht&&typeof Ht.onPostCommitFiberRoot=="function")try{Ht.onPostCommitFiberRoot(oe,f)}catch{}return!0}finally{et.p=h,G.T=o,Ny(e,i)}}function Vy(e,i,a){i=bn(a,i),i=bf(e.stateNode,i,2),e=sr(e,i,2),e!==null&&(pi(e,2),si(e))}function $t(e,i,a){if(e.tag===3)Vy(e,e,a);else for(;i!==null;){if(i.tag===3){Vy(i,e,a);break}else if(i.tag===1){var o=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(mr===null||!mr.has(o))){e=bn(a,e),a=Pp(2),o=sr(i,a,2),o!==null&&(Up(a,o,i,e),pi(o,2),si(o));break}}i=i.return}}function $f(e,i,a){var o=e.pingCache;if(o===null){o=e.pingCache=new i1;var h=new Set;o.set(i,h)}else h=o.get(i),h===void 0&&(h=new Set,o.set(i,h));h.has(a)||(Bf=!0,h.add(a),e=l1.bind(null,e,i,a),i.then(e,e))}function l1(e,i,a){var o=e.pingCache;o!==null&&o.delete(i),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,Wt===e&&(kt&a)===a&&(ue===4||ue===3&&(kt&62914560)===kt&&300>_n()-Hf?(Gt&2)===0&&Ra(e,0):qf|=a,Sa===kt&&(Sa=0)),si(e)}function My(e,i){i===0&&(i=co()),e=la(e,i),e!==null&&(pi(e,i),si(e))}function u1(e){var i=e.memoizedState,a=0;i!==null&&(a=i.retryLane),My(e,a)}function c1(e,i){var a=0;switch(e.tag){case 13:var o=e.stateNode,h=e.memoizedState;h!==null&&(a=h.retryLane);break;case 19:o=e.stateNode;break;case 22:o=e.stateNode._retryCache;break;default:throw Error(s(314))}o!==null&&o.delete(i),My(e,a)}function h1(e,i){return Kr(e,i)}var nc=null,Ca=null,Zf=!1,ic=!1,Wf=!1,Cs=0;function si(e){e!==Ca&&e.next===null&&(Ca===null?nc=Ca=e:Ca=Ca.next=e),ic=!0,Zf||(Zf=!0,d1())}function nl(e,i){if(!Wf&&ic){Wf=!0;do for(var a=!1,o=nc;o!==null;){if(e!==0){var h=o.pendingLanes;if(h===0)var f=0;else{var v=o.suspendedLanes,E=o.pingedLanes;f=(1<<31-Fe(42|e)+1)-1,f&=h&~(v&~E),f=f&201326741?f&201326741|1:f?f|2:0}f!==0&&(a=!0,Uy(o,f))}else f=kt,f=Hs(o,o===Wt?f:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(f&3)===0||Jr(o,f)||(a=!0,Uy(o,f));o=o.next}while(a);Wf=!1}}function f1(){xy()}function xy(){ic=Zf=!1;var e=0;Cs!==0&&(T1()&&(e=Cs),Cs=0);for(var i=_n(),a=null,o=nc;o!==null;){var h=o.next,f=ky(o,i);f===0?(o.next=null,a===null?nc=h:a.next=h,h===null&&(Ca=a)):(a=o,(e!==0||(f&3)!==0)&&(ic=!0)),o=h}nl(e)}function ky(e,i){for(var a=e.suspendedLanes,o=e.pingedLanes,h=e.expirationTimes,f=e.pendingLanes&-62914561;0<f;){var v=31-Fe(f),E=1<<v,b=h[v];b===-1?((E&a)===0||(E&o)!==0)&&(h[v]=lo(E,i)):b<=i&&(e.expiredLanes|=E),f&=~E}if(i=Wt,a=kt,a=Hs(e,e===i?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o=e.callbackNode,a===0||e===i&&(Ft===2||Ft===9)||e.cancelPendingCommit!==null)return o!==null&&o!==null&&Yr(o),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||Jr(e,a)){if(i=a&-a,i===e.callbackPriority)return i;switch(o!==null&&Yr(o),Gs(a)){case 2:case 8:a=qs;break;case 32:a=Xr;break;case 268435456:a=js;break;default:a=Xr}return o=Py.bind(null,e),a=Kr(a,o),e.callbackPriority=i,e.callbackNode=a,i}return o!==null&&o!==null&&Yr(o),e.callbackPriority=2,e.callbackNode=null,2}function Py(e,i){if(ze!==0&&ze!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(ec()&&e.callbackNode!==a)return null;var o=kt;return o=Hs(e,e===Wt?o:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o===0?null:(_y(e,o,i),ky(e,_n()),e.callbackNode!=null&&e.callbackNode===a?Py.bind(null,e):null)}function Uy(e,i){if(ec())return null;_y(e,i,!0)}function d1(){S1(function(){(Gt&6)!==0?Kr(ao,f1):xy()})}function Jf(){return Cs===0&&(Cs=uo()),Cs}function Ly(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:$s(""+e)}function zy(e,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,e.id&&a.setAttribute("form",e.id),i.parentNode.insertBefore(a,i),e=new FormData(e),a.parentNode.removeChild(a),e}function m1(e,i,a,o,h){if(i==="submit"&&a&&a.stateNode===h){var f=Ly((h[me]||null).action),v=o.submitter;v&&(i=(i=v[me]||null)?Ly(i.formAction):v.getAttribute("formAction"),i!==null&&(f=i,v=null));var E=new Zs("action","action",null,o,h);e.push({event:E,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(Cs!==0){var b=v?zy(h,v):new FormData(h);vf(a,{pending:!0,data:b,method:h.method,action:f},null,b)}}else typeof f=="function"&&(E.preventDefault(),b=v?zy(h,v):new FormData(h),vf(a,{pending:!0,data:b,method:h.method,action:f},f,b))},currentTarget:h}]})}}for(var td=0;td<Uh.length;td++){var ed=Uh[td],g1=ed.toLowerCase(),p1=ed[0].toUpperCase()+ed.slice(1);Pn(g1,"on"+p1)}Pn(_g,"onAnimationEnd"),Pn(vg,"onAnimationIteration"),Pn(Eg,"onAnimationStart"),Pn("dblclick","onDoubleClick"),Pn("focusin","onFocus"),Pn("focusout","onBlur"),Pn(M0,"onTransitionRun"),Pn(x0,"onTransitionStart"),Pn(k0,"onTransitionCancel"),Pn(Tg,"onTransitionEnd"),_i("onMouseEnter",["mouseout","mouseover"]),_i("onMouseLeave",["mouseout","mouseover"]),_i("onPointerEnter",["pointerout","pointerover"]),_i("onPointerLeave",["pointerout","pointerover"]),xn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),xn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),xn("onBeforeInput",["compositionend","keypress","textInput","paste"]),xn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),xn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),xn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var il="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),y1=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(il));function By(e,i){i=(i&4)!==0;for(var a=0;a<e.length;a++){var o=e[a],h=o.event;o=o.listeners;t:{var f=void 0;if(i)for(var v=o.length-1;0<=v;v--){var E=o[v],b=E.instance,L=E.currentTarget;if(E=E.listener,b!==f&&h.isPropagationStopped())break t;f=E,h.currentTarget=L;try{f(h)}catch(F){Gu(F)}h.currentTarget=null,f=b}else for(v=0;v<o.length;v++){if(E=o[v],b=E.instance,L=E.currentTarget,E=E.listener,b!==f&&h.isPropagationStopped())break t;f=E,h.currentTarget=L;try{f(h)}catch(F){Gu(F)}h.currentTarget=null,f=b}}}}function Ct(e,i){var a=i[mo];a===void 0&&(a=i[mo]=new Set);var o=e+"__bubble";a.has(o)||(qy(i,e,2,!1),a.add(o))}function nd(e,i,a){var o=0;i&&(o|=4),qy(a,e,o,i)}var rc="_reactListening"+Math.random().toString(36).slice(2);function id(e){if(!e[rc]){e[rc]=!0,go.forEach(function(a){a!=="selectionchange"&&(y1.has(a)||nd(a,!1,e),nd(a,!0,e))});var i=e.nodeType===9?e:e.ownerDocument;i===null||i[rc]||(i[rc]=!0,nd("selectionchange",!1,i))}}function qy(e,i,a,o){switch(h_(i)){case 2:var h=G1;break;case 8:h=F1;break;default:h=yd}a=h.bind(null,i,a,e),h=void 0,!An||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(h=!0),o?h!==void 0?e.addEventListener(i,a,{capture:!0,passive:h}):e.addEventListener(i,a,!0):h!==void 0?e.addEventListener(i,a,{passive:h}):e.addEventListener(i,a,!1)}function rd(e,i,a,o,h){var f=o;if((i&1)===0&&(i&2)===0&&o!==null)t:for(;;){if(o===null)return;var v=o.tag;if(v===3||v===4){var E=o.stateNode.containerInfo;if(E===h)break;if(v===4)for(v=o.return;v!==null;){var b=v.tag;if((b===3||b===4)&&v.stateNode.containerInfo===h)return;v=v.return}for(;E!==null;){if(v=yi(E),v===null)return;if(b=v.tag,b===5||b===6||b===26||b===27){o=f=v;continue t}E=E.parentNode}}o=o.return}au(function(){var L=f,F=Tn(a),K=[];t:{var z=Ag.get(e);if(z!==void 0){var B=Zs,_t=e;switch(e){case"keypress":if($n(a)===0)break t;case"keydown":case"keyup":B=ia;break;case"focusin":_t="focus",B=ta;break;case"focusout":_t="blur",B=ta;break;case"beforeblur":case"afterblur":B=ta;break;case"click":if(a.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":B=Sn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":B=Dh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":B=mu;break;case _g:case vg:case Eg:B=ea;break;case Tg:B=pu;break;case"scroll":case"scrollend":B=ou;break;case"wheel":B=ra;break;case"copy":case"cut":case"paste":B=na;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":B=Io;break;case"toggle":case"beforetoggle":B=_u}var mt=(i&4)!==0,Xt=!mt&&(e==="scroll"||e==="scrollend"),k=mt?z!==null?z+"Capture":null:z;mt=[];for(var N=L,U;N!==null;){var Q=N;if(U=Q.stateNode,Q=Q.tag,Q!==5&&Q!==26&&Q!==27||U===null||k===null||(Q=os(N,k),Q!=null&&mt.push(rl(N,Q,U))),Xt)break;N=N.return}0<mt.length&&(z=new B(z,_t,null,a,F),K.push({event:z,listeners:mt}))}}if((i&7)===0){t:{if(z=e==="mouseover"||e==="pointerover",B=e==="mouseout"||e==="pointerout",z&&a!==Ti&&(_t=a.relatedTarget||a.fromElement)&&(yi(_t)||_t[vn]))break t;if((B||z)&&(z=F.window===F?F:(z=F.ownerDocument)?z.defaultView||z.parentWindow:window,B?(_t=a.relatedTarget||a.toElement,B=L,_t=_t?yi(_t):null,_t!==null&&(Xt=c(_t),mt=_t.tag,_t!==Xt||mt!==5&&mt!==27&&mt!==6)&&(_t=null)):(B=null,_t=L),B!==_t)){if(mt=Sn,Q="onMouseLeave",k="onMouseEnter",N="mouse",(e==="pointerout"||e==="pointerover")&&(mt=Io,Q="onPointerLeave",k="onPointerEnter",N="pointer"),Xt=B==null?z:Qn(B),U=_t==null?z:Qn(_t),z=new mt(Q,N+"leave",B,a,F),z.target=Xt,z.relatedTarget=U,Q=null,yi(F)===L&&(mt=new mt(k,N+"enter",_t,a,F),mt.target=U,mt.relatedTarget=Xt,Q=mt),Xt=Q,B&&_t)e:{for(mt=B,k=_t,N=0,U=mt;U;U=Da(U))N++;for(U=0,Q=k;Q;Q=Da(Q))U++;for(;0<N-U;)mt=Da(mt),N--;for(;0<U-N;)k=Da(k),U--;for(;N--;){if(mt===k||k!==null&&mt===k.alternate)break e;mt=Da(mt),k=Da(k)}mt=null}else mt=null;B!==null&&jy(K,z,B,mt,!1),_t!==null&&Xt!==null&&jy(K,Xt,_t,mt,!0)}}t:{if(z=L?Qn(L):window,B=z.nodeName&&z.nodeName.toLowerCase(),B==="select"||B==="input"&&z.type==="file")var st=og;else if(we(z))if(lg)st=N0;else{st=C0;var Rt=I0}else B=z.nodeName,!B||B.toLowerCase()!=="input"||z.type!=="checkbox"&&z.type!=="radio"?L&&Eo(L.elementType)&&(st=og):st=D0;if(st&&(st=st(e,L))){Ri(K,st,a,F);break t}Rt&&Rt(e,z,L),e==="focusout"&&L&&z.type==="number"&&L.memoizedProps.value!=null&&tr(z,"number",z.value)}switch(Rt=L?Qn(L):window,e){case"focusin":(we(Rt)||Rt.contentEditable==="true")&&(sa=Rt,xh=L,No=null);break;case"focusout":No=xh=sa=null;break;case"mousedown":kh=!0;break;case"contextmenu":case"mouseup":case"dragend":kh=!1,pg(K,a,F);break;case"selectionchange":if(V0)break;case"keydown":case"keyup":pg(K,a,F)}var lt;if(Jn)t:{switch(e){case"compositionstart":var gt="onCompositionStart";break t;case"compositionend":gt="onCompositionEnd";break t;case"compositionupdate":gt="onCompositionUpdate";break t}gt=void 0}else Mt?j(e,a)&&(gt="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(gt="onCompositionStart");gt&&(y&&a.locale!=="ko"&&(Mt||gt!=="onCompositionStart"?gt==="onCompositionEnd"&&Mt&&(lt=Ao()):(Xn=F,er="value"in Xn?Xn.value:Xn.textContent,Mt=!0)),Rt=sc(L,gt),0<Rt.length&&(gt=new wo(gt,e,null,a,F),K.push({event:gt,listeners:Rt}),lt?gt.data=lt:(lt=tt(a),lt!==null&&(gt.data=lt)))),(lt=m?be(e,a):xt(e,a))&&(gt=sc(L,"onBeforeInput"),0<gt.length&&(Rt=new wo("onBeforeInput","beforeinput",null,a,F),K.push({event:Rt,listeners:gt}),Rt.data=lt)),m1(K,e,L,a,F)}By(K,i)})}function rl(e,i,a){return{instance:e,listener:i,currentTarget:a}}function sc(e,i){for(var a=i+"Capture",o=[];e!==null;){var h=e,f=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||f===null||(h=os(e,a),h!=null&&o.unshift(rl(e,h,f)),h=os(e,i),h!=null&&o.push(rl(e,h,f))),e.tag===3)return o;e=e.return}return[]}function Da(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function jy(e,i,a,o,h){for(var f=i._reactName,v=[];a!==null&&a!==o;){var E=a,b=E.alternate,L=E.stateNode;if(E=E.tag,b!==null&&b===o)break;E!==5&&E!==26&&E!==27||L===null||(b=L,h?(L=os(a,f),L!=null&&v.unshift(rl(a,L,b))):h||(L=os(a,f),L!=null&&v.push(rl(a,L,b)))),a=a.return}v.length!==0&&e.push({event:i,listeners:v})}var _1=/\r\n?/g,v1=/\u0000|\uFFFD/g;function Hy(e){return(typeof e=="string"?e:""+e).replace(_1,`
`).replace(v1,"")}function Gy(e,i){return i=Hy(i),Hy(e)===i}function ac(){}function Yt(e,i,a,o,h,f){switch(a){case"children":typeof o=="string"?i==="body"||i==="textarea"&&o===""||En(e,o):(typeof o=="number"||typeof o=="bigint")&&i!=="body"&&En(e,""+o);break;case"className":Kn(e,"class",o);break;case"tabIndex":Kn(e,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":Kn(e,a,o);break;case"style":vo(e,o,f);break;case"data":if(i!=="object"){Kn(e,"data",o);break}case"src":case"href":if(o===""&&(i!=="a"||a!=="href")){e.removeAttribute(a);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(a);break}o=$s(""+o),e.setAttribute(a,o);break;case"action":case"formAction":if(typeof o=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(a==="formAction"?(i!=="input"&&Yt(e,i,"name",h.name,h,null),Yt(e,i,"formEncType",h.formEncType,h,null),Yt(e,i,"formMethod",h.formMethod,h,null),Yt(e,i,"formTarget",h.formTarget,h,null)):(Yt(e,i,"encType",h.encType,h,null),Yt(e,i,"method",h.method,h,null),Yt(e,i,"target",h.target,h,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(a);break}o=$s(""+o),e.setAttribute(a,o);break;case"onClick":o!=null&&(e.onclick=ac);break;case"onScroll":o!=null&&Ct("scroll",e);break;case"onScrollEnd":o!=null&&Ct("scrollend",e);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(s(61));if(a=o.__html,a!=null){if(h.children!=null)throw Error(s(60));e.innerHTML=a}}break;case"multiple":e.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":e.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){e.removeAttribute("xlink:href");break}a=$s(""+o),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(a,""+o):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":o===!0?e.setAttribute(a,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(a,o):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?e.setAttribute(a,o):e.removeAttribute(a);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?e.removeAttribute(a):e.setAttribute(a,o);break;case"popover":Ct("beforetoggle",e),Ct("toggle",e),Ji(e,"popover",o);break;case"xlinkActuate":Pe(e,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":Pe(e,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":Pe(e,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":Pe(e,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":Pe(e,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":Pe(e,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":Pe(e,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":Pe(e,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":Pe(e,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":Ji(e,"is",o);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Ih.get(a)||a,Ji(e,a,o))}}function sd(e,i,a,o,h,f){switch(a){case"style":vo(e,o,f);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(s(61));if(a=o.__html,a!=null){if(h.children!=null)throw Error(s(60));e.innerHTML=a}}break;case"children":typeof o=="string"?En(e,o):(typeof o=="number"||typeof o=="bigint")&&En(e,""+o);break;case"onScroll":o!=null&&Ct("scroll",e);break;case"onScrollEnd":o!=null&&Ct("scrollend",e);break;case"onClick":o!=null&&(e.onclick=ac);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Fs.hasOwnProperty(a))t:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),i=a.slice(2,h?a.length-7:void 0),f=e[me]||null,f=f!=null?f[a]:null,typeof f=="function"&&e.removeEventListener(i,f,h),typeof o=="function")){typeof f!="function"&&f!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(i,o,h);break t}a in e?e[a]=o:o===!0?e.setAttribute(a,""):Ji(e,a,o)}}}function Be(e,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ct("error",e),Ct("load",e);var o=!1,h=!1,f;for(f in a)if(a.hasOwnProperty(f)){var v=a[f];if(v!=null)switch(f){case"src":o=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:Yt(e,i,f,v,a,null)}}h&&Yt(e,i,"srcSet",a.srcSet,a,null),o&&Yt(e,i,"src",a.src,a,null);return;case"input":Ct("invalid",e);var E=f=v=h=null,b=null,L=null;for(o in a)if(a.hasOwnProperty(o)){var F=a[o];if(F!=null)switch(o){case"name":h=F;break;case"type":v=F;break;case"checked":b=F;break;case"defaultChecked":L=F;break;case"value":f=F;break;case"defaultValue":E=F;break;case"children":case"dangerouslySetInnerHTML":if(F!=null)throw Error(s(137,i));break;default:Yt(e,i,o,F,a,null)}}rs(e,f,E,b,L,v,h,!1),Xs(e);return;case"select":Ct("invalid",e),o=v=f=null;for(h in a)if(a.hasOwnProperty(h)&&(E=a[h],E!=null))switch(h){case"value":f=E;break;case"defaultValue":v=E;break;case"multiple":o=E;default:Yt(e,i,h,E,a,null)}i=f,a=v,e.multiple=!!o,i!=null?Ei(e,!!o,i,!1):a!=null&&Ei(e,!!o,a,!0);return;case"textarea":Ct("invalid",e),f=h=o=null;for(v in a)if(a.hasOwnProperty(v)&&(E=a[v],E!=null))switch(v){case"value":o=E;break;case"defaultValue":h=E;break;case"children":f=E;break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(s(91));break;default:Yt(e,i,v,E,a,null)}ss(e,o,h,f),Xs(e);return;case"option":for(b in a)if(a.hasOwnProperty(b)&&(o=a[b],o!=null))switch(b){case"selected":e.selected=o&&typeof o!="function"&&typeof o!="symbol";break;default:Yt(e,i,b,o,a,null)}return;case"dialog":Ct("beforetoggle",e),Ct("toggle",e),Ct("cancel",e),Ct("close",e);break;case"iframe":case"object":Ct("load",e);break;case"video":case"audio":for(o=0;o<il.length;o++)Ct(il[o],e);break;case"image":Ct("error",e),Ct("load",e);break;case"details":Ct("toggle",e);break;case"embed":case"source":case"link":Ct("error",e),Ct("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(L in a)if(a.hasOwnProperty(L)&&(o=a[L],o!=null))switch(L){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:Yt(e,i,L,o,a,null)}return;default:if(Eo(i)){for(F in a)a.hasOwnProperty(F)&&(o=a[F],o!==void 0&&sd(e,i,F,o,a,void 0));return}}for(E in a)a.hasOwnProperty(E)&&(o=a[E],o!=null&&Yt(e,i,E,o,a,null))}function E1(e,i,a,o){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,f=null,v=null,E=null,b=null,L=null,F=null;for(B in a){var K=a[B];if(a.hasOwnProperty(B)&&K!=null)switch(B){case"checked":break;case"value":break;case"defaultValue":b=K;default:o.hasOwnProperty(B)||Yt(e,i,B,null,o,K)}}for(var z in o){var B=o[z];if(K=a[z],o.hasOwnProperty(z)&&(B!=null||K!=null))switch(z){case"type":f=B;break;case"name":h=B;break;case"checked":L=B;break;case"defaultChecked":F=B;break;case"value":v=B;break;case"defaultValue":E=B;break;case"children":case"dangerouslySetInnerHTML":if(B!=null)throw Error(s(137,i));break;default:B!==K&&Yt(e,i,z,B,o,K)}}un(e,v,E,b,L,F,f,h);return;case"select":B=v=E=z=null;for(f in a)if(b=a[f],a.hasOwnProperty(f)&&b!=null)switch(f){case"value":break;case"multiple":B=b;default:o.hasOwnProperty(f)||Yt(e,i,f,null,o,b)}for(h in o)if(f=o[h],b=a[h],o.hasOwnProperty(h)&&(f!=null||b!=null))switch(h){case"value":z=f;break;case"defaultValue":E=f;break;case"multiple":v=f;default:f!==b&&Yt(e,i,h,f,o,b)}i=E,a=v,o=B,z!=null?Ei(e,!!a,z,!1):!!o!=!!a&&(i!=null?Ei(e,!!a,i,!0):Ei(e,!!a,a?[]:"",!1));return;case"textarea":B=z=null;for(E in a)if(h=a[E],a.hasOwnProperty(E)&&h!=null&&!o.hasOwnProperty(E))switch(E){case"value":break;case"children":break;default:Yt(e,i,E,null,o,h)}for(v in o)if(h=o[v],f=a[v],o.hasOwnProperty(v)&&(h!=null||f!=null))switch(v){case"value":z=h;break;case"defaultValue":B=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(s(91));break;default:h!==f&&Yt(e,i,v,h,o,f)}Qt(e,z,B);return;case"option":for(var _t in a)if(z=a[_t],a.hasOwnProperty(_t)&&z!=null&&!o.hasOwnProperty(_t))switch(_t){case"selected":e.selected=!1;break;default:Yt(e,i,_t,null,o,z)}for(b in o)if(z=o[b],B=a[b],o.hasOwnProperty(b)&&z!==B&&(z!=null||B!=null))switch(b){case"selected":e.selected=z&&typeof z!="function"&&typeof z!="symbol";break;default:Yt(e,i,b,z,o,B)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var mt in a)z=a[mt],a.hasOwnProperty(mt)&&z!=null&&!o.hasOwnProperty(mt)&&Yt(e,i,mt,null,o,z);for(L in o)if(z=o[L],B=a[L],o.hasOwnProperty(L)&&z!==B&&(z!=null||B!=null))switch(L){case"children":case"dangerouslySetInnerHTML":if(z!=null)throw Error(s(137,i));break;default:Yt(e,i,L,z,o,B)}return;default:if(Eo(i)){for(var Xt in a)z=a[Xt],a.hasOwnProperty(Xt)&&z!==void 0&&!o.hasOwnProperty(Xt)&&sd(e,i,Xt,void 0,o,z);for(F in o)z=o[F],B=a[F],!o.hasOwnProperty(F)||z===B||z===void 0&&B===void 0||sd(e,i,F,z,o,B);return}}for(var k in a)z=a[k],a.hasOwnProperty(k)&&z!=null&&!o.hasOwnProperty(k)&&Yt(e,i,k,null,o,z);for(K in o)z=o[K],B=a[K],!o.hasOwnProperty(K)||z===B||z==null&&B==null||Yt(e,i,K,z,o,B)}var ad=null,od=null;function oc(e){return e.nodeType===9?e:e.ownerDocument}function Fy(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Qy(e,i){if(e===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&i==="foreignObject"?0:e}function ld(e,i){return e==="textarea"||e==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var ud=null;function T1(){var e=window.event;return e&&e.type==="popstate"?e===ud?!1:(ud=e,!0):(ud=null,!1)}var Ky=typeof setTimeout=="function"?setTimeout:void 0,A1=typeof clearTimeout=="function"?clearTimeout:void 0,Yy=typeof Promise=="function"?Promise:void 0,S1=typeof queueMicrotask=="function"?queueMicrotask:typeof Yy<"u"?function(e){return Yy.resolve(null).then(e).catch(b1)}:Ky;function b1(e){setTimeout(function(){throw e})}function yr(e){return e==="head"}function Xy(e,i){var a=i,o=0,h=0;do{var f=a.nextSibling;if(e.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"){if(0<o&&8>o){a=o;var v=e.ownerDocument;if(a&1&&sl(v.documentElement),a&2&&sl(v.body),a&4)for(a=v.head,sl(a),v=a.firstChild;v;){var E=v.nextSibling,b=v.nodeName;v[ts]||b==="SCRIPT"||b==="STYLE"||b==="LINK"&&v.rel.toLowerCase()==="stylesheet"||a.removeChild(v),v=E}}if(h===0){e.removeChild(f),dl(i);return}h--}else a==="$"||a==="$?"||a==="$!"?h++:o=a.charCodeAt(0)-48;else o=0;a=f}while(a);dl(i)}function cd(e){var i=e.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":cd(a),Wi(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function w1(e,i,a,o){for(;e.nodeType===1;){var h=a;if(e.nodeName.toLowerCase()!==i.toLowerCase()){if(!o&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(o){if(!e[ts])switch(i){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(f=e.getAttribute("rel"),f==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(f!==h.rel||e.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||e.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||e.getAttribute("title")!==(h.title==null?null:h.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(f=e.getAttribute("src"),(f!==(h.src==null?null:h.src)||e.getAttribute("type")!==(h.type==null?null:h.type)||e.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&f&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(i==="input"&&e.type==="hidden"){var f=h.name==null?null:""+h.name;if(h.type==="hidden"&&e.getAttribute("name")===f)return e}else return e;if(e=Ln(e.nextSibling),e===null)break}return null}function R1(e,i,a){if(i==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=Ln(e.nextSibling),e===null))return null;return e}function hd(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function I1(e,i){var a=e.ownerDocument;if(e.data!=="$?"||a.readyState==="complete")i();else{var o=function(){i(),a.removeEventListener("DOMContentLoaded",o)};a.addEventListener("DOMContentLoaded",o),e._reactRetry=o}}function Ln(e){for(;e!=null;e=e.nextSibling){var i=e.nodeType;if(i===1||i===3)break;if(i===8){if(i=e.data,i==="$"||i==="$!"||i==="$?"||i==="F!"||i==="F")break;if(i==="/$")return null}}return e}var fd=null;function $y(e){e=e.previousSibling;for(var i=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"){if(i===0)return e;i--}else a==="/$"&&i++}e=e.previousSibling}return null}function Zy(e,i,a){switch(i=oc(a),e){case"html":if(e=i.documentElement,!e)throw Error(s(452));return e;case"head":if(e=i.head,!e)throw Error(s(453));return e;case"body":if(e=i.body,!e)throw Error(s(454));return e;default:throw Error(s(451))}}function sl(e){for(var i=e.attributes;i.length;)e.removeAttributeNode(i[0]);Wi(e)}var Nn=new Map,Wy=new Set;function lc(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var zi=et.d;et.d={f:C1,r:D1,D:N1,C:O1,L:V1,m:M1,X:k1,S:x1,M:P1};function C1(){var e=zi.f(),i=Ju();return e||i}function D1(e){var i=Fn(e);i!==null&&i.tag===5&&i.type==="form"?_p(i):zi.r(e)}var Na=typeof document>"u"?null:document;function Jy(e,i,a){var o=Na;if(o&&typeof i=="string"&&i){var h=ge(i);h='link[rel="'+e+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),Wy.has(h)||(Wy.add(h),e={rel:e,crossOrigin:a,href:i},o.querySelector(h)===null&&(i=o.createElement("link"),Be(i,"link",e),ce(i),o.head.appendChild(i)))}}function N1(e){zi.D(e),Jy("dns-prefetch",e,null)}function O1(e,i){zi.C(e,i),Jy("preconnect",e,i)}function V1(e,i,a){zi.L(e,i,a);var o=Na;if(o&&e&&i){var h='link[rel="preload"][as="'+ge(i)+'"]';i==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+ge(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+ge(a.imageSizes)+'"]')):h+='[href="'+ge(e)+'"]';var f=h;switch(i){case"style":f=Oa(e);break;case"script":f=Va(e)}Nn.has(f)||(e=A({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:e,as:i},a),Nn.set(f,e),o.querySelector(h)!==null||i==="style"&&o.querySelector(al(f))||i==="script"&&o.querySelector(ol(f))||(i=o.createElement("link"),Be(i,"link",e),ce(i),o.head.appendChild(i)))}}function M1(e,i){zi.m(e,i);var a=Na;if(a&&e){var o=i&&typeof i.as=="string"?i.as:"script",h='link[rel="modulepreload"][as="'+ge(o)+'"][href="'+ge(e)+'"]',f=h;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=Va(e)}if(!Nn.has(f)&&(e=A({rel:"modulepreload",href:e},i),Nn.set(f,e),a.querySelector(h)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(ol(f)))return}o=a.createElement("link"),Be(o,"link",e),ce(o),a.head.appendChild(o)}}}function x1(e,i,a){zi.S(e,i,a);var o=Na;if(o&&e){var h=We(o).hoistableStyles,f=Oa(e);i=i||"default";var v=h.get(f);if(!v){var E={loading:0,preload:null};if(v=o.querySelector(al(f)))E.loading=5;else{e=A({rel:"stylesheet",href:e,"data-precedence":i},a),(a=Nn.get(f))&&dd(e,a);var b=v=o.createElement("link");ce(b),Be(b,"link",e),b._p=new Promise(function(L,F){b.onload=L,b.onerror=F}),b.addEventListener("load",function(){E.loading|=1}),b.addEventListener("error",function(){E.loading|=2}),E.loading|=4,uc(v,i,o)}v={type:"stylesheet",instance:v,count:1,state:E},h.set(f,v)}}}function k1(e,i){zi.X(e,i);var a=Na;if(a&&e){var o=We(a).hoistableScripts,h=Va(e),f=o.get(h);f||(f=a.querySelector(ol(h)),f||(e=A({src:e,async:!0},i),(i=Nn.get(h))&&md(e,i),f=a.createElement("script"),ce(f),Be(f,"link",e),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},o.set(h,f))}}function P1(e,i){zi.M(e,i);var a=Na;if(a&&e){var o=We(a).hoistableScripts,h=Va(e),f=o.get(h);f||(f=a.querySelector(ol(h)),f||(e=A({src:e,async:!0,type:"module"},i),(i=Nn.get(h))&&md(e,i),f=a.createElement("script"),ce(f),Be(f,"link",e),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},o.set(h,f))}}function t_(e,i,a,o){var h=(h=ft.current)?lc(h):null;if(!h)throw Error(s(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=Oa(a.href),a=We(h).hoistableStyles,o=a.get(i),o||(o={type:"style",instance:null,count:0,state:null},a.set(i,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=Oa(a.href);var f=We(h).hoistableStyles,v=f.get(e);if(v||(h=h.ownerDocument||h,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(e,v),(f=h.querySelector(al(e)))&&!f._p&&(v.instance=f,v.state.loading=5),Nn.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Nn.set(e,a),f||U1(h,e,a,v.state))),i&&o===null)throw Error(s(528,""));return v}if(i&&o!==null)throw Error(s(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=Va(a),a=We(h).hoistableScripts,o=a.get(i),o||(o={type:"script",instance:null,count:0,state:null},a.set(i,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,e))}}function Oa(e){return'href="'+ge(e)+'"'}function al(e){return'link[rel="stylesheet"]['+e+"]"}function e_(e){return A({},e,{"data-precedence":e.precedence,precedence:null})}function U1(e,i,a,o){e.querySelector('link[rel="preload"][as="style"]['+i+"]")?o.loading=1:(i=e.createElement("link"),o.preload=i,i.addEventListener("load",function(){return o.loading|=1}),i.addEventListener("error",function(){return o.loading|=2}),Be(i,"link",a),ce(i),e.head.appendChild(i))}function Va(e){return'[src="'+ge(e)+'"]'}function ol(e){return"script[async]"+e}function n_(e,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var o=e.querySelector('style[data-href~="'+ge(a.href)+'"]');if(o)return i.instance=o,ce(o),o;var h=A({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return o=(e.ownerDocument||e).createElement("style"),ce(o),Be(o,"style",h),uc(o,a.precedence,e),i.instance=o;case"stylesheet":h=Oa(a.href);var f=e.querySelector(al(h));if(f)return i.state.loading|=4,i.instance=f,ce(f),f;o=e_(a),(h=Nn.get(h))&&dd(o,h),f=(e.ownerDocument||e).createElement("link"),ce(f);var v=f;return v._p=new Promise(function(E,b){v.onload=E,v.onerror=b}),Be(f,"link",o),i.state.loading|=4,uc(f,a.precedence,e),i.instance=f;case"script":return f=Va(a.src),(h=e.querySelector(ol(f)))?(i.instance=h,ce(h),h):(o=a,(h=Nn.get(f))&&(o=A({},a),md(o,h)),e=e.ownerDocument||e,h=e.createElement("script"),ce(h),Be(h,"link",o),e.head.appendChild(h),i.instance=h);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(o=i.instance,i.state.loading|=4,uc(o,a.precedence,e));return i.instance}function uc(e,i,a){for(var o=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=o.length?o[o.length-1]:null,f=h,v=0;v<o.length;v++){var E=o[v];if(E.dataset.precedence===i)f=E;else if(f!==h)break}f?f.parentNode.insertBefore(e,f.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(e,i.firstChild))}function dd(e,i){e.crossOrigin==null&&(e.crossOrigin=i.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=i.referrerPolicy),e.title==null&&(e.title=i.title)}function md(e,i){e.crossOrigin==null&&(e.crossOrigin=i.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=i.referrerPolicy),e.integrity==null&&(e.integrity=i.integrity)}var cc=null;function i_(e,i,a){if(cc===null){var o=new Map,h=cc=new Map;h.set(a,o)}else h=cc,o=h.get(a),o||(o=new Map,h.set(a,o));if(o.has(e))return o;for(o.set(e,null),a=a.getElementsByTagName(e),h=0;h<a.length;h++){var f=a[h];if(!(f[ts]||f[Se]||e==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var v=f.getAttribute(i)||"";v=e+v;var E=o.get(v);E?E.push(f):o.set(v,[f])}}return o}function r_(e,i,a){e=e.ownerDocument||e,e.head.insertBefore(a,i==="title"?e.querySelector("head > title"):null)}function L1(e,i,a){if(a===1||i.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return e=i.disabled,typeof i.precedence=="string"&&e==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function s_(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}var ll=null;function z1(){}function B1(e,i,a){if(ll===null)throw Error(s(475));var o=ll;if(i.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var h=Oa(a.href),f=e.querySelector(al(h));if(f){e=f._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(o.count++,o=hc.bind(o),e.then(o,o)),i.state.loading|=4,i.instance=f,ce(f);return}f=e.ownerDocument||e,a=e_(a),(h=Nn.get(h))&&dd(a,h),f=f.createElement("link"),ce(f);var v=f;v._p=new Promise(function(E,b){v.onload=E,v.onerror=b}),Be(f,"link",a),i.instance=f}o.stylesheets===null&&(o.stylesheets=new Map),o.stylesheets.set(i,e),(e=i.state.preload)&&(i.state.loading&3)===0&&(o.count++,i=hc.bind(o),e.addEventListener("load",i),e.addEventListener("error",i))}}function q1(){if(ll===null)throw Error(s(475));var e=ll;return e.stylesheets&&e.count===0&&gd(e,e.stylesheets),0<e.count?function(i){var a=setTimeout(function(){if(e.stylesheets&&gd(e,e.stylesheets),e.unsuspend){var o=e.unsuspend;e.unsuspend=null,o()}},6e4);return e.unsuspend=i,function(){e.unsuspend=null,clearTimeout(a)}}:null}function hc(){if(this.count--,this.count===0){if(this.stylesheets)gd(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var fc=null;function gd(e,i){e.stylesheets=null,e.unsuspend!==null&&(e.count++,fc=new Map,i.forEach(j1,e),fc=null,hc.call(e))}function j1(e,i){if(!(i.state.loading&4)){var a=fc.get(e);if(a)var o=a.get(null);else{a=new Map,fc.set(e,a);for(var h=e.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<h.length;f++){var v=h[f];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(a.set(v.dataset.precedence,v),o=v)}o&&a.set(null,o)}h=i.instance,v=h.getAttribute("data-precedence"),f=a.get(v)||o,f===o&&a.set(null,h),a.set(v,h),this.count++,o=hc.bind(this),h.addEventListener("load",o),h.addEventListener("error",o),f?f.parentNode.insertBefore(h,f.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(h,e.firstChild)),i.state.loading|=4}}var ul={$$typeof:ht,Provider:null,Consumer:null,_currentValue:ot,_currentValue2:ot,_threadCount:0};function H1(e,i,a,o,h,f,v,E){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=gi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gi(0),this.hiddenUpdates=gi(null),this.identifierPrefix=o,this.onUncaughtError=h,this.onCaughtError=f,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=E,this.incompleteTransitions=new Map}function a_(e,i,a,o,h,f,v,E,b,L,F,K){return e=new H1(e,i,a,v,E,b,L,K),i=1,f===!0&&(i|=24),f=hn(3,null,null,i),e.current=f,f.stateNode=e,i=Xh(),i.refCount++,e.pooledCache=i,i.refCount++,f.memoizedState={element:o,isDehydrated:a,cache:i},Jh(f),e}function o_(e){return e?(e=ua,e):ua}function l_(e,i,a,o,h,f){h=o_(h),o.context===null?o.context=h:o.pendingContext=h,o=rr(i),o.payload={element:a},f=f===void 0?null:f,f!==null&&(o.callback=f),a=sr(e,o,i),a!==null&&(pn(a,e,i),zo(a,e,i))}function u_(e,i){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<i?a:i}}function pd(e,i){u_(e,i),(e=e.alternate)&&u_(e,i)}function c_(e){if(e.tag===13){var i=la(e,67108864);i!==null&&pn(i,e,67108864),pd(e,67108864)}}var dc=!0;function G1(e,i,a,o){var h=G.T;G.T=null;var f=et.p;try{et.p=2,yd(e,i,a,o)}finally{et.p=f,G.T=h}}function F1(e,i,a,o){var h=G.T;G.T=null;var f=et.p;try{et.p=8,yd(e,i,a,o)}finally{et.p=f,G.T=h}}function yd(e,i,a,o){if(dc){var h=_d(o);if(h===null)rd(e,i,o,mc,a),f_(e,o);else if(K1(h,e,i,a,o))o.stopPropagation();else if(f_(e,o),i&4&&-1<Q1.indexOf(e)){for(;h!==null;){var f=Fn(h);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var v=Mn(f.pendingLanes);if(v!==0){var E=f;for(E.pendingLanes|=2,E.entangledLanes|=2;v;){var b=1<<31-Fe(v);E.entanglements[1]|=b,v&=~b}si(f),(Gt&6)===0&&(Zu=_n()+500,nl(0))}}break;case 13:E=la(f,2),E!==null&&pn(E,f,2),Ju(),pd(f,2)}if(f=_d(o),f===null&&rd(e,i,o,mc,a),f===h)break;h=f}h!==null&&o.stopPropagation()}else rd(e,i,o,null,a)}}function _d(e){return e=Tn(e),vd(e)}var mc=null;function vd(e){if(mc=null,e=yi(e),e!==null){var i=c(e);if(i===null)e=null;else{var a=i.tag;if(a===13){if(e=d(i),e!==null)return e;e=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;e=null}else i!==e&&(e=null)}}return mc=e,null}function h_(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Th()){case ao:return 2;case qs:return 8;case Xr:case Ah:return 32;case js:return 268435456;default:return 32}default:return 32}}var Ed=!1,_r=null,vr=null,Er=null,cl=new Map,hl=new Map,Tr=[],Q1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function f_(e,i){switch(e){case"focusin":case"focusout":_r=null;break;case"dragenter":case"dragleave":vr=null;break;case"mouseover":case"mouseout":Er=null;break;case"pointerover":case"pointerout":cl.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":hl.delete(i.pointerId)}}function fl(e,i,a,o,h,f){return e===null||e.nativeEvent!==f?(e={blockedOn:i,domEventName:a,eventSystemFlags:o,nativeEvent:f,targetContainers:[h]},i!==null&&(i=Fn(i),i!==null&&c_(i)),e):(e.eventSystemFlags|=o,i=e.targetContainers,h!==null&&i.indexOf(h)===-1&&i.push(h),e)}function K1(e,i,a,o,h){switch(i){case"focusin":return _r=fl(_r,e,i,a,o,h),!0;case"dragenter":return vr=fl(vr,e,i,a,o,h),!0;case"mouseover":return Er=fl(Er,e,i,a,o,h),!0;case"pointerover":var f=h.pointerId;return cl.set(f,fl(cl.get(f)||null,e,i,a,o,h)),!0;case"gotpointercapture":return f=h.pointerId,hl.set(f,fl(hl.get(f)||null,e,i,a,o,h)),!0}return!1}function d_(e){var i=yi(e.target);if(i!==null){var a=c(i);if(a!==null){if(i=a.tag,i===13){if(i=d(a),i!==null){e.blockedOn=i,Jl(e.priority,function(){if(a.tag===13){var o=gn();o=Xi(o);var h=la(a,o);h!==null&&pn(h,a,o),pd(a,o)}});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function gc(e){if(e.blockedOn!==null)return!1;for(var i=e.targetContainers;0<i.length;){var a=_d(e.nativeEvent);if(a===null){a=e.nativeEvent;var o=new a.constructor(a.type,a);Ti=o,a.target.dispatchEvent(o),Ti=null}else return i=Fn(a),i!==null&&c_(i),e.blockedOn=a,!1;i.shift()}return!0}function m_(e,i,a){gc(e)&&a.delete(i)}function Y1(){Ed=!1,_r!==null&&gc(_r)&&(_r=null),vr!==null&&gc(vr)&&(vr=null),Er!==null&&gc(Er)&&(Er=null),cl.forEach(m_),hl.forEach(m_)}function pc(e,i){e.blockedOn===i&&(e.blockedOn=null,Ed||(Ed=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Y1)))}var yc=null;function g_(e){yc!==e&&(yc=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){yc===e&&(yc=null);for(var i=0;i<e.length;i+=3){var a=e[i],o=e[i+1],h=e[i+2];if(typeof o!="function"){if(vd(o||a)===null)continue;break}var f=Fn(a);f!==null&&(e.splice(i,3),i-=3,vf(f,{pending:!0,data:h,method:a.method,action:o},o,h))}}))}function dl(e){function i(b){return pc(b,e)}_r!==null&&pc(_r,e),vr!==null&&pc(vr,e),Er!==null&&pc(Er,e),cl.forEach(i),hl.forEach(i);for(var a=0;a<Tr.length;a++){var o=Tr[a];o.blockedOn===e&&(o.blockedOn=null)}for(;0<Tr.length&&(a=Tr[0],a.blockedOn===null);)d_(a),a.blockedOn===null&&Tr.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(o=0;o<a.length;o+=3){var h=a[o],f=a[o+1],v=h[me]||null;if(typeof f=="function")v||g_(a);else if(v){var E=null;if(f&&f.hasAttribute("formAction")){if(h=f,v=f[me]||null)E=v.formAction;else if(vd(h)!==null)continue}else E=v.action;typeof E=="function"?a[o+1]=E:(a.splice(o,3),o-=3),g_(a)}}}function Td(e){this._internalRoot=e}_c.prototype.render=Td.prototype.render=function(e){var i=this._internalRoot;if(i===null)throw Error(s(409));var a=i.current,o=gn();l_(a,o,e,i,null,null)},_c.prototype.unmount=Td.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var i=e.containerInfo;l_(e.current,2,null,e,null,null),Ju(),i[vn]=null}};function _c(e){this._internalRoot=e}_c.prototype.unstable_scheduleHydration=function(e){if(e){var i=$i();e={blockedOn:null,target:e,priority:i};for(var a=0;a<Tr.length&&i!==0&&i<Tr[a].priority;a++);Tr.splice(a,0,e),a===0&&d_(e)}};var p_=t.version;if(p_!=="19.1.1")throw Error(s(527,p_,"19.1.1"));et.findDOMNode=function(e){var i=e._reactInternals;if(i===void 0)throw typeof e.render=="function"?Error(s(188)):(e=Object.keys(e).join(","),Error(s(268,e)));return e=p(i),e=e!==null?_(e):null,e=e===null?null:e.stateNode,e};var X1={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:G,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vc.isDisabled&&vc.supportsFiber)try{oe=vc.inject(X1),Ht=vc}catch{}}return gl.createRoot=function(e,i){if(!l(e))throw Error(s(299));var a=!1,o="",h=Vp,f=Mp,v=xp,E=null;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(o=i.identifierPrefix),i.onUncaughtError!==void 0&&(h=i.onUncaughtError),i.onCaughtError!==void 0&&(f=i.onCaughtError),i.onRecoverableError!==void 0&&(v=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(E=i.unstable_transitionCallbacks)),i=a_(e,1,!1,null,null,a,o,h,f,v,E,null),e[vn]=i.current,id(e),new Td(i)},gl.hydrateRoot=function(e,i,a){if(!l(e))throw Error(s(299));var o=!1,h="",f=Vp,v=Mp,E=xp,b=null,L=null;return a!=null&&(a.unstable_strictMode===!0&&(o=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(f=a.onUncaughtError),a.onCaughtError!==void 0&&(v=a.onCaughtError),a.onRecoverableError!==void 0&&(E=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(b=a.unstable_transitionCallbacks),a.formState!==void 0&&(L=a.formState)),i=a_(e,1,!0,i,a??null,o,h,f,v,E,b,L),i.context=o_(null),a=i.current,o=gn(),o=Xi(o),h=rr(o),h.callback=null,sr(a,h,o),a=o,i.current.lanes=a,pi(i,a),si(i),e[vn]=i.current,id(e),new _c(i)},gl.version="19.1.1",gl}var R_;function sA(){if(R_)return bd.exports;R_=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}return r(),bd.exports=rA(),bd.exports}var aA=sA();const oA=()=>{};var I_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sE=function(r){const t=[];let n=0;for(let s=0;s<r.length;s++){let l=r.charCodeAt(s);l<128?t[n++]=l:l<2048?(t[n++]=l>>6|192,t[n++]=l&63|128):(l&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(l=65536+((l&1023)<<10)+(r.charCodeAt(++s)&1023),t[n++]=l>>18|240,t[n++]=l>>12&63|128,t[n++]=l>>6&63|128,t[n++]=l&63|128):(t[n++]=l>>12|224,t[n++]=l>>6&63|128,t[n++]=l&63|128)}return t},lA=function(r){const t=[];let n=0,s=0;for(;n<r.length;){const l=r[n++];if(l<128)t[s++]=String.fromCharCode(l);else if(l>191&&l<224){const c=r[n++];t[s++]=String.fromCharCode((l&31)<<6|c&63)}else if(l>239&&l<365){const c=r[n++],d=r[n++],g=r[n++],p=((l&7)<<18|(c&63)<<12|(d&63)<<6|g&63)-65536;t[s++]=String.fromCharCode(55296+(p>>10)),t[s++]=String.fromCharCode(56320+(p&1023))}else{const c=r[n++],d=r[n++];t[s++]=String.fromCharCode((l&15)<<12|(c&63)<<6|d&63)}}return t.join("")},aE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,t){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let l=0;l<r.length;l+=3){const c=r[l],d=l+1<r.length,g=d?r[l+1]:0,p=l+2<r.length,_=p?r[l+2]:0,A=c>>2,I=(c&3)<<4|g>>4;let D=(g&15)<<2|_>>6,H=_&63;p||(H=64,d||(D=64)),s.push(n[A],n[I],n[D],n[H])}return s.join("")},encodeString(r,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(r):this.encodeByteArray(sE(r),t)},decodeString(r,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(r):lA(this.decodeStringToByteArray(r,t))},decodeStringToByteArray(r,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let l=0;l<r.length;){const c=n[r.charAt(l++)],g=l<r.length?n[r.charAt(l)]:0;++l;const _=l<r.length?n[r.charAt(l)]:64;++l;const I=l<r.length?n[r.charAt(l)]:64;if(++l,c==null||g==null||_==null||I==null)throw new uA;const D=c<<2|g>>4;if(s.push(D),_!==64){const H=g<<4&240|_>>2;if(s.push(H),I!==64){const Z=_<<6&192|I;s.push(Z)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class uA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const cA=function(r){const t=sE(r);return aE.encodeByteArray(t,!0)},Pc=function(r){return cA(r).replace(/\./g,"")},oE=function(r){try{return aE.decodeString(r,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fA=()=>hA().__FIREBASE_DEFAULTS__,dA=()=>{if(typeof process>"u"||typeof I_>"u")return;const r=I_.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},mA=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=r&&oE(r[1]);return t&&JSON.parse(t)},nh=()=>{try{return oA()||fA()||dA()||mA()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},lE=r=>nh()?.emulatorHosts?.[r],gA=r=>{const t=lE(r);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const s=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),s]:[t.substring(0,n),s]},uE=()=>nh()?.config,cE=r=>nh()?.[`_${r}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Za(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function hE(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yA(r,t){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=t||"demo-project",l=r.iat||0,c=r.sub||r.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d={iss:`https://securetoken.google.com/${s}`,aud:s,iat:l,exp:l+3600,auth_time:l,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}},...r};return[Pc(JSON.stringify(n)),Pc(JSON.stringify(d)),""].join(".")}const Al={};function _A(){const r={prod:[],emulator:[]};for(const t of Object.keys(Al))Al[t]?r.emulator.push(t):r.prod.push(t);return r}function vA(r){let t=document.getElementById(r),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",r),n=!0),{created:n,element:t}}let C_=!1;function fE(r,t){if(typeof window>"u"||typeof document>"u"||!Za(window.location.host)||Al[r]===t||Al[r]||C_)return;Al[r]=t;function n(D){return`__firebase__banner__${D}`}const s="__firebase__banner",c=_A().prod.length>0;function d(){const D=document.getElementById(s);D&&D.remove()}function g(D){D.style.display="flex",D.style.background="#7faaf0",D.style.position="fixed",D.style.bottom="5px",D.style.left="5px",D.style.padding=".5em",D.style.borderRadius="5px",D.style.alignItems="center"}function p(D,H){D.setAttribute("width","24"),D.setAttribute("id",H),D.setAttribute("height","24"),D.setAttribute("viewBox","0 0 24 24"),D.setAttribute("fill","none"),D.style.marginLeft="-6px"}function _(){const D=document.createElement("span");return D.style.cursor="pointer",D.style.marginLeft="16px",D.style.fontSize="24px",D.innerHTML=" &times;",D.onclick=()=>{C_=!0,d()},D}function A(D,H){D.setAttribute("id",H),D.innerText="Learn more",D.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",D.setAttribute("target","__blank"),D.style.paddingLeft="5px",D.style.textDecoration="underline"}function I(){const D=vA(s),H=n("text"),Z=document.getElementById(H)||document.createElement("span"),nt=n("learnmore"),W=document.getElementById(nt)||document.createElement("a"),vt=n("preprendIcon"),dt=document.getElementById(vt)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(D.created){const ht=D.element;g(ht),A(W,nt);const Vt=_();p(dt,vt),ht.append(dt,Z,W,Vt),document.body.appendChild(ht)}c?(Z.innerText="Preview backend disconnected.",dt.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(dt.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,Z.innerText="Preview backend running in this workspace."),Z.setAttribute("id",H)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",I):I()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ze(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function EA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ze())}function TA(){const r=nh()?.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function AA(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function SA(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function bA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function wA(){const r=Ze();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function RA(){return!TA()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function IA(){try{return typeof indexedDB=="object"}catch{return!1}}function CA(){return new Promise((r,t)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",l=self.indexedDB.open(s);l.onsuccess=()=>{l.result.close(),n||self.indexedDB.deleteDatabase(s),r(!0)},l.onupgradeneeded=()=>{n=!1},l.onerror=()=>{t(l.error?.message||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DA="FirebaseError";class Ki extends Error{constructor(t,n,s){super(n),this.code=t,this.customData=s,this.name=DA,Object.setPrototypeOf(this,Ki.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ul.prototype.create)}}class Ul{constructor(t,n,s){this.service=t,this.serviceName=n,this.errors=s}create(t,...n){const s=n[0]||{},l=`${this.service}/${t}`,c=this.errors[t],d=c?NA(c,s):"Error",g=`${this.serviceName}: ${d} (${l}).`;return new Ki(l,g,s)}}function NA(r,t){return r.replace(OA,(n,s)=>{const l=t[s];return l!=null?String(l):`<${s}?>`})}const OA=/\{\$([^}]+)}/g;function VA(r){for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t))return!1;return!0}function Ms(r,t){if(r===t)return!0;const n=Object.keys(r),s=Object.keys(t);for(const l of n){if(!s.includes(l))return!1;const c=r[l],d=t[l];if(D_(c)&&D_(d)){if(!Ms(c,d))return!1}else if(c!==d)return!1}for(const l of s)if(!n.includes(l))return!1;return!0}function D_(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ll(r){const t=[];for(const[n,s]of Object.entries(r))Array.isArray(s)?s.forEach(l=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(l))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return t.length?"&"+t.join("&"):""}function pl(r){const t={};return r.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[l,c]=s.split("=");t[decodeURIComponent(l)]=decodeURIComponent(c)}}),t}function yl(r){const t=r.indexOf("?");if(!t)return"";const n=r.indexOf("#",t);return r.substring(t,n>0?n:void 0)}function MA(r,t){const n=new xA(r,t);return n.subscribe.bind(n)}class xA{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(s=>{this.error(s)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,s){let l;if(t===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");kA(t,["next","error","complete"])?l=t:l={next:t,error:n,complete:s},l.next===void 0&&(l.next=Cd),l.error===void 0&&(l.error=Cd),l.complete===void 0&&(l.complete=Cd);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?l.error(this.finalError):l.complete()}catch{}}),this.observers.push(l),c}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function kA(r,t){if(typeof r!="object"||r===null)return!1;for(const n of t)if(n in r&&typeof r[n]=="function")return!0;return!1}function Cd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function De(r){return r&&r._delegate?r._delegate:r}class xs{constructor(t,n,s){this.name=t,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ds="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PA{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const s=new pA;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const l=this.getOrInitializeService({instanceIdentifier:n});l&&s.resolve(l)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){const n=this.normalizeInstanceIdentifier(t?.identifier),s=t?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(l){if(s)return null;throw l}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(LA(t))try{this.getOrInitializeService({instanceIdentifier:Ds})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(n);try{const c=this.getOrInitializeService({instanceIdentifier:l});s.resolve(c)}catch{}}}}clearInstance(t=Ds){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Ds){return this.instances.has(t)}getOptions(t=Ds){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,s=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const l=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[c,d]of this.instancesDeferred.entries()){const g=this.normalizeInstanceIdentifier(c);s===g&&d.resolve(l)}return l}onInit(t,n){const s=this.normalizeInstanceIdentifier(n),l=this.onInitCallbacks.get(s)??new Set;l.add(t),this.onInitCallbacks.set(s,l);const c=this.instances.get(s);return c&&t(c,s),()=>{l.delete(t)}}invokeOnInitCallbacks(t,n){const s=this.onInitCallbacks.get(n);if(s)for(const l of s)try{l(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let s=this.instances.get(t);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:UA(t),options:n}),this.instances.set(t,s),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(s,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,s)}catch{}return s||null}normalizeInstanceIdentifier(t=Ds){return this.component?this.component.multipleInstances?t:Ds:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function UA(r){return r===Ds?void 0:r}function LA(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zA{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new PA(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Dt;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Dt||(Dt={}));const BA={debug:Dt.DEBUG,verbose:Dt.VERBOSE,info:Dt.INFO,warn:Dt.WARN,error:Dt.ERROR,silent:Dt.SILENT},qA=Dt.INFO,jA={[Dt.DEBUG]:"log",[Dt.VERBOSE]:"log",[Dt.INFO]:"info",[Dt.WARN]:"warn",[Dt.ERROR]:"error"},HA=(r,t,...n)=>{if(t<r.logLevel)return;const s=new Date().toISOString(),l=jA[t];if(l)console[l](`[${s}]  ${r.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class gm{constructor(t){this.name=t,this._logLevel=qA,this._logHandler=HA,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Dt))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?BA[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Dt.DEBUG,...t),this._logHandler(this,Dt.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Dt.VERBOSE,...t),this._logHandler(this,Dt.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Dt.INFO,...t),this._logHandler(this,Dt.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Dt.WARN,...t),this._logHandler(this,Dt.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Dt.ERROR,...t),this._logHandler(this,Dt.ERROR,...t)}}const GA=(r,t)=>t.some(n=>r instanceof n);let N_,O_;function FA(){return N_||(N_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function QA(){return O_||(O_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const dE=new WeakMap,Bd=new WeakMap,mE=new WeakMap,Dd=new WeakMap,pm=new WeakMap;function KA(r){const t=new Promise((n,s)=>{const l=()=>{r.removeEventListener("success",c),r.removeEventListener("error",d)},c=()=>{n(Dr(r.result)),l()},d=()=>{s(r.error),l()};r.addEventListener("success",c),r.addEventListener("error",d)});return t.then(n=>{n instanceof IDBCursor&&dE.set(n,r)}).catch(()=>{}),pm.set(t,r),t}function YA(r){if(Bd.has(r))return;const t=new Promise((n,s)=>{const l=()=>{r.removeEventListener("complete",c),r.removeEventListener("error",d),r.removeEventListener("abort",d)},c=()=>{n(),l()},d=()=>{s(r.error||new DOMException("AbortError","AbortError")),l()};r.addEventListener("complete",c),r.addEventListener("error",d),r.addEventListener("abort",d)});Bd.set(r,t)}let qd={get(r,t,n){if(r instanceof IDBTransaction){if(t==="done")return Bd.get(r);if(t==="objectStoreNames")return r.objectStoreNames||mE.get(r);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Dr(r[t])},set(r,t,n){return r[t]=n,!0},has(r,t){return r instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in r}};function XA(r){qd=r(qd)}function $A(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const s=r.call(Nd(this),t,...n);return mE.set(s,t.sort?t.sort():[t]),Dr(s)}:QA().includes(r)?function(...t){return r.apply(Nd(this),t),Dr(dE.get(this))}:function(...t){return Dr(r.apply(Nd(this),t))}}function ZA(r){return typeof r=="function"?$A(r):(r instanceof IDBTransaction&&YA(r),GA(r,FA())?new Proxy(r,qd):r)}function Dr(r){if(r instanceof IDBRequest)return KA(r);if(Dd.has(r))return Dd.get(r);const t=ZA(r);return t!==r&&(Dd.set(r,t),pm.set(t,r)),t}const Nd=r=>pm.get(r);function WA(r,t,{blocked:n,upgrade:s,blocking:l,terminated:c}={}){const d=indexedDB.open(r,t),g=Dr(d);return s&&d.addEventListener("upgradeneeded",p=>{s(Dr(d.result),p.oldVersion,p.newVersion,Dr(d.transaction),p)}),n&&d.addEventListener("blocked",p=>n(p.oldVersion,p.newVersion,p)),g.then(p=>{c&&p.addEventListener("close",()=>c()),l&&p.addEventListener("versionchange",_=>l(_.oldVersion,_.newVersion,_))}).catch(()=>{}),g}const JA=["get","getKey","getAll","getAllKeys","count"],tS=["put","add","delete","clear"],Od=new Map;function V_(r,t){if(!(r instanceof IDBDatabase&&!(t in r)&&typeof t=="string"))return;if(Od.get(t))return Od.get(t);const n=t.replace(/FromIndex$/,""),s=t!==n,l=tS.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(l||JA.includes(n)))return;const c=async function(d,...g){const p=this.transaction(d,l?"readwrite":"readonly");let _=p.store;return s&&(_=_.index(g.shift())),(await Promise.all([_[n](...g),l&&p.done]))[0]};return Od.set(t,c),c}XA(r=>({...r,get:(t,n,s)=>V_(t,n)||r.get(t,n,s),has:(t,n)=>!!V_(t,n)||r.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eS{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(nS(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function nS(r){return r.getComponent()?.type==="VERSION"}const jd="@firebase/app",M_="0.14.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hi=new gm("@firebase/app"),iS="@firebase/app-compat",rS="@firebase/analytics-compat",sS="@firebase/analytics",aS="@firebase/app-check-compat",oS="@firebase/app-check",lS="@firebase/auth",uS="@firebase/auth-compat",cS="@firebase/database",hS="@firebase/data-connect",fS="@firebase/database-compat",dS="@firebase/functions",mS="@firebase/functions-compat",gS="@firebase/installations",pS="@firebase/installations-compat",yS="@firebase/messaging",_S="@firebase/messaging-compat",vS="@firebase/performance",ES="@firebase/performance-compat",TS="@firebase/remote-config",AS="@firebase/remote-config-compat",SS="@firebase/storage",bS="@firebase/storage-compat",wS="@firebase/firestore",RS="@firebase/ai",IS="@firebase/firestore-compat",CS="firebase",DS="12.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hd="[DEFAULT]",NS={[jd]:"fire-core",[iS]:"fire-core-compat",[sS]:"fire-analytics",[rS]:"fire-analytics-compat",[oS]:"fire-app-check",[aS]:"fire-app-check-compat",[lS]:"fire-auth",[uS]:"fire-auth-compat",[cS]:"fire-rtdb",[hS]:"fire-data-connect",[fS]:"fire-rtdb-compat",[dS]:"fire-fn",[mS]:"fire-fn-compat",[gS]:"fire-iid",[pS]:"fire-iid-compat",[yS]:"fire-fcm",[_S]:"fire-fcm-compat",[vS]:"fire-perf",[ES]:"fire-perf-compat",[TS]:"fire-rc",[AS]:"fire-rc-compat",[SS]:"fire-gcs",[bS]:"fire-gcs-compat",[wS]:"fire-fst",[IS]:"fire-fst-compat",[RS]:"fire-vertex","fire-js":"fire-js",[CS]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uc=new Map,OS=new Map,Gd=new Map;function x_(r,t){try{r.container.addComponent(t)}catch(n){Hi.debug(`Component ${t.name} failed to register with FirebaseApp ${r.name}`,n)}}function Ha(r){const t=r.name;if(Gd.has(t))return Hi.debug(`There were multiple attempts to register component ${t}.`),!1;Gd.set(t,r);for(const n of Uc.values())x_(n,r);for(const n of OS.values())x_(n,r);return!0}function ym(r,t){const n=r.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),r.container.getProvider(t)}function On(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VS={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Nr=new Ul("app","Firebase",VS);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MS{constructor(t,n,s){this._isDeleted=!1,this._options={...t},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new xs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Nr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wa=DS;function gE(r,t={}){let n=r;typeof t!="object"&&(t={name:t});const s={name:Hd,automaticDataCollectionEnabled:!0,...t},l=s.name;if(typeof l!="string"||!l)throw Nr.create("bad-app-name",{appName:String(l)});if(n||(n=uE()),!n)throw Nr.create("no-options");const c=Uc.get(l);if(c){if(Ms(n,c.options)&&Ms(s,c.config))return c;throw Nr.create("duplicate-app",{appName:l})}const d=new zA(l);for(const p of Gd.values())d.addComponent(p);const g=new MS(n,s,d);return Uc.set(l,g),g}function pE(r=Hd){const t=Uc.get(r);if(!t&&r===Hd&&uE())return gE();if(!t)throw Nr.create("no-app",{appName:r});return t}function Or(r,t,n){let s=NS[r]??r;n&&(s+=`-${n}`);const l=s.match(/\s|\//),c=t.match(/\s|\//);if(l||c){const d=[`Unable to register library "${s}" with version "${t}":`];l&&d.push(`library name "${s}" contains illegal characters (whitespace or "/")`),l&&c&&d.push("and"),c&&d.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Hi.warn(d.join(" "));return}Ha(new xs(`${s}-version`,()=>({library:s,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xS="firebase-heartbeat-database",kS=1,Cl="firebase-heartbeat-store";let Vd=null;function yE(){return Vd||(Vd=WA(xS,kS,{upgrade:(r,t)=>{switch(t){case 0:try{r.createObjectStore(Cl)}catch(n){console.warn(n)}}}}).catch(r=>{throw Nr.create("idb-open",{originalErrorMessage:r.message})})),Vd}async function PS(r){try{const n=(await yE()).transaction(Cl),s=await n.objectStore(Cl).get(_E(r));return await n.done,s}catch(t){if(t instanceof Ki)Hi.warn(t.message);else{const n=Nr.create("idb-get",{originalErrorMessage:t?.message});Hi.warn(n.message)}}}async function k_(r,t){try{const s=(await yE()).transaction(Cl,"readwrite");await s.objectStore(Cl).put(t,_E(r)),await s.done}catch(n){if(n instanceof Ki)Hi.warn(n.message);else{const s=Nr.create("idb-set",{originalErrorMessage:n?.message});Hi.warn(s.message)}}}function _E(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const US=1024,LS=30;class zS{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new qS(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=P_();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(l=>l.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:n}),this._heartbeatsCache.heartbeats.length>LS){const l=jS(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(t){Hi.warn(t)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=P_(),{heartbeatsToSend:n,unsentEntries:s}=BS(this._heartbeatsCache.heartbeats),l=Pc(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return Hi.warn(t),""}}}function P_(){return new Date().toISOString().substring(0,10)}function BS(r,t=US){const n=[];let s=r.slice();for(const l of r){const c=n.find(d=>d.agent===l.agent);if(c){if(c.dates.push(l.date),U_(n)>t){c.dates.pop();break}}else if(n.push({agent:l.agent,dates:[l.date]}),U_(n)>t){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class qS{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return IA()?CA().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await PS(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const s=await this.read();return k_(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const s=await this.read();return k_(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...t.heartbeats]})}else return}}function U_(r){return Pc(JSON.stringify({version:2,heartbeats:r})).length}function jS(r){if(r.length===0)return-1;let t=0,n=r[0].date;for(let s=1;s<r.length;s++)r[s].date<n&&(n=r[s].date,t=s);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HS(r){Ha(new xs("platform-logger",t=>new eS(t),"PRIVATE")),Ha(new xs("heartbeat",t=>new zS(t),"PRIVATE")),Or(jd,M_,r),Or(jd,M_,"esm2020"),Or("fire-js","")}HS("");var GS="firebase",FS="12.2.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Or(GS,FS,"app");function vE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const QS=vE,EE=new Ul("auth","Firebase",vE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lc=new gm("@firebase/auth");function KS(r,...t){Lc.logLevel<=Dt.WARN&&Lc.warn(`Auth (${Wa}): ${r}`,...t)}function Rc(r,...t){Lc.logLevel<=Dt.ERROR&&Lc.error(`Auth (${Wa}): ${r}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qn(r,...t){throw _m(r,...t)}function oi(r,...t){return _m(r,...t)}function TE(r,t,n){const s={...QS(),[t]:n};return new Ul("auth","Firebase",s).create(t,{appName:r.name})}function ji(r){return TE(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function _m(r,...t){if(typeof r!="string"){const n=t[0],s=[...t.slice(1)];return s[0]&&(s[0].appName=r.name),r._errorFactory.create(n,...s)}return EE.create(r,...t)}function pt(r,t,...n){if(!r)throw _m(t,...n)}function Bi(r){const t="INTERNAL ASSERTION FAILED: "+r;throw Rc(t),new Error(t)}function Gi(r,t){r||Bi(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fd(){return typeof self<"u"&&self.location?.href||""}function YS(){return L_()==="http:"||L_()==="https:"}function L_(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XS(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(YS()||SA()||"connection"in navigator)?navigator.onLine:!0}function $S(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zl{constructor(t,n){this.shortDelay=t,this.longDelay=n,Gi(n>t,"Short delay should be less than long delay!"),this.isMobile=EA()||bA()}get(){return XS()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vm(r,t){Gi(r.emulator,"Emulator should always be set here");const{url:n}=r.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AE{static initialize(t,n,s){this.fetchImpl=t,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Bi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Bi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Bi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZS={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WS=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],JS=new zl(3e4,6e4);function jr(r,t){return r.tenantId&&!t.tenantId?{...t,tenantId:r.tenantId}:t}async function Hr(r,t,n,s,l={}){return SE(r,l,async()=>{let c={},d={};s&&(t==="GET"?d=s:c={body:JSON.stringify(s)});const g=Ll({key:r.config.apiKey,...d}).slice(1),p=await r._getAdditionalHeaders();p["Content-Type"]="application/json",r.languageCode&&(p["X-Firebase-Locale"]=r.languageCode);const _={method:t,headers:p,...c};return AA()||(_.referrerPolicy="no-referrer"),r.emulatorConfig&&Za(r.emulatorConfig.host)&&(_.credentials="include"),AE.fetch()(await bE(r,r.config.apiHost,n,g),_)})}async function SE(r,t,n){r._canInitEmulator=!1;const s={...ZS,...t};try{const l=new eb(r),c=await Promise.race([n(),l.promise]);l.clearNetworkTimeout();const d=await c.json();if("needConfirmation"in d)throw Ec(r,"account-exists-with-different-credential",d);if(c.ok&&!("errorMessage"in d))return d;{const g=c.ok?d.errorMessage:d.error.message,[p,_]=g.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ec(r,"credential-already-in-use",d);if(p==="EMAIL_EXISTS")throw Ec(r,"email-already-in-use",d);if(p==="USER_DISABLED")throw Ec(r,"user-disabled",d);const A=s[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(_)throw TE(r,A,_);qn(r,A)}}catch(l){if(l instanceof Ki)throw l;qn(r,"network-request-failed",{message:String(l)})}}async function Bl(r,t,n,s,l={}){const c=await Hr(r,t,n,s,l);return"mfaPendingCredential"in c&&qn(r,"multi-factor-auth-required",{_serverResponse:c}),c}async function bE(r,t,n,s){const l=`${t}${n}?${s}`,c=r,d=c.config.emulator?vm(r.config,l):`${r.config.apiScheme}://${l}`;return WS.includes(n)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(d).toString():d}function tb(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class eb{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(oi(this.auth,"network-request-failed")),JS.get())})}}function Ec(r,t,n){const s={appName:r.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const l=oi(r,t,s);return l.customData._tokenResponse=n,l}function z_(r){return r!==void 0&&r.enterprise!==void 0}class nb{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===t)return tb(n.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function ib(r,t){return Hr(r,"GET","/v2/recaptchaConfig",jr(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rb(r,t){return Hr(r,"POST","/v1/accounts:delete",t)}async function zc(r,t){return Hr(r,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sl(r){if(r)try{const t=new Date(Number(r));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function sb(r,t=!1){const n=De(r),s=await n.getIdToken(t),l=Em(s);pt(l&&l.exp&&l.auth_time&&l.iat,n.auth,"internal-error");const c=typeof l.firebase=="object"?l.firebase:void 0,d=c?.sign_in_provider;return{claims:l,token:s,authTime:Sl(Md(l.auth_time)),issuedAtTime:Sl(Md(l.iat)),expirationTime:Sl(Md(l.exp)),signInProvider:d||null,signInSecondFactor:c?.sign_in_second_factor||null}}function Md(r){return Number(r)*1e3}function Em(r){const[t,n,s]=r.split(".");if(t===void 0||n===void 0||s===void 0)return Rc("JWT malformed, contained fewer than 3 sections"),null;try{const l=oE(n);return l?JSON.parse(l):(Rc("Failed to decode base64 JWT payload"),null)}catch(l){return Rc("Caught error parsing JWT payload as JSON",l?.toString()),null}}function B_(r){const t=Em(r);return pt(t,"internal-error"),pt(typeof t.exp<"u","internal-error"),pt(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dl(r,t,n=!1){if(n)return t;try{return await t}catch(s){throw s instanceof Ki&&ab(s)&&r.auth.currentUser===r&&await r.auth.signOut(),s}}function ab({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ob{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){t?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qd{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Sl(this.lastLoginAt),this.creationTime=Sl(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bc(r){const t=r.auth,n=await r.getIdToken(),s=await Dl(r,zc(t,{idToken:n}));pt(s?.users.length,t,"internal-error");const l=s.users[0];r._notifyReloadListener(l);const c=l.providerUserInfo?.length?wE(l.providerUserInfo):[],d=ub(r.providerData,c),g=r.isAnonymous,p=!(r.email&&l.passwordHash)&&!d?.length,_=g?p:!1,A={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:d,metadata:new Qd(l.createdAt,l.lastLoginAt),isAnonymous:_};Object.assign(r,A)}async function lb(r){const t=De(r);await Bc(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function ub(r,t){return[...r.filter(s=>!t.some(l=>l.providerId===s.providerId)),...t]}function wE(r){return r.map(({providerId:t,...n})=>({providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cb(r,t){const n=await SE(r,{},async()=>{const s=Ll({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:l,apiKey:c}=r.config,d=await bE(r,l,"/v1/token",`key=${c}`),g=await r._getAdditionalHeaders();g["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:g,body:s};return r.emulatorConfig&&Za(r.emulatorConfig.host)&&(p.credentials="include"),AE.fetch()(d,p)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function hb(r,t){return Hr(r,"POST","/v2/accounts:revokeToken",jr(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class La{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){pt(t.idToken,"internal-error"),pt(typeof t.idToken<"u","internal-error"),pt(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):B_(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){pt(t.length!==0,"internal-error");const n=B_(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(pt(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:s,refreshToken:l,expiresIn:c}=await cb(t,n);this.updateTokensAndExpiration(s,l,Number(c))}updateTokensAndExpiration(t,n,s){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(t,n){const{refreshToken:s,accessToken:l,expirationTime:c}=n,d=new La;return s&&(pt(typeof s=="string","internal-error",{appName:t}),d.refreshToken=s),l&&(pt(typeof l=="string","internal-error",{appName:t}),d.accessToken=l),c&&(pt(typeof c=="number","internal-error",{appName:t}),d.expirationTime=c),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new La,this.toJSON())}_performRefresh(){return Bi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sr(r,t){pt(typeof r=="string"||typeof r>"u","internal-error",{appName:t})}class zn{constructor({uid:t,auth:n,stsTokenManager:s,...l}){this.providerId="firebase",this.proactiveRefresh=new ob(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new Qd(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(t){const n=await Dl(this,this.stsTokenManager.getToken(this.auth,t));return pt(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return sb(this,t)}reload(){return lb(this)}_assign(t){this!==t&&(pt(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>({...n})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new zn({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(t){pt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let s=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),s=!0),n&&await Bc(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(On(this.auth.app))return Promise.reject(ji(this.auth));const t=await this.getIdToken();return await Dl(this,rb(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){const s=n.displayName??void 0,l=n.email??void 0,c=n.phoneNumber??void 0,d=n.photoURL??void 0,g=n.tenantId??void 0,p=n._redirectEventId??void 0,_=n.createdAt??void 0,A=n.lastLoginAt??void 0,{uid:I,emailVerified:D,isAnonymous:H,providerData:Z,stsTokenManager:nt}=n;pt(I&&nt,t,"internal-error");const W=La.fromJSON(this.name,nt);pt(typeof I=="string",t,"internal-error"),Sr(s,t.name),Sr(l,t.name),pt(typeof D=="boolean",t,"internal-error"),pt(typeof H=="boolean",t,"internal-error"),Sr(c,t.name),Sr(d,t.name),Sr(g,t.name),Sr(p,t.name),Sr(_,t.name),Sr(A,t.name);const vt=new zn({uid:I,auth:t,email:l,emailVerified:D,displayName:s,isAnonymous:H,photoURL:d,phoneNumber:c,tenantId:g,stsTokenManager:W,createdAt:_,lastLoginAt:A});return Z&&Array.isArray(Z)&&(vt.providerData=Z.map(dt=>({...dt}))),p&&(vt._redirectEventId=p),vt}static async _fromIdTokenResponse(t,n,s=!1){const l=new La;l.updateFromServerResponse(n);const c=new zn({uid:n.localId,auth:t,stsTokenManager:l,isAnonymous:s});return await Bc(c),c}static async _fromGetAccountInfoResponse(t,n,s){const l=n.users[0];pt(l.localId!==void 0,"internal-error");const c=l.providerUserInfo!==void 0?wE(l.providerUserInfo):[],d=!(l.email&&l.passwordHash)&&!c?.length,g=new La;g.updateFromIdToken(s);const p=new zn({uid:l.localId,auth:t,stsTokenManager:g,isAnonymous:d}),_={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:c,metadata:new Qd(l.createdAt,l.lastLoginAt),isAnonymous:!(l.email&&l.passwordHash)&&!c?.length};return Object.assign(p,_),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q_=new Map;function qi(r){Gi(r instanceof Function,"Expected a class definition");let t=q_.get(r);return t?(Gi(t instanceof r,"Instance stored in cache mismatched with class"),t):(t=new r,q_.set(r,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}RE.type="NONE";const j_=RE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ic(r,t,n){return`firebase:${r}:${t}:${n}`}class za{constructor(t,n,s){this.persistence=t,this.auth=n,this.userKey=s;const{config:l,name:c}=this.auth;this.fullUserKey=Ic(this.userKey,l.apiKey,c),this.fullPersistenceKey=Ic("persistence",l.apiKey,c),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const n=await zc(this.auth,{idToken:t}).catch(()=>{});return n?zn._fromGetAccountInfoResponse(this.auth,n,t):null}return zn._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,s="authUser"){if(!n.length)return new za(qi(j_),t,s);const l=(await Promise.all(n.map(async _=>{if(await _._isAvailable())return _}))).filter(_=>_);let c=l[0]||qi(j_);const d=Ic(s,t.config.apiKey,t.name);let g=null;for(const _ of n)try{const A=await _._get(d);if(A){let I;if(typeof A=="string"){const D=await zc(t,{idToken:A}).catch(()=>{});if(!D)break;I=await zn._fromGetAccountInfoResponse(t,D,A)}else I=zn._fromJSON(t,A);_!==c&&(g=I),c=_;break}}catch{}const p=l.filter(_=>_._shouldAllowMigration);return!c._shouldAllowMigration||!p.length?new za(c,t,s):(c=p[0],g&&await c._set(d,g.toJSON()),await Promise.all(n.map(async _=>{if(_!==c)try{await _._remove(d)}catch{}})),new za(c,t,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H_(r){const t=r.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(NE(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(IE(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(VE(t))return"Blackberry";if(ME(t))return"Webos";if(CE(t))return"Safari";if((t.includes("chrome/")||DE(t))&&!t.includes("edge/"))return"Chrome";if(OE(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=r.match(n);if(s?.length===2)return s[1]}return"Other"}function IE(r=Ze()){return/firefox\//i.test(r)}function CE(r=Ze()){const t=r.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function DE(r=Ze()){return/crios\//i.test(r)}function NE(r=Ze()){return/iemobile/i.test(r)}function OE(r=Ze()){return/android/i.test(r)}function VE(r=Ze()){return/blackberry/i.test(r)}function ME(r=Ze()){return/webos/i.test(r)}function Tm(r=Ze()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function fb(r=Ze()){return Tm(r)&&!!window.navigator?.standalone}function db(){return wA()&&document.documentMode===10}function xE(r=Ze()){return Tm(r)||OE(r)||ME(r)||VE(r)||/windows phone/i.test(r)||NE(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kE(r,t=[]){let n;switch(r){case"Browser":n=H_(Ze());break;case"Worker":n=`${H_(Ze())}-${r}`;break;default:n=r}const s=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${Wa}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mb{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const s=c=>new Promise((d,g)=>{try{const p=t(c);d(p)}catch(p){g(p)}});s.onAbort=n,this.queue.push(s);const l=this.queue.length-1;return()=>{this.queue[l]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const s of this.queue)await s(t),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const l of n)try{l()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gb(r,t={}){return Hr(r,"GET","/v2/passwordPolicy",jr(r,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pb=6;class yb{constructor(t){const n=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??pb,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=t.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,n),this.validatePasswordCharacterOptions(t,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(t,n){const s=this.customStrengthOptions.minPasswordLength,l=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=t.length>=s),l&&(n.meetsMaxPasswordLength=t.length<=l)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let l=0;l<t.length;l++)s=t.charAt(l),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(t,n,s,l,c){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=l)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _b{constructor(t,n,s,l){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=l,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new G_(this),this.idTokenSubscription=new G_(this),this.beforeStateQueue=new mb(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=EE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=l.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=qi(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await za.create(this,t),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await zc(this,{idToken:t}),s=await zn._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){if(On(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(d,d))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,l=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=this.redirectUser?._redirectEventId,d=s?._redirectEventId,g=await this.tryRedirectSignIn(t);(!c||c===d)&&g?.user&&(s=g.user,l=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(s)}catch(c){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return pt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await Bc(t)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=$S()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(On(this.app))return Promise.reject(ji(this));const n=t?De(t):null;return n&&pt(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&pt(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return On(this.app)?Promise.reject(ji(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return On(this.app)?Promise.reject(ji(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(qi(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await gb(this),n=new yb(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new Ul("auth","Firebase",t())}onAuthStateChanged(t,n,s){return this.registerStateListener(this.authStateSubscription,t,n,s)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,s){return this.registerStateListener(this.idTokenSubscription,t,n,s)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const s=this.onAuthStateChanged(()=>{s(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await hb(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(t,n){const s=await this.getOrInitRedirectPersistenceManager(n);return t===null?s.removeCurrentUser():s.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&qi(t)||this._popupRedirectResolver;pt(n,this,"argument-error"),this.redirectPersistenceManager=await za.create(this,[qi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===t?this._currentUser:this.redirectUser?._redirectEventId===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=this.currentUser?.uid??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,s,l){if(this._deleted)return()=>{};const c=typeof n=="function"?n:n.next.bind(n);let d=!1;const g=this._isInitialized?Promise.resolve():this._initializationPromise;if(pt(g,this,"internal-error"),g.then(()=>{d||c(this.currentUser)}),typeof n=="function"){const p=t.addObserver(n,s,l);return()=>{d=!0,p()}}else{const p=t.addObserver(n);return()=>{d=!0,p()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return pt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=kE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(t["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(t["X-Firebase-AppCheck"]=s),t}async _getAppCheckToken(){if(On(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return t?.error&&KS(`Error while retrieving App Check token: ${t.error}`),t?.token}}function Ls(r){return De(r)}class G_{constructor(t){this.auth=t,this.observer=null,this.addObserver=MA(n=>this.observer=n)}get next(){return pt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ih={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function vb(r){ih=r}function PE(r){return ih.loadJS(r)}function Eb(){return ih.recaptchaEnterpriseScript}function Tb(){return ih.gapiScript}function Ab(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class Sb{constructor(){this.enterprise=new bb}ready(t){t()}execute(t,n){return Promise.resolve("token")}render(t,n){return""}}class bb{ready(t){t()}execute(t,n){return Promise.resolve("token")}render(t,n){return""}}const wb="recaptcha-enterprise",UE="NO_RECAPTCHA";class Rb{constructor(t){this.type=wb,this.auth=Ls(t)}async verify(t="verify",n=!1){async function s(c){if(!n){if(c.tenantId==null&&c._agentRecaptchaConfig!=null)return c._agentRecaptchaConfig.siteKey;if(c.tenantId!=null&&c._tenantRecaptchaConfigs[c.tenantId]!==void 0)return c._tenantRecaptchaConfigs[c.tenantId].siteKey}return new Promise(async(d,g)=>{ib(c,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)g(new Error("recaptcha Enterprise site key undefined"));else{const _=new nb(p);return c.tenantId==null?c._agentRecaptchaConfig=_:c._tenantRecaptchaConfigs[c.tenantId]=_,d(_.siteKey)}}).catch(p=>{g(p)})})}function l(c,d,g){const p=window.grecaptcha;z_(p)?p.enterprise.ready(()=>{p.enterprise.execute(c,{action:t}).then(_=>{d(_)}).catch(()=>{d(UE)})}):g(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Sb().execute("siteKey",{action:"verify"}):new Promise((c,d)=>{s(this.auth).then(g=>{if(!n&&z_(window.grecaptcha))l(g,c,d);else{if(typeof window>"u"){d(new Error("RecaptchaVerifier is only supported in browser"));return}let p=Eb();p.length!==0&&(p+=g),PE(p).then(()=>{l(g,c,d)}).catch(_=>{d(_)})}}).catch(g=>{d(g)})})}}async function F_(r,t,n,s=!1,l=!1){const c=new Rb(r);let d;if(l)d=UE;else try{d=await c.verify(n)}catch{d=await c.verify(n,!0)}const g={...t};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in g){const p=g.phoneEnrollmentInfo.phoneNumber,_=g.phoneEnrollmentInfo.recaptchaToken;Object.assign(g,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:_,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in g){const p=g.phoneSignInInfo.recaptchaToken;Object.assign(g,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return g}return s?Object.assign(g,{captchaResp:d}):Object.assign(g,{captchaResponse:d}),Object.assign(g,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(g,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),g}async function Kd(r,t,n,s,l){if(r._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await F_(r,t,n,n==="getOobCode");return s(r,c)}else return s(r,t).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await F_(r,t,n,n==="getOobCode");return s(r,d)}else return Promise.reject(c)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ib(r,t){const n=ym(r,"auth");if(n.isInitialized()){const l=n.getImmediate(),c=n.getOptions();if(Ms(c,t??{}))return l;qn(l,"already-initialized")}return n.initialize({options:t})}function Cb(r,t){const n=t?.persistence||[],s=(Array.isArray(n)?n:[n]).map(qi);t?.errorMap&&r._updateErrorMap(t.errorMap),r._initializeWithPersistence(s,t?.popupRedirectResolver)}function Db(r,t,n){const s=Ls(r);pt(/^https?:\/\//.test(t),s,"invalid-emulator-scheme");const l=!1,c=LE(t),{host:d,port:g}=Nb(t),p=g===null?"":`:${g}`,_={url:`${c}//${d}${p}/`},A=Object.freeze({host:d,port:g,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:l})});if(!s._canInitEmulator){pt(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),pt(Ms(_,s.config.emulator)&&Ms(A,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=_,s.emulatorConfig=A,s.settings.appVerificationDisabledForTesting=!0,Za(d)?(hE(`${c}//${d}${p}`),fE("Auth",!0)):Ob()}function LE(r){const t=r.indexOf(":");return t<0?"":r.substr(0,t+1)}function Nb(r){const t=LE(r),n=/(\/\/)?([^?#/]+)/.exec(r.substr(t.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",l=/^(\[[^\]]+\])(:|$)/.exec(s);if(l){const c=l[1];return{host:c,port:Q_(s.substr(c.length+1))}}else{const[c,d]=s.split(":");return{host:c,port:Q_(d)}}}function Q_(r){if(!r)return null;const t=Number(r);return isNaN(t)?null:t}function Ob(){function r(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Am{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return Bi("not implemented")}_getIdTokenResponse(t){return Bi("not implemented")}_linkToIdToken(t,n){return Bi("not implemented")}_getReauthenticationResolver(t){return Bi("not implemented")}}async function Vb(r,t){return Hr(r,"POST","/v1/accounts:signUp",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mb(r,t){return Bl(r,"POST","/v1/accounts:signInWithPassword",jr(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xb(r,t){return Bl(r,"POST","/v1/accounts:signInWithEmailLink",jr(r,t))}async function kb(r,t){return Bl(r,"POST","/v1/accounts:signInWithEmailLink",jr(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nl extends Am{constructor(t,n,s,l=null){super("password",s),this._email=t,this._password=n,this._tenantId=l}static _fromEmailAndPassword(t,n){return new Nl(t,n,"password")}static _fromEmailAndCode(t,n,s=null){return new Nl(t,n,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Kd(t,n,"signInWithPassword",Mb);case"emailLink":return xb(t,{email:this._email,oobCode:this._password});default:qn(t,"internal-error")}}async _linkToIdToken(t,n){switch(this.signInMethod){case"password":const s={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Kd(t,s,"signUpPassword",Vb);case"emailLink":return kb(t,{idToken:n,email:this._email,oobCode:this._password});default:qn(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ba(r,t){return Bl(r,"POST","/v1/accounts:signInWithIdp",jr(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pb="http://localhost";class ks extends Am{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new ks(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):qn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:s,signInMethod:l,...c}=n;if(!s||!l)return null;const d=new ks(s,l);return d.idToken=c.idToken||void 0,d.accessToken=c.accessToken||void 0,d.secret=c.secret,d.nonce=c.nonce,d.pendingToken=c.pendingToken||null,d}_getIdTokenResponse(t){const n=this.buildRequest();return Ba(t,n)}_linkToIdToken(t,n){const s=this.buildRequest();return s.idToken=n,Ba(t,s)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,Ba(t,n)}buildRequest(){const t={requestUri:Pb,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=Ll(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ub(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Lb(r){const t=pl(yl(r)).link,n=t?pl(yl(t)).deep_link_id:null,s=pl(yl(r)).deep_link_id;return(s?pl(yl(s)).link:null)||s||n||t||r}class Sm{constructor(t){const n=pl(yl(t)),s=n.apiKey??null,l=n.oobCode??null,c=Ub(n.mode??null);pt(s&&l&&c,"argument-error"),this.apiKey=s,this.operation=c,this.code=l,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(t){const n=Lb(t);try{return new Sm(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ja{constructor(){this.providerId=Ja.PROVIDER_ID}static credential(t,n){return Nl._fromEmailAndPassword(t,n)}static credentialWithLink(t,n){const s=Sm.parseLink(n);return pt(s,"argument-error"),Nl._fromEmailAndCode(t,s.code,s.tenantId)}}Ja.PROVIDER_ID="password";Ja.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ja.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zE{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ql extends zE{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br extends ql{constructor(){super("facebook.com")}static credential(t){return ks._fromParams({providerId:br.PROVIDER_ID,signInMethod:br.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return br.credentialFromTaggedObject(t)}static credentialFromError(t){return br.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return br.credential(t.oauthAccessToken)}catch{return null}}}br.FACEBOOK_SIGN_IN_METHOD="facebook.com";br.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr extends ql{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return ks._fromParams({providerId:wr.PROVIDER_ID,signInMethod:wr.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return wr.credentialFromTaggedObject(t)}static credentialFromError(t){return wr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:s}=t;if(!n&&!s)return null;try{return wr.credential(n,s)}catch{return null}}}wr.GOOGLE_SIGN_IN_METHOD="google.com";wr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr extends ql{constructor(){super("github.com")}static credential(t){return ks._fromParams({providerId:Rr.PROVIDER_ID,signInMethod:Rr.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Rr.credentialFromTaggedObject(t)}static credentialFromError(t){return Rr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Rr.credential(t.oauthAccessToken)}catch{return null}}}Rr.GITHUB_SIGN_IN_METHOD="github.com";Rr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ir extends ql{constructor(){super("twitter.com")}static credential(t,n){return ks._fromParams({providerId:Ir.PROVIDER_ID,signInMethod:Ir.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return Ir.credentialFromTaggedObject(t)}static credentialFromError(t){return Ir.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=t;if(!n||!s)return null;try{return Ir.credential(n,s)}catch{return null}}}Ir.TWITTER_SIGN_IN_METHOD="twitter.com";Ir.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zb(r,t){return Bl(r,"POST","/v1/accounts:signUp",jr(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ps{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,s,l=!1){const c=await zn._fromIdTokenResponse(t,s,l),d=K_(s);return new Ps({user:c,providerId:d,_tokenResponse:s,operationType:n})}static async _forOperation(t,n,s){await t._updateTokensIfNecessary(s,!0);const l=K_(s);return new Ps({user:t,providerId:l,_tokenResponse:s,operationType:n})}}function K_(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qc extends Ki{constructor(t,n,s,l){super(n.code,n.message),this.operationType=s,this.user=l,Object.setPrototypeOf(this,qc.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(t,n,s,l){return new qc(t,n,s,l)}}function BE(r,t,n,s){return(t==="reauthenticate"?n._getReauthenticationResolver(r):n._getIdTokenResponse(r)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?qc._fromErrorAndOperation(r,c,t,s):c})}async function Bb(r,t,n=!1){const s=await Dl(r,t._linkToIdToken(r.auth,await r.getIdToken()),n);return Ps._forOperation(r,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qb(r,t,n=!1){const{auth:s}=r;if(On(s.app))return Promise.reject(ji(s));const l="reauthenticate";try{const c=await Dl(r,BE(s,l,t,r),n);pt(c.idToken,s,"internal-error");const d=Em(c.idToken);pt(d,s,"internal-error");const{sub:g}=d;return pt(r.uid===g,s,"user-mismatch"),Ps._forOperation(r,l,c)}catch(c){throw c?.code==="auth/user-not-found"&&qn(s,"user-mismatch"),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qE(r,t,n=!1){if(On(r.app))return Promise.reject(ji(r));const s="signIn",l=await BE(r,s,t),c=await Ps._fromIdTokenResponse(r,s,l);return n||await r._updateCurrentUser(c.user),c}async function jb(r,t){return qE(Ls(r),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jE(r){const t=Ls(r);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function Hb(r,t,n){if(On(r.app))return Promise.reject(ji(r));const s=Ls(r),d=await Kd(s,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",zb).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&jE(r),p}),g=await Ps._fromIdTokenResponse(s,"signIn",d);return await s._updateCurrentUser(g.user),g}function Gb(r,t,n){return On(r.app)?Promise.reject(ji(r)):jb(De(r),Ja.credential(t,n)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&jE(r),s})}function Fb(r,t,n,s){return De(r).onIdTokenChanged(t,n,s)}function Qb(r,t,n){return De(r).beforeAuthStateChanged(t,n)}function Kb(r,t,n,s){return De(r).onAuthStateChanged(t,n,s)}function Yb(r){return De(r).signOut()}const jc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HE{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(jc,"1"),this.storage.removeItem(jc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xb=1e3,$b=10;class GE extends HE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=xE(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),l=this.localCache[n];s!==l&&t(n,l,s)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((d,g,p)=>{this.notifyListeners(d,p)});return}const s=t.key;n?this.detachListener():this.stopPolling();const l=()=>{const d=this.storage.getItem(s);!n&&this.localCache[s]===d||this.notifyListeners(s,d)},c=this.storage.getItem(s);db()&&c!==t.newValue&&t.newValue!==t.oldValue?setTimeout(l,$b):l()}notifyListeners(t,n){this.localCache[t]=n;const s=this.listeners[t];if(s)for(const l of Array.from(s))l(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:s}),!0)})},Xb)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}GE.type="LOCAL";const Zb=GE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FE extends HE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}FE.type="SESSION";const QE=FE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wb(r){return Promise.all(r.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rh{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(l=>l.isListeningto(t));if(n)return n;const s=new rh(t);return this.receivers.push(s),s}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:s,eventType:l,data:c}=n.data,d=this.handlersMap[l];if(!d?.size)return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:l});const g=Array.from(d).map(async _=>_(n.origin,c)),p=await Wb(g);n.ports[0].postMessage({status:"done",eventId:s,eventType:l,response:p})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}rh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bm(r="",t=10){let n="";for(let s=0;s<t;s++)n+=Math.floor(Math.random()*10);return r+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jb{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,s=50){const l=typeof MessageChannel<"u"?new MessageChannel:null;if(!l)throw new Error("connection_unavailable");let c,d;return new Promise((g,p)=>{const _=bm("",20);l.port1.start();const A=setTimeout(()=>{p(new Error("unsupported_event"))},s);d={messageChannel:l,onMessage(I){const D=I;if(D.data.eventId===_)switch(D.data.status){case"ack":clearTimeout(A),c=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),g(D.data.response);break;default:clearTimeout(A),clearTimeout(c),p(new Error("invalid_response"));break}}},this.handlers.add(d),l.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:t,eventId:_,data:n},[l.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function li(){return window}function tw(r){li().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KE(){return typeof li().WorkerGlobalScope<"u"&&typeof li().importScripts=="function"}async function ew(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function nw(){return navigator?.serviceWorker?.controller||null}function iw(){return KE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YE="firebaseLocalStorageDb",rw=1,Hc="firebaseLocalStorage",XE="fbase_key";class jl{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function sh(r,t){return r.transaction([Hc],t?"readwrite":"readonly").objectStore(Hc)}function sw(){const r=indexedDB.deleteDatabase(YE);return new jl(r).toPromise()}function Yd(){const r=indexedDB.open(YE,rw);return new Promise((t,n)=>{r.addEventListener("error",()=>{n(r.error)}),r.addEventListener("upgradeneeded",()=>{const s=r.result;try{s.createObjectStore(Hc,{keyPath:XE})}catch(l){n(l)}}),r.addEventListener("success",async()=>{const s=r.result;s.objectStoreNames.contains(Hc)?t(s):(s.close(),await sw(),t(await Yd()))})})}async function Y_(r,t,n){const s=sh(r,!0).put({[XE]:t,value:n});return new jl(s).toPromise()}async function aw(r,t){const n=sh(r,!1).get(t),s=await new jl(n).toPromise();return s===void 0?null:s.value}function X_(r,t){const n=sh(r,!0).delete(t);return new jl(n).toPromise()}const ow=800,lw=3;class $E{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Yd(),this.db)}async _withRetries(t){let n=0;for(;;)try{const s=await this._openDb();return await t(s)}catch(s){if(n++>lw)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return KE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=rh._getInstance(iw()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await ew(),!this.activeServiceWorker)return;this.sender=new Jb(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&t[0]?.fulfilled&&t[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||nw()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await Yd();return await Y_(t,jc,"1"),await X_(t,jc),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>Y_(s,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(s=>aw(s,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>X_(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(l=>{const c=sh(l,!1).getAll();return new jl(c).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(t.length!==0)for(const{fbase_key:l,value:c}of t)s.add(l),JSON.stringify(this.localCache[l])!==JSON.stringify(c)&&(this.notifyListeners(l,c),n.push(l));for(const l of Object.keys(this.localCache))this.localCache[l]&&!s.has(l)&&(this.notifyListeners(l,null),n.push(l));return n}notifyListeners(t,n){this.localCache[t]=n;const s=this.listeners[t];if(s)for(const l of Array.from(s))l(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),ow)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}$E.type="LOCAL";const uw=$E;new zl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cw(r,t){return t?qi(t):(pt(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wm extends Am{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Ba(t,this._buildIdpRequest())}_linkToIdToken(t,n){return Ba(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return Ba(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function hw(r){return qE(r.auth,new wm(r),r.bypassAuthState)}function fw(r){const{auth:t,user:n}=r;return pt(n,t,"internal-error"),qb(n,new wm(r),r.bypassAuthState)}async function dw(r){const{auth:t,user:n}=r;return pt(n,t,"internal-error"),Bb(n,new wm(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZE{constructor(t,n,s,l,c=!1){this.auth=t,this.resolver=s,this.user=l,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:s,postBody:l,tenantId:c,error:d,type:g}=t;if(d){this.reject(d);return}const p={auth:this.auth,requestUri:n,sessionId:s,tenantId:c||void 0,postBody:l||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(g)(p))}catch(_){this.reject(_)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return hw;case"linkViaPopup":case"linkViaRedirect":return dw;case"reauthViaPopup":case"reauthViaRedirect":return fw;default:qn(this.auth,"internal-error")}}resolve(t){Gi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Gi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mw=new zl(2e3,1e4);class Ua extends ZE{constructor(t,n,s,l,c){super(t,n,l,c),this.provider=s,this.authWindow=null,this.pollId=null,Ua.currentPopupAction&&Ua.currentPopupAction.cancel(),Ua.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return pt(t,this.auth,"internal-error"),t}async onExecution(){Gi(this.filter.length===1,"Popup operations only handle one event");const t=bm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(oi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(oi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ua.currentPopupAction=null}pollUserCancellation(){const t=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(oi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,mw.get())};t()}}Ua.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gw="pendingRedirect",Cc=new Map;class pw extends ZE{constructor(t,n,s=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let t=Cc.get(this.auth._key());if(!t){try{const s=await yw(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(s)}catch(n){t=()=>Promise.reject(n)}Cc.set(this.auth._key(),t)}return this.bypassAuthState||Cc.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function yw(r,t){const n=Ew(t),s=vw(r);if(!await s._isAvailable())return!1;const l=await s._get(n)==="true";return await s._remove(n),l}function _w(r,t){Cc.set(r._key(),t)}function vw(r){return qi(r._redirectPersistence)}function Ew(r){return Ic(gw,r.config.apiKey,r.name)}async function Tw(r,t,n=!1){if(On(r.app))return Promise.reject(ji(r));const s=Ls(r),l=cw(s,t),d=await new pw(s,l,n).execute();return d&&!n&&(delete d.user._redirectEventId,await s._persistUserIfCurrent(d.user),await s._setRedirectUser(null,t)),d}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aw=600*1e3;class Sw{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(t,s)&&(n=!0,this.sendToConsumer(t,s),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!bw(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){if(t.error&&!WE(t)){const s=t.error.code?.split("auth/")[1]||"internal-error";n.onError(oi(this.auth,s))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const s=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&s}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=Aw&&this.cachedEventUids.clear(),this.cachedEventUids.has($_(t))}saveEventToCache(t){this.cachedEventUids.add($_(t)),this.lastProcessedEventTime=Date.now()}}function $_(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(t=>t).join("-")}function WE({type:r,error:t}){return r==="unknown"&&t?.code==="auth/no-auth-event"}function bw(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return WE(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ww(r,t={}){return Hr(r,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rw=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Iw=/^https?/;async function Cw(r){if(r.config.emulator)return;const{authorizedDomains:t}=await ww(r);for(const n of t)try{if(Dw(n))return}catch{}qn(r,"unauthorized-domain")}function Dw(r){const t=Fd(),{protocol:n,hostname:s}=new URL(t);if(r.startsWith("chrome-extension://")){const d=new URL(r);return d.hostname===""&&s===""?n==="chrome-extension:"&&r.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&d.hostname===s}if(!Iw.test(n))return!1;if(Rw.test(r))return s===r;const l=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+l+"|"+l+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nw=new zl(3e4,6e4);function Z_(){const r=li().___jsl;if(r?.H){for(const t of Object.keys(r.H))if(r.H[t].r=r.H[t].r||[],r.H[t].L=r.H[t].L||[],r.H[t].r=[...r.H[t].L],r.CP)for(let n=0;n<r.CP.length;n++)r.CP[n]=null}}function Ow(r){return new Promise((t,n)=>{function s(){Z_(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Z_(),n(oi(r,"network-request-failed"))},timeout:Nw.get()})}if(li().gapi?.iframes?.Iframe)t(gapi.iframes.getContext());else if(li().gapi?.load)s();else{const l=Ab("iframefcb");return li()[l]=()=>{gapi.load?s():n(oi(r,"network-request-failed"))},PE(`${Tb()}?onload=${l}`).catch(c=>n(c))}}).catch(t=>{throw Dc=null,t})}let Dc=null;function Vw(r){return Dc=Dc||Ow(r),Dc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mw=new zl(5e3,15e3),xw="__/auth/iframe",kw="emulator/auth/iframe",Pw={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Uw=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Lw(r){const t=r.config;pt(t.authDomain,r,"auth-domain-config-required");const n=t.emulator?vm(t,kw):`https://${r.config.authDomain}/${xw}`,s={apiKey:t.apiKey,appName:r.name,v:Wa},l=Uw.get(r.config.apiHost);l&&(s.eid=l);const c=r._getFrameworks();return c.length&&(s.fw=c.join(",")),`${n}?${Ll(s).slice(1)}`}async function zw(r){const t=await Vw(r),n=li().gapi;return pt(n,r,"internal-error"),t.open({where:document.body,url:Lw(r),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Pw,dontclear:!0},s=>new Promise(async(l,c)=>{await s.restyle({setHideOnLeave:!1});const d=oi(r,"network-request-failed"),g=li().setTimeout(()=>{c(d)},Mw.get());function p(){li().clearTimeout(g),l(s)}s.ping(p).then(p,()=>{c(d)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bw={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},qw=500,jw=600,Hw="_blank",Gw="http://localhost";class W_{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Fw(r,t,n,s=qw,l=jw){const c=Math.max((window.screen.availHeight-l)/2,0).toString(),d=Math.max((window.screen.availWidth-s)/2,0).toString();let g="";const p={...Bw,width:s.toString(),height:l.toString(),top:c,left:d},_=Ze().toLowerCase();n&&(g=DE(_)?Hw:n),IE(_)&&(t=t||Gw,p.scrollbars="yes");const A=Object.entries(p).reduce((D,[H,Z])=>`${D}${H}=${Z},`,"");if(fb(_)&&g!=="_self")return Qw(t||"",g),new W_(null);const I=window.open(t||"",g,A);pt(I,r,"popup-blocked");try{I.focus()}catch{}return new W_(I)}function Qw(r,t){const n=document.createElement("a");n.href=r,n.target=t;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kw="__/auth/handler",Yw="emulator/auth/handler",Xw=encodeURIComponent("fac");async function J_(r,t,n,s,l,c){pt(r.config.authDomain,r,"auth-domain-config-required"),pt(r.config.apiKey,r,"invalid-api-key");const d={apiKey:r.config.apiKey,appName:r.name,authType:n,redirectUrl:s,v:Wa,eventId:l};if(t instanceof zE){t.setDefaultLanguage(r.languageCode),d.providerId=t.providerId||"",VA(t.getCustomParameters())||(d.customParameters=JSON.stringify(t.getCustomParameters()));for(const[A,I]of Object.entries({}))d[A]=I}if(t instanceof ql){const A=t.getScopes().filter(I=>I!=="");A.length>0&&(d.scopes=A.join(","))}r.tenantId&&(d.tid=r.tenantId);const g=d;for(const A of Object.keys(g))g[A]===void 0&&delete g[A];const p=await r._getAppCheckToken(),_=p?`#${Xw}=${encodeURIComponent(p)}`:"";return`${$w(r)}?${Ll(g).slice(1)}${_}`}function $w({config:r}){return r.emulator?vm(r,Yw):`https://${r.authDomain}/${Kw}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xd="webStorageSupport";class Zw{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=QE,this._completeRedirectFn=Tw,this._overrideRedirectResult=_w}async _openPopup(t,n,s,l){Gi(this.eventManagers[t._key()]?.manager,"_initialize() not called before _openPopup()");const c=await J_(t,n,s,Fd(),l);return Fw(t,c,bm())}async _openRedirect(t,n,s,l){await this._originValidation(t);const c=await J_(t,n,s,Fd(),l);return tw(c),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:l,promise:c}=this.eventManagers[n];return l?Promise.resolve(l):(Gi(c,"If manager is not set, promise should be"),c)}const s=this.initAndGetManager(t);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(t){const n=await zw(t),s=new Sw(t);return n.register("authEvent",l=>(pt(l?.authEvent,t,"invalid-auth-event"),{status:s.onEvent(l.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:s},this.iframes[t._key()]=n,s}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(xd,{type:xd},l=>{const c=l?.[0]?.[xd];c!==void 0&&n(!!c),qn(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Cw(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return xE()||CE()||Tm()}}const Ww=Zw;var tv="@firebase/auth",ev="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jw{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(s=>{t(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){pt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tR(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function eR(r){Ha(new xs("auth",(t,{options:n})=>{const s=t.getProvider("app").getImmediate(),l=t.getProvider("heartbeat"),c=t.getProvider("app-check-internal"),{apiKey:d,authDomain:g}=s.options;pt(d&&!d.includes(":"),"invalid-api-key",{appName:s.name});const p={apiKey:d,authDomain:g,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:kE(r)},_=new _b(s,l,c,p);return Cb(_,n),_},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,s)=>{t.getProvider("auth-internal").initialize()})),Ha(new xs("auth-internal",t=>{const n=Ls(t.getProvider("auth").getImmediate());return(s=>new Jw(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Or(tv,ev,tR(r)),Or(tv,ev,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nR=300,iR=cE("authIdTokenMaxAge")||nR;let nv=null;const rR=r=>async t=>{const n=t&&await t.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>iR)return;const l=n?.token;nv!==l&&(nv=l,await fetch(r,{method:l?"POST":"DELETE",headers:l?{Authorization:`Bearer ${l}`}:{}}))};function sR(r=pE()){const t=ym(r,"auth");if(t.isInitialized())return t.getImmediate();const n=Ib(r,{popupRedirectResolver:Ww,persistence:[uw,Zb,QE]}),s=cE("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(s,location.origin);if(location.origin===c.origin){const d=rR(c.toString());Qb(n,d,()=>d(n.currentUser)),Fb(n,g=>d(g))}}const l=lE("auth");return l&&Db(n,`http://${l}`),n}function aR(){return document.getElementsByTagName("head")?.[0]??document}vb({loadJS(r){return new Promise((t,n)=>{const s=document.createElement("script");s.setAttribute("src",r),s.onload=t,s.onerror=l=>{const c=oi("internal-error");c.customData=l,n(c)},s.type="text/javascript",s.charset="UTF-8",aR().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});eR("Browser");var iv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Vr,JE;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(V,S){function w(){}w.prototype=S.prototype,V.D=S.prototype,V.prototype=new w,V.prototype.constructor=V,V.C=function(O,M,x){for(var R=Array(arguments.length-2),Ae=2;Ae<arguments.length;Ae++)R[Ae-2]=arguments[Ae];return S.prototype[M].apply(O,R)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(s,n),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function l(V,S,w){w||(w=0);var O=Array(16);if(typeof S=="string")for(var M=0;16>M;++M)O[M]=S.charCodeAt(w++)|S.charCodeAt(w++)<<8|S.charCodeAt(w++)<<16|S.charCodeAt(w++)<<24;else for(M=0;16>M;++M)O[M]=S[w++]|S[w++]<<8|S[w++]<<16|S[w++]<<24;S=V.g[0],w=V.g[1],M=V.g[2];var x=V.g[3],R=S+(x^w&(M^x))+O[0]+3614090360&4294967295;S=w+(R<<7&4294967295|R>>>25),R=x+(M^S&(w^M))+O[1]+3905402710&4294967295,x=S+(R<<12&4294967295|R>>>20),R=M+(w^x&(S^w))+O[2]+606105819&4294967295,M=x+(R<<17&4294967295|R>>>15),R=w+(S^M&(x^S))+O[3]+3250441966&4294967295,w=M+(R<<22&4294967295|R>>>10),R=S+(x^w&(M^x))+O[4]+4118548399&4294967295,S=w+(R<<7&4294967295|R>>>25),R=x+(M^S&(w^M))+O[5]+1200080426&4294967295,x=S+(R<<12&4294967295|R>>>20),R=M+(w^x&(S^w))+O[6]+2821735955&4294967295,M=x+(R<<17&4294967295|R>>>15),R=w+(S^M&(x^S))+O[7]+4249261313&4294967295,w=M+(R<<22&4294967295|R>>>10),R=S+(x^w&(M^x))+O[8]+1770035416&4294967295,S=w+(R<<7&4294967295|R>>>25),R=x+(M^S&(w^M))+O[9]+2336552879&4294967295,x=S+(R<<12&4294967295|R>>>20),R=M+(w^x&(S^w))+O[10]+4294925233&4294967295,M=x+(R<<17&4294967295|R>>>15),R=w+(S^M&(x^S))+O[11]+2304563134&4294967295,w=M+(R<<22&4294967295|R>>>10),R=S+(x^w&(M^x))+O[12]+1804603682&4294967295,S=w+(R<<7&4294967295|R>>>25),R=x+(M^S&(w^M))+O[13]+4254626195&4294967295,x=S+(R<<12&4294967295|R>>>20),R=M+(w^x&(S^w))+O[14]+2792965006&4294967295,M=x+(R<<17&4294967295|R>>>15),R=w+(S^M&(x^S))+O[15]+1236535329&4294967295,w=M+(R<<22&4294967295|R>>>10),R=S+(M^x&(w^M))+O[1]+4129170786&4294967295,S=w+(R<<5&4294967295|R>>>27),R=x+(w^M&(S^w))+O[6]+3225465664&4294967295,x=S+(R<<9&4294967295|R>>>23),R=M+(S^w&(x^S))+O[11]+643717713&4294967295,M=x+(R<<14&4294967295|R>>>18),R=w+(x^S&(M^x))+O[0]+3921069994&4294967295,w=M+(R<<20&4294967295|R>>>12),R=S+(M^x&(w^M))+O[5]+3593408605&4294967295,S=w+(R<<5&4294967295|R>>>27),R=x+(w^M&(S^w))+O[10]+38016083&4294967295,x=S+(R<<9&4294967295|R>>>23),R=M+(S^w&(x^S))+O[15]+3634488961&4294967295,M=x+(R<<14&4294967295|R>>>18),R=w+(x^S&(M^x))+O[4]+3889429448&4294967295,w=M+(R<<20&4294967295|R>>>12),R=S+(M^x&(w^M))+O[9]+568446438&4294967295,S=w+(R<<5&4294967295|R>>>27),R=x+(w^M&(S^w))+O[14]+3275163606&4294967295,x=S+(R<<9&4294967295|R>>>23),R=M+(S^w&(x^S))+O[3]+4107603335&4294967295,M=x+(R<<14&4294967295|R>>>18),R=w+(x^S&(M^x))+O[8]+1163531501&4294967295,w=M+(R<<20&4294967295|R>>>12),R=S+(M^x&(w^M))+O[13]+2850285829&4294967295,S=w+(R<<5&4294967295|R>>>27),R=x+(w^M&(S^w))+O[2]+4243563512&4294967295,x=S+(R<<9&4294967295|R>>>23),R=M+(S^w&(x^S))+O[7]+1735328473&4294967295,M=x+(R<<14&4294967295|R>>>18),R=w+(x^S&(M^x))+O[12]+2368359562&4294967295,w=M+(R<<20&4294967295|R>>>12),R=S+(w^M^x)+O[5]+4294588738&4294967295,S=w+(R<<4&4294967295|R>>>28),R=x+(S^w^M)+O[8]+2272392833&4294967295,x=S+(R<<11&4294967295|R>>>21),R=M+(x^S^w)+O[11]+1839030562&4294967295,M=x+(R<<16&4294967295|R>>>16),R=w+(M^x^S)+O[14]+4259657740&4294967295,w=M+(R<<23&4294967295|R>>>9),R=S+(w^M^x)+O[1]+2763975236&4294967295,S=w+(R<<4&4294967295|R>>>28),R=x+(S^w^M)+O[4]+1272893353&4294967295,x=S+(R<<11&4294967295|R>>>21),R=M+(x^S^w)+O[7]+4139469664&4294967295,M=x+(R<<16&4294967295|R>>>16),R=w+(M^x^S)+O[10]+3200236656&4294967295,w=M+(R<<23&4294967295|R>>>9),R=S+(w^M^x)+O[13]+681279174&4294967295,S=w+(R<<4&4294967295|R>>>28),R=x+(S^w^M)+O[0]+3936430074&4294967295,x=S+(R<<11&4294967295|R>>>21),R=M+(x^S^w)+O[3]+3572445317&4294967295,M=x+(R<<16&4294967295|R>>>16),R=w+(M^x^S)+O[6]+76029189&4294967295,w=M+(R<<23&4294967295|R>>>9),R=S+(w^M^x)+O[9]+3654602809&4294967295,S=w+(R<<4&4294967295|R>>>28),R=x+(S^w^M)+O[12]+3873151461&4294967295,x=S+(R<<11&4294967295|R>>>21),R=M+(x^S^w)+O[15]+530742520&4294967295,M=x+(R<<16&4294967295|R>>>16),R=w+(M^x^S)+O[2]+3299628645&4294967295,w=M+(R<<23&4294967295|R>>>9),R=S+(M^(w|~x))+O[0]+4096336452&4294967295,S=w+(R<<6&4294967295|R>>>26),R=x+(w^(S|~M))+O[7]+1126891415&4294967295,x=S+(R<<10&4294967295|R>>>22),R=M+(S^(x|~w))+O[14]+2878612391&4294967295,M=x+(R<<15&4294967295|R>>>17),R=w+(x^(M|~S))+O[5]+4237533241&4294967295,w=M+(R<<21&4294967295|R>>>11),R=S+(M^(w|~x))+O[12]+1700485571&4294967295,S=w+(R<<6&4294967295|R>>>26),R=x+(w^(S|~M))+O[3]+2399980690&4294967295,x=S+(R<<10&4294967295|R>>>22),R=M+(S^(x|~w))+O[10]+4293915773&4294967295,M=x+(R<<15&4294967295|R>>>17),R=w+(x^(M|~S))+O[1]+2240044497&4294967295,w=M+(R<<21&4294967295|R>>>11),R=S+(M^(w|~x))+O[8]+1873313359&4294967295,S=w+(R<<6&4294967295|R>>>26),R=x+(w^(S|~M))+O[15]+4264355552&4294967295,x=S+(R<<10&4294967295|R>>>22),R=M+(S^(x|~w))+O[6]+2734768916&4294967295,M=x+(R<<15&4294967295|R>>>17),R=w+(x^(M|~S))+O[13]+1309151649&4294967295,w=M+(R<<21&4294967295|R>>>11),R=S+(M^(w|~x))+O[4]+4149444226&4294967295,S=w+(R<<6&4294967295|R>>>26),R=x+(w^(S|~M))+O[11]+3174756917&4294967295,x=S+(R<<10&4294967295|R>>>22),R=M+(S^(x|~w))+O[2]+718787259&4294967295,M=x+(R<<15&4294967295|R>>>17),R=w+(x^(M|~S))+O[9]+3951481745&4294967295,V.g[0]=V.g[0]+S&4294967295,V.g[1]=V.g[1]+(M+(R<<21&4294967295|R>>>11))&4294967295,V.g[2]=V.g[2]+M&4294967295,V.g[3]=V.g[3]+x&4294967295}s.prototype.u=function(V,S){S===void 0&&(S=V.length);for(var w=S-this.blockSize,O=this.B,M=this.h,x=0;x<S;){if(M==0)for(;x<=w;)l(this,V,x),x+=this.blockSize;if(typeof V=="string"){for(;x<S;)if(O[M++]=V.charCodeAt(x++),M==this.blockSize){l(this,O),M=0;break}}else for(;x<S;)if(O[M++]=V[x++],M==this.blockSize){l(this,O),M=0;break}}this.h=M,this.o+=S},s.prototype.v=function(){var V=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);V[0]=128;for(var S=1;S<V.length-8;++S)V[S]=0;var w=8*this.o;for(S=V.length-8;S<V.length;++S)V[S]=w&255,w/=256;for(this.u(V),V=Array(16),S=w=0;4>S;++S)for(var O=0;32>O;O+=8)V[w++]=this.g[S]>>>O&255;return V};function c(V,S){var w=g;return Object.prototype.hasOwnProperty.call(w,V)?w[V]:w[V]=S(V)}function d(V,S){this.h=S;for(var w=[],O=!0,M=V.length-1;0<=M;M--){var x=V[M]|0;O&&x==S||(w[M]=x,O=!1)}this.g=w}var g={};function p(V){return-128<=V&&128>V?c(V,function(S){return new d([S|0],0>S?-1:0)}):new d([V|0],0>V?-1:0)}function _(V){if(isNaN(V)||!isFinite(V))return I;if(0>V)return W(_(-V));for(var S=[],w=1,O=0;V>=w;O++)S[O]=V/w|0,w*=4294967296;return new d(S,0)}function A(V,S){if(V.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(V.charAt(0)=="-")return W(A(V.substring(1),S));if(0<=V.indexOf("-"))throw Error('number format error: interior "-" character');for(var w=_(Math.pow(S,8)),O=I,M=0;M<V.length;M+=8){var x=Math.min(8,V.length-M),R=parseInt(V.substring(M,M+x),S);8>x?(x=_(Math.pow(S,x)),O=O.j(x).add(_(R))):(O=O.j(w),O=O.add(_(R)))}return O}var I=p(0),D=p(1),H=p(16777216);r=d.prototype,r.m=function(){if(nt(this))return-W(this).m();for(var V=0,S=1,w=0;w<this.g.length;w++){var O=this.i(w);V+=(0<=O?O:4294967296+O)*S,S*=4294967296}return V},r.toString=function(V){if(V=V||10,2>V||36<V)throw Error("radix out of range: "+V);if(Z(this))return"0";if(nt(this))return"-"+W(this).toString(V);for(var S=_(Math.pow(V,6)),w=this,O="";;){var M=Vt(w,S).g;w=vt(w,M.j(S));var x=((0<w.g.length?w.g[0]:w.h)>>>0).toString(V);if(w=M,Z(w))return x+O;for(;6>x.length;)x="0"+x;O=x+O}},r.i=function(V){return 0>V?0:V<this.g.length?this.g[V]:this.h};function Z(V){if(V.h!=0)return!1;for(var S=0;S<V.g.length;S++)if(V.g[S]!=0)return!1;return!0}function nt(V){return V.h==-1}r.l=function(V){return V=vt(this,V),nt(V)?-1:Z(V)?0:1};function W(V){for(var S=V.g.length,w=[],O=0;O<S;O++)w[O]=~V.g[O];return new d(w,~V.h).add(D)}r.abs=function(){return nt(this)?W(this):this},r.add=function(V){for(var S=Math.max(this.g.length,V.g.length),w=[],O=0,M=0;M<=S;M++){var x=O+(this.i(M)&65535)+(V.i(M)&65535),R=(x>>>16)+(this.i(M)>>>16)+(V.i(M)>>>16);O=R>>>16,x&=65535,R&=65535,w[M]=R<<16|x}return new d(w,w[w.length-1]&-2147483648?-1:0)};function vt(V,S){return V.add(W(S))}r.j=function(V){if(Z(this)||Z(V))return I;if(nt(this))return nt(V)?W(this).j(W(V)):W(W(this).j(V));if(nt(V))return W(this.j(W(V)));if(0>this.l(H)&&0>V.l(H))return _(this.m()*V.m());for(var S=this.g.length+V.g.length,w=[],O=0;O<2*S;O++)w[O]=0;for(O=0;O<this.g.length;O++)for(var M=0;M<V.g.length;M++){var x=this.i(O)>>>16,R=this.i(O)&65535,Ae=V.i(M)>>>16,ee=V.i(M)&65535;w[2*O+2*M]+=R*ee,dt(w,2*O+2*M),w[2*O+2*M+1]+=x*ee,dt(w,2*O+2*M+1),w[2*O+2*M+1]+=R*Ae,dt(w,2*O+2*M+1),w[2*O+2*M+2]+=x*Ae,dt(w,2*O+2*M+2)}for(O=0;O<S;O++)w[O]=w[2*O+1]<<16|w[2*O];for(O=S;O<2*S;O++)w[O]=0;return new d(w,0)};function dt(V,S){for(;(V[S]&65535)!=V[S];)V[S+1]+=V[S]>>>16,V[S]&=65535,S++}function ht(V,S){this.g=V,this.h=S}function Vt(V,S){if(Z(S))throw Error("division by zero");if(Z(V))return new ht(I,I);if(nt(V))return S=Vt(W(V),S),new ht(W(S.g),W(S.h));if(nt(S))return S=Vt(V,W(S)),new ht(W(S.g),S.h);if(30<V.g.length){if(nt(V)||nt(S))throw Error("slowDivide_ only works with positive integers.");for(var w=D,O=S;0>=O.l(V);)w=Et(w),O=Et(O);var M=Ut(w,1),x=Ut(O,1);for(O=Ut(O,2),w=Ut(w,2);!Z(O);){var R=x.add(O);0>=R.l(V)&&(M=M.add(w),x=R),O=Ut(O,1),w=Ut(w,1)}return S=vt(V,M.j(S)),new ht(M,S)}for(M=I;0<=V.l(S);){for(w=Math.max(1,Math.floor(V.m()/S.m())),O=Math.ceil(Math.log(w)/Math.LN2),O=48>=O?1:Math.pow(2,O-48),x=_(w),R=x.j(S);nt(R)||0<R.l(V);)w-=O,x=_(w),R=x.j(S);Z(x)&&(x=D),M=M.add(x),V=vt(V,R)}return new ht(M,V)}r.A=function(V){return Vt(this,V).h},r.and=function(V){for(var S=Math.max(this.g.length,V.g.length),w=[],O=0;O<S;O++)w[O]=this.i(O)&V.i(O);return new d(w,this.h&V.h)},r.or=function(V){for(var S=Math.max(this.g.length,V.g.length),w=[],O=0;O<S;O++)w[O]=this.i(O)|V.i(O);return new d(w,this.h|V.h)},r.xor=function(V){for(var S=Math.max(this.g.length,V.g.length),w=[],O=0;O<S;O++)w[O]=this.i(O)^V.i(O);return new d(w,this.h^V.h)};function Et(V){for(var S=V.g.length+1,w=[],O=0;O<S;O++)w[O]=V.i(O)<<1|V.i(O-1)>>>31;return new d(w,V.h)}function Ut(V,S){var w=S>>5;S%=32;for(var O=V.g.length-w,M=[],x=0;x<O;x++)M[x]=0<S?V.i(x+w)>>>S|V.i(x+w+1)<<32-S:V.i(x+w);return new d(M,V.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,JE=s,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.A,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=_,d.fromString=A,Vr=d}).apply(typeof iv<"u"?iv:typeof self<"u"?self:typeof window<"u"?window:{});var Tc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var tT,_l,eT,Nc,Xd,nT,iT,rT;(function(){var r,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,m,y){return u==Array.prototype||u==Object.prototype||(u[m]=y.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Tc=="object"&&Tc];for(var m=0;m<u.length;++m){var y=u[m];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var s=n(this);function l(u,m){if(m)t:{var y=s;u=u.split(".");for(var T=0;T<u.length-1;T++){var P=u[T];if(!(P in y))break t;y=y[P]}u=u[u.length-1],T=y[u],m=m(T),m!=T&&m!=null&&t(y,u,{configurable:!0,writable:!0,value:m})}}function c(u,m){u instanceof String&&(u+="");var y=0,T=!1,P={next:function(){if(!T&&y<u.length){var j=y++;return{value:m(j,u[j]),done:!1}}return T=!0,{done:!0,value:void 0}}};return P[Symbol.iterator]=function(){return P},P}l("Array.prototype.values",function(u){return u||function(){return c(this,function(m,y){return y})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var d=d||{},g=this||self;function p(u){var m=typeof u;return m=m!="object"?m:u?Array.isArray(u)?"array":m:"null",m=="array"||m=="object"&&typeof u.length=="number"}function _(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function A(u,m,y){return u.call.apply(u.bind,arguments)}function I(u,m,y){if(!u)throw Error();if(2<arguments.length){var T=Array.prototype.slice.call(arguments,2);return function(){var P=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(P,T),u.apply(m,P)}}return function(){return u.apply(m,arguments)}}function D(u,m,y){return D=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?A:I,D.apply(null,arguments)}function H(u,m){var y=Array.prototype.slice.call(arguments,1);return function(){var T=y.slice();return T.push.apply(T,arguments),u.apply(this,T)}}function Z(u,m){function y(){}y.prototype=m.prototype,u.aa=m.prototype,u.prototype=new y,u.prototype.constructor=u,u.Qb=function(T,P,j){for(var tt=Array(arguments.length-2),Mt=2;Mt<arguments.length;Mt++)tt[Mt-2]=arguments[Mt];return m.prototype[P].apply(T,tt)}}function nt(u){const m=u.length;if(0<m){const y=Array(m);for(let T=0;T<m;T++)y[T]=u[T];return y}return[]}function W(u,m){for(let y=1;y<arguments.length;y++){const T=arguments[y];if(p(T)){const P=u.length||0,j=T.length||0;u.length=P+j;for(let tt=0;tt<j;tt++)u[P+tt]=T[tt]}else u.push(T)}}class vt{constructor(m,y){this.i=m,this.j=y,this.h=0,this.g=null}get(){let m;return 0<this.h?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function dt(u){return/^[\s\xa0]*$/.test(u)}function ht(){var u=g.navigator;return u&&(u=u.userAgent)?u:""}function Vt(u){return Vt[" "](u),u}Vt[" "]=function(){};var Et=ht().indexOf("Gecko")!=-1&&!(ht().toLowerCase().indexOf("webkit")!=-1&&ht().indexOf("Edge")==-1)&&!(ht().indexOf("Trident")!=-1||ht().indexOf("MSIE")!=-1)&&ht().indexOf("Edge")==-1;function Ut(u,m,y){for(const T in u)m.call(y,u[T],T,u)}function V(u,m){for(const y in u)m.call(void 0,u[y],y,u)}function S(u){const m={};for(const y in u)m[y]=u[y];return m}const w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function O(u,m){let y,T;for(let P=1;P<arguments.length;P++){T=arguments[P];for(y in T)u[y]=T[y];for(let j=0;j<w.length;j++)y=w[j],Object.prototype.hasOwnProperty.call(T,y)&&(u[y]=T[y])}}function M(u){var m=1;u=u.split(":");const y=[];for(;0<m&&u.length;)y.push(u.shift()),m--;return u.length&&y.push(u.join(":")),y}function x(u){g.setTimeout(()=>{throw u},0)}function R(){var u=Lt;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class Ae{constructor(){this.h=this.g=null}add(m,y){const T=ee.get();T.set(m,y),this.h?this.h.next=T:this.g=T,this.h=T}}var ee=new vt(()=>new G,u=>u.reset());class G{constructor(){this.next=this.g=this.h=null}set(m,y){this.h=m,this.g=y,this.next=null}reset(){this.next=this.g=this.h=null}}let et,ot=!1,Lt=new Ae,C=()=>{const u=g.Promise.resolve(void 0);et=()=>{u.then(q)}};var q=()=>{for(var u;u=R();){try{u.h.call(u.g)}catch(y){x(y)}var m=ee;m.j(u),100>m.h&&(m.h++,u.next=m.g,m.g=u)}ot=!1};function J(){this.s=this.s,this.C=this.C}J.prototype.s=!1,J.prototype.ma=function(){this.s||(this.s=!0,this.N())},J.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function $(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}$.prototype.h=function(){this.defaultPrevented=!0};var at=(function(){if(!g.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const y=()=>{};g.addEventListener("test",y,m),g.removeEventListener("test",y,m)}catch{}return u})();function At(u,m){if($.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var y=this.type=u.type,T=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget){if(Et){t:{try{Vt(m.nodeName);var P=!0;break t}catch{}P=!1}P||(m=null)}}else y=="mouseover"?m=u.fromElement:y=="mouseout"&&(m=u.toElement);this.relatedTarget=m,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:ft[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&At.aa.h.call(this)}}Z(At,$);var ft={2:"touch",3:"pen",4:"mouse"};At.prototype.h=function(){At.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var re="closure_listenable_"+(1e6*Math.random()|0),Zt=0;function Hn(u,m,y,T,P){this.listener=u,this.proxy=null,this.src=m,this.type=y,this.capture=!!T,this.ha=P,this.key=++Zt,this.da=this.fa=!1}function Yi(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function mi(u){this.src=u,this.g={},this.h=0}mi.prototype.add=function(u,m,y,T,P){var j=u.toString();u=this.g[j],u||(u=this.g[j]=[],this.h++);var tt=Kr(u,m,T,P);return-1<tt?(m=u[tt],y||(m.fa=!1)):(m=new Hn(m,this.src,j,!!T,P),m.fa=y,u.push(m)),m};function Qr(u,m){var y=m.type;if(y in u.g){var T=u.g[y],P=Array.prototype.indexOf.call(T,m,void 0),j;(j=0<=P)&&Array.prototype.splice.call(T,P,1),j&&(Yi(m),u.g[y].length==0&&(delete u.g[y],u.h--))}}function Kr(u,m,y,T){for(var P=0;P<u.length;++P){var j=u[P];if(!j.da&&j.listener==m&&j.capture==!!y&&j.ha==T)return P}return-1}var Yr="closure_lm_"+(1e6*Math.random()|0),so={};function $l(u,m,y,T,P){if(Array.isArray(m)){for(var j=0;j<m.length;j++)$l(u,m[j],y,T,P);return null}return y=Zl(y),u&&u[re]?u.K(m,y,_(T)?!!T.capture:!1,P):_n(u,m,y,!1,T,P)}function _n(u,m,y,T,P,j){if(!m)throw Error("Invalid event type");var tt=_(P)?!!P.capture:!!P,Mt=js(u);if(Mt||(u[Yr]=Mt=new mi(u)),y=Mt.add(m,y,T,tt,j),y.proxy)return y;if(T=Th(),y.proxy=T,T.src=u,T.listener=y,u.addEventListener)at||(P=tt),P===void 0&&(P=!1),u.addEventListener(m.toString(),T,P);else if(u.attachEvent)u.attachEvent(Xr(m.toString()),T);else if(u.addListener&&u.removeListener)u.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return y}function Th(){function u(y){return m.call(u.src,u.listener,y)}const m=Ah;return u}function ao(u,m,y,T,P){if(Array.isArray(m))for(var j=0;j<m.length;j++)ao(u,m[j],y,T,P);else T=_(T)?!!T.capture:!!T,y=Zl(y),u&&u[re]?(u=u.i,m=String(m).toString(),m in u.g&&(j=u.g[m],y=Kr(j,y,T,P),-1<y&&(Yi(j[y]),Array.prototype.splice.call(j,y,1),j.length==0&&(delete u.g[m],u.h--)))):u&&(u=js(u))&&(m=u.g[m.toString()],u=-1,m&&(u=Kr(m,y,T,P)),(y=-1<u?m[u]:null)&&qs(y))}function qs(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[re])Qr(m.i,u);else{var y=u.type,T=u.proxy;m.removeEventListener?m.removeEventListener(y,T,u.capture):m.detachEvent?m.detachEvent(Xr(y),T):m.addListener&&m.removeListener&&m.removeListener(T),(y=js(m))?(Qr(y,u),y.h==0&&(y.src=null,m[Yr]=null)):Yi(u)}}}function Xr(u){return u in so?so[u]:so[u]="on"+u}function Ah(u,m){if(u.da)u=!0;else{m=new At(m,this);var y=u.listener,T=u.ha||u.src;u.fa&&qs(u),u=y.call(T,m)}return u}function js(u){return u=u[Yr],u instanceof mi?u:null}var oo="__closure_events_fn_"+(1e9*Math.random()>>>0);function Zl(u){return typeof u=="function"?u:(u[oo]||(u[oo]=function(m){return u.handleEvent(m)}),u[oo])}function oe(){J.call(this),this.i=new mi(this),this.M=this,this.F=null}Z(oe,J),oe.prototype[re]=!0,oe.prototype.removeEventListener=function(u,m,y,T){ao(this,u,m,y,T)};function Ht(u,m){var y,T=u.F;if(T)for(y=[];T;T=T.F)y.push(T);if(u=u.M,T=m.type||m,typeof m=="string")m=new $(m,u);else if(m instanceof $)m.target=m.target||u;else{var P=m;m=new $(T,u),O(m,P)}if(P=!0,y)for(var j=y.length-1;0<=j;j--){var tt=m.g=y[j];P=ln(tt,T,!0,m)&&P}if(tt=m.g=u,P=ln(tt,T,!0,m)&&P,P=ln(tt,T,!1,m)&&P,y)for(j=0;j<y.length;j++)tt=m.g=y[j],P=ln(tt,T,!1,m)&&P}oe.prototype.N=function(){if(oe.aa.N.call(this),this.i){var u=this.i,m;for(m in u.g){for(var y=u.g[m],T=0;T<y.length;T++)Yi(y[T]);delete u.g[m],u.h--}}this.F=null},oe.prototype.K=function(u,m,y,T){return this.i.add(String(u),m,!1,y,T)},oe.prototype.L=function(u,m,y,T){return this.i.add(String(u),m,!0,y,T)};function ln(u,m,y,T){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();for(var P=!0,j=0;j<m.length;++j){var tt=m[j];if(tt&&!tt.da&&tt.capture==y){var Mt=tt.listener,be=tt.ha||tt.src;tt.fa&&Qr(u.i,tt),P=Mt.call(be,T)!==!1&&P}}return P&&!T.defaultPrevented}function Fe(u,m,y){if(typeof u=="function")y&&(u=D(u,y));else if(u&&typeof u.handleEvent=="function")u=D(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(m)?-1:g.setTimeout(u,m||0)}function Wl(u){u.g=Fe(()=>{u.g=null,u.i&&(u.i=!1,Wl(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class Sh extends J{constructor(m,y){super(),this.m=m,this.l=y,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:Wl(this)}N(){super.N(),this.g&&(g.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function $r(u){J.call(this),this.h=u,this.g={}}Z($r,J);var Zr=[];function Wr(u){Ut(u.g,function(m,y){this.g.hasOwnProperty(y)&&qs(m)},u),u.g={}}$r.prototype.N=function(){$r.aa.N.call(this),Wr(this)},$r.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Mn=g.JSON.stringify,Hs=g.JSON.parse,Jr=class{stringify(u){return g.JSON.stringify(u,void 0)}parse(u){return g.JSON.parse(u,void 0)}};function lo(){}lo.prototype.h=null;function uo(u){return u.h||(u.h=u.i())}function co(){}var gi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function pi(){$.call(this,"d")}Z(pi,$);function ho(){$.call(this,"c")}Z(ho,$);var Gn={},fo=null;function Xi(){return fo=fo||new oe}Gn.La="serverreachability";function Gs(u){$.call(this,Gn.La,u)}Z(Gs,$);function $i(u){const m=Xi();Ht(m,new Gs(m))}Gn.STAT_EVENT="statevent";function Jl(u,m){$.call(this,Gn.STAT_EVENT,u),this.stat=m}Z(Jl,$);function ne(u){const m=Xi();Ht(m,new Jl(m,u))}Gn.Ma="timingevent";function Se(u,m){$.call(this,Gn.Ma,u),this.size=m}Z(Se,$);function me(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return g.setTimeout(function(){u()},m)}function vn(){this.g=!0}vn.prototype.xa=function(){this.g=!1};function mo(u,m,y,T,P,j){u.info(function(){if(u.g)if(j)for(var tt="",Mt=j.split("&"),be=0;be<Mt.length;be++){var xt=Mt[be].split("=");if(1<xt.length){var Oe=xt[0];xt=xt[1];var we=Oe.split("_");tt=2<=we.length&&we[1]=="type"?tt+(Oe+"="+xt+"&"):tt+(Oe+"=redacted&")}}else tt=null;else tt=j;return"XMLHTTP REQ ("+T+") [attempt "+P+"]: "+m+`
`+y+`
`+tt})}function bh(u,m,y,T,P,j,tt){u.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+P+"]: "+m+`
`+y+`
`+j+" "+tt})}function Zi(u,m,y,T){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+ts(u,y)+(T?" "+T:"")})}function tu(u,m){u.info(function(){return"TIMEOUT: "+m})}vn.prototype.info=function(){};function ts(u,m){if(!u.g)return m;if(!m)return null;try{var y=JSON.parse(m);if(y){for(u=0;u<y.length;u++)if(Array.isArray(y[u])){var T=y[u];if(!(2>T.length)){var P=T[1];if(Array.isArray(P)&&!(1>P.length)){var j=P[0];if(j!="noop"&&j!="stop"&&j!="close")for(var tt=1;tt<P.length;tt++)P[tt]=""}}}}return Mn(y)}catch{return m}}var Wi={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},yi={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Fn;function Qn(){}Z(Qn,lo),Qn.prototype.g=function(){return new XMLHttpRequest},Qn.prototype.i=function(){return{}},Fn=new Qn;function We(u,m,y,T){this.j=u,this.i=m,this.l=y,this.R=T||1,this.U=new $r(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ce}function ce(){this.i=null,this.g="",this.h=!1}var go={},Fs={};function xn(u,m,y){u.L=1,u.v=ss(un(m)),u.m=y,u.P=!0,_i(u,null)}function _i(u,m){u.F=Date.now(),es(u),u.A=un(u.v);var y=u.A,T=u.R;Array.isArray(T)||(T=[String(T)]),To(y.i,"t",T),u.C=0,y=u.j.J,u.h=new ce,u.g=pu(u.j,y?m:null,!u.m),0<u.O&&(u.M=new Sh(D(u.Y,u,u.g),u.O)),m=u.U,y=u.g,T=u.ca;var P="readystatechange";Array.isArray(P)||(P&&(Zr[0]=P.toString()),P=Zr);for(var j=0;j<P.length;j++){var tt=$l(y,P[j],T||m.handleEvent,!1,m.h||m);if(!tt)break;m.g[tt.key]=tt}m=u.H?S(u.H):{},u.m?(u.u||(u.u="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,m)):(u.u="GET",u.g.ea(u.A,u.u,null,m)),$i(),mo(u.i,u.u,u.A,u.l,u.R,u.m)}We.prototype.ca=function(u){u=u.target;const m=this.M;m&&Sn(u)==3?m.j():this.Y(u)},We.prototype.Y=function(u){try{if(u==this.g)t:{const we=Sn(this.g);var m=this.g.Ba();const Ri=this.g.Z();if(!(3>we)&&(we!=3||this.g&&(this.h.h||this.g.oa()||lu(this.g)))){this.J||we!=4||m==7||(m==8||0>=Ri?$i(3):$i(2)),Ji(this);var y=this.g.Z();this.X=y;e:if(eu(this)){var T=lu(this.g);u="";var P=T.length,j=Sn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Pe(this),Kn(this);var tt="";break e}this.h.i=new g.TextDecoder}for(m=0;m<P;m++)this.h.h=!0,u+=this.h.i.decode(T[m],{stream:!(j&&m==P-1)});T.length=0,this.h.g+=u,this.C=0,tt=this.h.g}else tt=this.g.oa();if(this.o=y==200,bh(this.i,this.u,this.A,this.l,this.R,we,y),this.o){if(this.T&&!this.K){e:{if(this.g){var Mt,be=this.g;if((Mt=be.g?be.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!dt(Mt)){var xt=Mt;break e}}xt=null}if(y=xt)Zi(this.i,this.l,y,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ns(this,y);else{this.o=!1,this.s=3,ne(12),Pe(this),Kn(this);break t}}if(this.P){y=!0;let Ue;for(;!this.J&&this.C<tt.length;)if(Ue=nu(this,tt),Ue==Fs){we==4&&(this.s=4,ne(14),y=!1),Zi(this.i,this.l,null,"[Incomplete Response]");break}else if(Ue==go){this.s=4,ne(15),Zi(this.i,this.l,tt,"[Invalid Chunk]"),y=!1;break}else Zi(this.i,this.l,Ue,null),ns(this,Ue);if(eu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),we!=4||tt.length!=0||this.h.h||(this.s=1,ne(16),y=!1),this.o=this.o&&y,!y)Zi(this.i,this.l,tt,"[Invalid Chunked Response]"),Pe(this),Kn(this);else if(0<tt.length&&!this.W){this.W=!0;var Oe=this.j;Oe.g==this&&Oe.ba&&!Oe.M&&(Oe.j.info("Great, no buffering proxy detected. Bytes received: "+tt.length),ds(Oe),Oe.M=!0,ne(11))}}else Zi(this.i,this.l,tt,null),ns(this,tt);we==4&&Pe(this),this.o&&!this.J&&(we==4?du(this.j,this):(this.o=!1,es(this)))}else Dh(this.g),y==400&&0<tt.indexOf("Unknown SID")?(this.s=3,ne(12)):(this.s=0,ne(13)),Pe(this),Kn(this)}}}catch{}finally{}};function eu(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function nu(u,m){var y=u.C,T=m.indexOf(`
`,y);return T==-1?Fs:(y=Number(m.substring(y,T)),isNaN(y)?go:(T+=1,T+y>m.length?Fs:(m=m.slice(T,T+y),u.C=T+y,m)))}We.prototype.cancel=function(){this.J=!0,Pe(this)};function es(u){u.S=Date.now()+u.I,iu(u,u.I)}function iu(u,m){if(u.B!=null)throw Error("WatchDog timer not null");u.B=me(D(u.ba,u),m)}function Ji(u){u.B&&(g.clearTimeout(u.B),u.B=null)}We.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(tu(this.i,this.A),this.L!=2&&($i(),ne(17)),Pe(this),this.s=2,Kn(this)):iu(this,this.S-u)};function Kn(u){u.j.G==0||u.J||du(u.j,u)}function Pe(u){Ji(u);var m=u.M;m&&typeof m.ma=="function"&&m.ma(),u.M=null,Wr(u.U),u.g&&(m=u.g,u.g=null,m.abort(),m.ma())}function ns(u,m){try{var y=u.j;if(y.G!=0&&(y.g==u||po(y.h,u))){if(!u.K&&po(y.h,u)&&y.G==3){try{var T=y.Da.g.parse(m)}catch{T=null}if(Array.isArray(T)&&T.length==3){var P=T;if(P[0]==0){t:if(!y.u){if(y.g)if(y.g.F+3e3<u.F)ia(y),ea(y);else break t;Ro(y),ne(18)}}else y.za=P[1],0<y.za-y.T&&37500>P[2]&&y.F&&y.v==0&&!y.C&&(y.C=me(D(y.Za,y),6e3));if(1>=Ks(y.h)&&y.ca){try{y.ca()}catch{}y.ca=void 0}}else wi(y,11)}else if((u.K||y.g==u)&&ia(y),!dt(m))for(P=y.Da.g.parse(m),m=0;m<P.length;m++){let xt=P[m];if(y.T=xt[0],xt=xt[1],y.G==2)if(xt[0]=="c"){y.K=xt[1],y.ia=xt[2];const Oe=xt[3];Oe!=null&&(y.la=Oe,y.j.info("VER="+y.la));const we=xt[4];we!=null&&(y.Aa=we,y.j.info("SVER="+y.Aa));const Ri=xt[5];Ri!=null&&typeof Ri=="number"&&0<Ri&&(T=1.5*Ri,y.L=T,y.j.info("backChannelRequestTimeoutMs_="+T)),T=y;const Ue=u.g;if(Ue){const ti=Ue.g?Ue.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ti){var j=T.h;j.g||ti.indexOf("spdy")==-1&&ti.indexOf("quic")==-1&&ti.indexOf("h2")==-1||(j.j=j.l,j.g=new Set,j.h&&(Ys(j,j.h),j.h=null))}if(T.D){const Co=Ue.g?Ue.g.getResponseHeader("X-HTTP-Session-Id"):null;Co&&(T.ya=Co,Qt(T.I,T.D,Co))}}y.G=3,y.l&&y.l.ua(),y.ba&&(y.R=Date.now()-u.F,y.j.info("Handshake RTT: "+y.R+"ms")),T=y;var tt=u;if(T.qa=gu(T,T.J?T.ia:null,T.W),tt.K){Je(T.h,tt);var Mt=tt,be=T.L;be&&(Mt.I=be),Mt.B&&(Ji(Mt),es(Mt)),T.g=tt}else hu(T);0<y.i.length&&na(y)}else xt[0]!="stop"&&xt[0]!="close"||wi(y,7);else y.G==3&&(xt[0]=="stop"||xt[0]=="close"?xt[0]=="stop"?wi(y,7):bo(y):xt[0]!="noop"&&y.l&&y.l.ta(xt),y.v=0)}}$i(4)}catch{}}var ru=class{constructor(u,m){this.g=u,this.map=m}};function vi(u){this.l=u||10,g.PerformanceNavigationTiming?(u=g.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(g.chrome&&g.chrome.loadTimes&&g.chrome.loadTimes()&&g.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Qs(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Ks(u){return u.h?1:u.g?u.g.size:0}function po(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function Ys(u,m){u.g?u.g.add(m):u.h=m}function Je(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}vi.prototype.cancel=function(){if(this.i=yo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function yo(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const y of u.g.values())m=m.concat(y.D);return m}return nt(u.i)}function wh(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(p(u)){for(var m=[],y=u.length,T=0;T<y;T++)m.push(u[T]);return m}m=[],y=0;for(T in u)m[y++]=u[T];return m}function Xs(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(p(u)||typeof u=="string"){var m=[];u=u.length;for(var y=0;y<u;y++)m.push(y);return m}m=[],y=0;for(const T in u)m[y++]=T;return m}}}function _o(u,m){if(u.forEach&&typeof u.forEach=="function")u.forEach(m,void 0);else if(p(u)||typeof u=="string")Array.prototype.forEach.call(u,m,void 0);else for(var y=Xs(u),T=wh(u),P=T.length,j=0;j<P;j++)m.call(void 0,T[j],y&&y[j],u)}var is=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Rh(u,m){if(u){u=u.split("&");for(var y=0;y<u.length;y++){var T=u[y].indexOf("="),P=null;if(0<=T){var j=u[y].substring(0,T);P=u[y].substring(T+1)}else j=u[y];m(j,P?decodeURIComponent(P.replace(/\+/g," ")):"")}}}function ge(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof ge){this.h=u.h,rs(this,u.j),this.o=u.o,this.g=u.g,tr(this,u.s),this.l=u.l;var m=u.i,y=new Ti;y.i=m.i,m.g&&(y.g=new Map(m.g),y.h=m.h),Ei(this,y),this.m=u.m}else u&&(m=String(u).match(is))?(this.h=!1,rs(this,m[1]||"",!0),this.o=En(m[2]||""),this.g=En(m[3]||"",!0),tr(this,m[4]),this.l=En(m[5]||"",!0),Ei(this,m[6]||"",!0),this.m=En(m[7]||"")):(this.h=!1,this.i=new Ti(null,this.h))}ge.prototype.toString=function(){var u=[],m=this.j;m&&u.push(as(m,vo,!0),":");var y=this.g;return(y||m=="file")&&(u.push("//"),(m=this.o)&&u.push(as(m,vo,!0),"@"),u.push(encodeURIComponent(String(y)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y=this.s,y!=null&&u.push(":",String(y))),(y=this.l)&&(this.g&&y.charAt(0)!="/"&&u.push("/"),u.push(as(y,y.charAt(0)=="/"?Ih:Eo,!0))),(y=this.i.toString())&&u.push("?",y),(y=this.m)&&u.push("#",as(y,$s)),u.join("")};function un(u){return new ge(u)}function rs(u,m,y){u.j=y?En(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function tr(u,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);u.s=m}else u.s=null}function Ei(u,m,y){m instanceof Ti?(u.i=m,au(u.i,u.h)):(y||(m=as(m,Ch)),u.i=new Ti(m,u.h))}function Qt(u,m,y){u.i.set(m,y)}function ss(u){return Qt(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function En(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function as(u,m,y){return typeof u=="string"?(u=encodeURI(u).replace(m,su),y&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function su(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var vo=/[#\/\?@]/g,Eo=/[#\?:]/g,Ih=/[#\?]/g,Ch=/[#\?@]/g,$s=/#/g;function Ti(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function Tn(u){u.g||(u.g=new Map,u.h=0,u.i&&Rh(u.i,function(m,y){u.add(decodeURIComponent(m.replace(/\+/g," ")),y)}))}r=Ti.prototype,r.add=function(u,m){Tn(this),this.i=null,u=Yn(this,u);var y=this.g.get(u);return y||this.g.set(u,y=[]),y.push(m),this.h+=1,this};function Ai(u,m){Tn(u),m=Yn(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function Si(u,m){return Tn(u),m=Yn(u,m),u.g.has(m)}r.forEach=function(u,m){Tn(this),this.g.forEach(function(y,T){y.forEach(function(P){u.call(m,P,T,this)},this)},this)},r.na=function(){Tn(this);const u=Array.from(this.g.values()),m=Array.from(this.g.keys()),y=[];for(let T=0;T<m.length;T++){const P=u[T];for(let j=0;j<P.length;j++)y.push(m[T])}return y},r.V=function(u){Tn(this);let m=[];if(typeof u=="string")Si(this,u)&&(m=m.concat(this.g.get(Yn(this,u))));else{u=Array.from(this.g.values());for(let y=0;y<u.length;y++)m=m.concat(u[y])}return m},r.set=function(u,m){return Tn(this),this.i=null,u=Yn(this,u),Si(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},r.get=function(u,m){return u?(u=this.V(u),0<u.length?String(u[0]):m):m};function To(u,m,y){Ai(u,m),0<y.length&&(u.i=null,u.g.set(Yn(u,m),nt(y)),u.h+=y.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(var y=0;y<m.length;y++){var T=m[y];const j=encodeURIComponent(String(T)),tt=this.V(T);for(T=0;T<tt.length;T++){var P=j;tt[T]!==""&&(P+="="+encodeURIComponent(String(tt[T]))),u.push(P)}}return this.i=u.join("&")};function Yn(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function au(u,m){m&&!u.j&&(Tn(u),u.i=null,u.g.forEach(function(y,T){var P=T.toLowerCase();T!=P&&(Ai(this,T),To(this,P,y))},u)),u.j=m}function os(u,m){const y=new vn;if(g.Image){const T=new Image;T.onload=H(An,y,"TestLoadImage: loaded",!0,m,T),T.onerror=H(An,y,"TestLoadImage: error",!1,m,T),T.onabort=H(An,y,"TestLoadImage: abort",!1,m,T),T.ontimeout=H(An,y,"TestLoadImage: timeout",!1,m,T),g.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=u}else m(!1)}function kn(u,m){const y=new vn,T=new AbortController,P=setTimeout(()=>{T.abort(),An(y,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:T.signal}).then(j=>{clearTimeout(P),j.ok?An(y,"TestPingServer: ok",!0,m):An(y,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(P),An(y,"TestPingServer: error",!1,m)})}function An(u,m,y,T,P){try{P&&(P.onload=null,P.onerror=null,P.onabort=null,P.ontimeout=null),T(y)}catch{}}function ls(){this.g=new Jr}function Xn(u,m,y){const T=y||"";try{_o(u,function(P,j){let tt=P;_(P)&&(tt=Mn(P)),m.push(T+j+"="+encodeURIComponent(tt))})}catch(P){throw m.push(T+"type="+encodeURIComponent("_badmap")),P}}function er(u){this.l=u.Ub||null,this.j=u.eb||!1}Z(er,lo),er.prototype.g=function(){return new bi(this.l,this.j)},er.prototype.i=(function(u){return function(){return u}})({});function bi(u,m){oe.call(this),this.D=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}Z(bi,oe),r=bi.prototype,r.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=m,this.readyState=1,Zn(this)},r.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const m={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(m.body=u),(this.D||g).fetch(new Request(this.A,m)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,$n(this)),this.readyState=0},r.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Zn(this)),this.g&&(this.readyState=3,Zn(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof g.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ao(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function Ao(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}r.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.v.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?$n(this):Zn(this),this.readyState==3&&Ao(this)}},r.Ra=function(u){this.g&&(this.response=this.responseText=u,$n(this))},r.Qa=function(u){this.g&&(this.response=u,$n(this))},r.ga=function(){this.g&&$n(this)};function $n(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Zn(u)}r.setRequestHeader=function(u,m){this.u.append(u,m)},r.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var y=m.next();!y.done;)y=y.value,u.push(y[0]+": "+y[1]),y=m.next();return u.join(`\r
`)};function Zn(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(bi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function So(u){let m="";return Ut(u,function(y,T){m+=T,m+=":",m+=y,m+=`\r
`}),m}function Ne(u,m,y){t:{for(T in y){var T=!1;break t}T=!0}T||(y=So(y),typeof u=="string"?y!=null&&encodeURIComponent(String(y)):Qt(u,m,y))}function qt(u){oe.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}Z(qt,oe);var Zs=/^https?$/i,us=["POST","PUT"];r=qt.prototype,r.Ha=function(u){this.J=u},r.ea=function(u,m,y,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Fn.g(),this.v=this.o?uo(this.o):uo(Fn),this.g.onreadystatechange=D(this.Ea,this);try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch(j){ou(this,j);return}if(u=y||"",y=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var P in T)y.set(P,T[P]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const j of T.keys())y.set(j,T.get(j));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(y.keys()).find(j=>j.toLowerCase()=="content-type"),P=g.FormData&&u instanceof g.FormData,!(0<=Array.prototype.indexOf.call(us,m,void 0))||T||P||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[j,tt]of y)this.g.setRequestHeader(j,tt);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{cs(this),this.u=!0,this.g.send(u),this.u=!1}catch(j){ou(this,j)}};function ou(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.m=5,Ws(u),Wn(u)}function Ws(u){u.A||(u.A=!0,Ht(u,"complete"),Ht(u,"error"))}r.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,Ht(this,"complete"),Ht(this,"abort"),Wn(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Wn(this,!0)),qt.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?Js(this):this.bb())},r.bb=function(){Js(this)};function Js(u){if(u.h&&typeof d<"u"&&(!u.v[1]||Sn(u)!=4||u.Z()!=2)){if(u.u&&Sn(u)==4)Fe(u.Ea,0,u);else if(Ht(u,"readystatechange"),Sn(u)==4){u.h=!1;try{const tt=u.Z();t:switch(tt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break t;default:m=!1}var y;if(!(y=m)){var T;if(T=tt===0){var P=String(u.D).match(is)[1]||null;!P&&g.self&&g.self.location&&(P=g.self.location.protocol.slice(0,-1)),T=!Zs.test(P?P.toLowerCase():"")}y=T}if(y)Ht(u,"complete"),Ht(u,"success");else{u.m=6;try{var j=2<Sn(u)?u.g.statusText:""}catch{j=""}u.l=j+" ["+u.Z()+"]",Ws(u)}}finally{Wn(u)}}}}function Wn(u,m){if(u.g){cs(u);const y=u.g,T=u.v[0]?()=>{}:null;u.g=null,u.v=null,m||Ht(u,"ready");try{y.onreadystatechange=T}catch{}}}function cs(u){u.I&&(g.clearTimeout(u.I),u.I=null)}r.isActive=function(){return!!this.g};function Sn(u){return u.g?u.g.readyState:0}r.Z=function(){try{return 2<Sn(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),Hs(m)}};function lu(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Dh(u){const m={};u=(u.g&&2<=Sn(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<u.length;T++){if(dt(u[T]))continue;var y=M(u[T]);const P=y[0];if(y=y[1],typeof y!="string")continue;y=y.trim();const j=m[P]||[];m[P]=j,j.push(y)}V(m,function(T){return T.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function hs(u,m,y){return y&&y.internalChannelParams&&y.internalChannelParams[u]||m}function ta(u){this.Aa=0,this.i=[],this.j=new vn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=hs("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=hs("baseRetryDelayMs",5e3,u),this.cb=hs("retryDelaySeedMs",1e4,u),this.Wa=hs("forwardChannelMaxRetries",2,u),this.wa=hs("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new vi(u&&u.concurrentRequestLimit),this.Da=new ls,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=ta.prototype,r.la=8,r.G=1,r.connect=function(u,m,y,T){ne(0),this.W=u,this.H=m||{},y&&T!==void 0&&(this.H.OSID=y,this.H.OAID=T),this.F=this.X,this.I=gu(this,null,this.W),na(this)};function bo(u){if(uu(u),u.G==3){var m=u.U++,y=un(u.I);if(Qt(y,"SID",u.K),Qt(y,"RID",m),Qt(y,"TYPE","terminate"),fs(u,y),m=new We(u,u.j,m),m.L=2,m.v=ss(un(y)),y=!1,g.navigator&&g.navigator.sendBeacon)try{y=g.navigator.sendBeacon(m.v.toString(),"")}catch{}!y&&g.Image&&(new Image().src=m.v,y=!0),y||(m.g=pu(m.j,null),m.g.ea(m.v)),m.F=Date.now(),es(m)}mu(u)}function ea(u){u.g&&(ds(u),u.g.cancel(),u.g=null)}function uu(u){ea(u),u.u&&(g.clearTimeout(u.u),u.u=null),ia(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&g.clearTimeout(u.s),u.s=null)}function na(u){if(!Qs(u.h)&&!u.s){u.s=!0;var m=u.Ga;et||C(),ot||(et(),ot=!0),Lt.add(m,u),u.B=0}}function Nh(u,m){return Ks(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=m.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=me(D(u.Ga,u,m),Io(u,u.B)),u.B++,!0)}r.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const P=new We(this,this.j,u);let j=this.o;if(this.S&&(j?(j=S(j),O(j,this.S)):j=this.S),this.m!==null||this.O||(P.H=j,j=null),this.P)t:{for(var m=0,y=0;y<this.i.length;y++){e:{var T=this.i[y];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break e}T=void 0}if(T===void 0)break;if(m+=T,4096<m){m=y;break t}if(m===4096||y===this.i.length-1){m=y+1;break t}}m=1e3}else m=1e3;m=cu(this,P,m),y=un(this.I),Qt(y,"RID",u),Qt(y,"CVER",22),this.D&&Qt(y,"X-HTTP-Session-Id",this.D),fs(this,y),j&&(this.O?m="headers="+encodeURIComponent(String(So(j)))+"&"+m:this.m&&Ne(y,this.m,j)),Ys(this.h,P),this.Ua&&Qt(y,"TYPE","init"),this.P?(Qt(y,"$req",m),Qt(y,"SID","null"),P.T=!0,xn(P,y,null)):xn(P,y,m),this.G=2}}else this.G==3&&(u?wo(this,u):this.i.length==0||Qs(this.h)||wo(this))};function wo(u,m){var y;m?y=m.l:y=u.U++;const T=un(u.I);Qt(T,"SID",u.K),Qt(T,"RID",y),Qt(T,"AID",u.T),fs(u,T),u.m&&u.o&&Ne(T,u.m,u.o),y=new We(u,u.j,y,u.B+1),u.m===null&&(y.H=u.o),m&&(u.i=m.D.concat(u.i)),m=cu(u,y,1e3),y.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Ys(u.h,y),xn(y,T,m)}function fs(u,m){u.H&&Ut(u.H,function(y,T){Qt(m,T,y)}),u.l&&_o({},function(y,T){Qt(m,T,y)})}function cu(u,m,y){y=Math.min(u.i.length,y);var T=u.l?D(u.l.Na,u.l,u):null;t:{var P=u.i;let j=-1;for(;;){const tt=["count="+y];j==-1?0<y?(j=P[0].g,tt.push("ofs="+j)):j=0:tt.push("ofs="+j);let Mt=!0;for(let be=0;be<y;be++){let xt=P[be].g;const Oe=P[be].map;if(xt-=j,0>xt)j=Math.max(0,P[be].g-100),Mt=!1;else try{Xn(Oe,tt,"req"+xt+"_")}catch{T&&T(Oe)}}if(Mt){T=tt.join("&");break t}}}return u=u.i.splice(0,y),m.D=u,T}function hu(u){if(!u.g&&!u.u){u.Y=1;var m=u.Fa;et||C(),ot||(et(),ot=!0),Lt.add(m,u),u.v=0}}function Ro(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=me(D(u.Fa,u),Io(u,u.v)),u.v++,!0)}r.Fa=function(){if(this.u=null,fu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=me(D(this.ab,this),u)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ne(10),ea(this),fu(this))};function ds(u){u.A!=null&&(g.clearTimeout(u.A),u.A=null)}function fu(u){u.g=new We(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var m=un(u.qa);Qt(m,"RID","rpc"),Qt(m,"SID",u.K),Qt(m,"AID",u.T),Qt(m,"CI",u.F?"0":"1"),!u.F&&u.ja&&Qt(m,"TO",u.ja),Qt(m,"TYPE","xmlhttp"),fs(u,m),u.m&&u.o&&Ne(m,u.m,u.o),u.L&&(u.g.I=u.L);var y=u.g;u=u.ia,y.L=1,y.v=ss(un(m)),y.m=null,y.P=!0,_i(y,u)}r.Za=function(){this.C!=null&&(this.C=null,ea(this),Ro(this),ne(19))};function ia(u){u.C!=null&&(g.clearTimeout(u.C),u.C=null)}function du(u,m){var y=null;if(u.g==m){ia(u),ds(u),u.g=null;var T=2}else if(po(u.h,m))y=m.D,Je(u.h,m),T=1;else return;if(u.G!=0){if(m.o)if(T==1){y=m.m?m.m.length:0,m=Date.now()-m.F;var P=u.B;T=Xi(),Ht(T,new Se(T,y)),na(u)}else hu(u);else if(P=m.s,P==3||P==0&&0<m.X||!(T==1&&Nh(u,m)||T==2&&Ro(u)))switch(y&&0<y.length&&(m=u.h,m.i=m.i.concat(y)),P){case 1:wi(u,5);break;case 4:wi(u,10);break;case 3:wi(u,6);break;default:wi(u,2)}}}function Io(u,m){let y=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(y*=2),y*m}function wi(u,m){if(u.j.info("Error code "+m),m==2){var y=D(u.fb,u),T=u.Xa;const P=!T;T=new ge(T||"//www.google.com/images/cleardot.gif"),g.location&&g.location.protocol=="http"||rs(T,"https"),ss(T),P?os(T.toString(),y):kn(T.toString(),y)}else ne(2);u.G=0,u.l&&u.l.sa(m),mu(u),uu(u)}r.fb=function(u){u?(this.j.info("Successfully pinged google.com"),ne(2)):(this.j.info("Failed to ping google.com"),ne(1))};function mu(u){if(u.G=0,u.ka=[],u.l){const m=yo(u.h);(m.length!=0||u.i.length!=0)&&(W(u.ka,m),W(u.ka,u.i),u.h.i.length=0,nt(u.i),u.i.length=0),u.l.ra()}}function gu(u,m,y){var T=y instanceof ge?un(y):new ge(y);if(T.g!="")m&&(T.g=m+"."+T.g),tr(T,T.s);else{var P=g.location;T=P.protocol,m=m?m+"."+P.hostname:P.hostname,P=+P.port;var j=new ge(null);T&&rs(j,T),m&&(j.g=m),P&&tr(j,P),y&&(j.l=y),T=j}return y=u.D,m=u.ya,y&&m&&Qt(T,y,m),Qt(T,"VER",u.la),fs(u,T),T}function pu(u,m,y){if(m&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Ca&&!u.pa?new qt(new er({eb:y})):new qt(u.pa),m.Ha(u.J),m}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function yu(){}r=yu.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function ra(){}ra.prototype.g=function(u,m){return new tn(u,m)};function tn(u,m){oe.call(this),this.g=new ta(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.va&&(u?u["X-WebChannel-Client-Profile"]=m.va:u={"X-WebChannel-Client-Profile":m.va}),this.g.S=u,(u=m&&m.Sb)&&!dt(u)&&(this.g.m=u),this.v=m&&m.supportsCrossDomainXhr||!1,this.u=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!dt(m)&&(this.g.D=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new Jn(this)}Z(tn,oe),tn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},tn.prototype.close=function(){bo(this.g)},tn.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var y={};y.__data__=u,u=y}else this.u&&(y={},y.__data__=Mn(u),u=y);m.i.push(new ru(m.Ya++,u)),m.G==3&&na(m)},tn.prototype.N=function(){this.g.l=null,delete this.j,bo(this.g),delete this.g,tn.aa.N.call(this)};function _u(u){pi.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){t:{for(const y in m){u=y;break t}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}Z(_u,pi);function vu(){ho.call(this),this.status=1}Z(vu,ho);function Jn(u){this.g=u}Z(Jn,yu),Jn.prototype.ua=function(){Ht(this.g,"a")},Jn.prototype.ta=function(u){Ht(this.g,new _u(u))},Jn.prototype.sa=function(u){Ht(this.g,new vu)},Jn.prototype.ra=function(){Ht(this.g,"b")},ra.prototype.createWebChannel=ra.prototype.g,tn.prototype.send=tn.prototype.o,tn.prototype.open=tn.prototype.m,tn.prototype.close=tn.prototype.close,rT=function(){return new ra},iT=function(){return Xi()},nT=Gn,Xd={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Wi.NO_ERROR=0,Wi.TIMEOUT=8,Wi.HTTP_ERROR=6,Nc=Wi,yi.COMPLETE="complete",eT=yi,co.EventType=gi,gi.OPEN="a",gi.CLOSE="b",gi.ERROR="c",gi.MESSAGE="d",oe.prototype.listen=oe.prototype.K,_l=co,qt.prototype.listenOnce=qt.prototype.L,qt.prototype.getLastError=qt.prototype.Ka,qt.prototype.getLastErrorCode=qt.prototype.Ba,qt.prototype.getStatus=qt.prototype.Z,qt.prototype.getResponseJson=qt.prototype.Oa,qt.prototype.getResponseText=qt.prototype.oa,qt.prototype.send=qt.prototype.ea,qt.prototype.setWithCredentials=qt.prototype.Ha,tT=qt}).apply(typeof Tc<"u"?Tc:typeof self<"u"?self:typeof window<"u"?window:{});const rv="@firebase/firestore",sv="4.9.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Xe.UNAUTHENTICATED=new Xe(null),Xe.GOOGLE_CREDENTIALS=new Xe("google-credentials-uid"),Xe.FIRST_PARTY=new Xe("first-party-uid"),Xe.MOCK_USER=new Xe("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let to="12.2.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kr=new gm("@firebase/firestore");function Ma(){return kr.logLevel}function oR(r){kr.setLogLevel(r)}function it(r,...t){if(kr.logLevel<=Dt.DEBUG){const n=t.map(Rm);kr.debug(`Firestore (${to}): ${r}`,...n)}}function Fi(r,...t){if(kr.logLevel<=Dt.ERROR){const n=t.map(Rm);kr.error(`Firestore (${to}): ${r}`,...n)}}function Ga(r,...t){if(kr.logLevel<=Dt.WARN){const n=t.map(Rm);kr.warn(`Firestore (${to}): ${r}`,...n)}}function Rm(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yt(r,t,n){let s="Unexpected state";typeof t=="string"?s=t:n=t,sT(r,s,n)}function sT(r,t,n){let s=`FIRESTORE (${to}) INTERNAL ASSERTION FAILED: ${t} (ID: ${r.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw Fi(s),new Error(s)}function jt(r,t,n,s){let l="Unexpected state";typeof n=="string"?l=n:s=n,r||sT(t,l,s)}function St(r,t){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class rt extends Ki{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Os{constructor(){this.promise=new Promise(((t,n)=>{this.resolve=t,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aT{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class lR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable((()=>n(Xe.UNAUTHENTICATED)))}shutdown(){}}class uR{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class cR{constructor(t){this.t=t,this.currentUser=Xe.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){jt(this.o===void 0,42304);let s=this.i;const l=p=>this.i!==s?(s=this.i,n(p)):Promise.resolve();let c=new Os;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Os,t.enqueueRetryable((()=>l(this.currentUser)))};const d=()=>{const p=c;t.enqueueRetryable((async()=>{await p.promise,await l(this.currentUser)}))},g=p=>{it("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit((p=>g(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?g(p):(it("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Os)}}),0),d()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((s=>this.i!==t?(it("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(jt(typeof s.accessToken=="string",31837,{l:s}),new aT(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return jt(t===null||typeof t=="string",2055,{h:t}),new Xe(t)}}class hR{constructor(t,n,s){this.P=t,this.T=n,this.I=s,this.type="FirstParty",this.user=Xe.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class fR{constructor(t,n,s){this.P=t,this.T=n,this.I=s}getToken(){return Promise.resolve(new hR(this.P,this.T,this.I))}start(t,n){t.enqueueRetryable((()=>n(Xe.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class av{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class dR{constructor(t,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,On(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,n){jt(this.o===void 0,3512);const s=c=>{c.error!=null&&it("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const d=c.token!==this.m;return this.m=c.token,it("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?n(c.token):Promise.resolve()};this.o=c=>{t.enqueueRetryable((()=>s(c)))};const l=c=>{it("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((c=>l(c))),setTimeout((()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?l(c):it("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new av(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((n=>n?(jt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new av(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mR(r){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(r);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let s=0;s<r;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Im{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const l=mR(40);for(let c=0;c<l.length;++c)s.length<20&&l[c]<n&&(s+=t.charAt(l[c]%62))}return s}}function Nt(r,t){return r<t?-1:r>t?1:0}function $d(r,t){const n=Math.min(r.length,t.length);for(let s=0;s<n;s++){const l=r.charAt(s),c=t.charAt(s);if(l!==c)return kd(l)===kd(c)?Nt(l,c):kd(l)?1:-1}return Nt(r.length,t.length)}const gR=55296,pR=57343;function kd(r){const t=r.charCodeAt(0);return t>=gR&&t<=pR}function Fa(r,t,n){return r.length===t.length&&r.every(((s,l)=>n(s,t[l])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ov="__name__";class ai{constructor(t,n,s){n===void 0?n=0:n>t.length&&yt(637,{offset:n,range:t.length}),s===void 0?s=t.length-n:s>t.length-n&&yt(1746,{length:s,range:t.length-n}),this.segments=t,this.offset=n,this.len=s}get length(){return this.len}isEqual(t){return ai.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof ai?t.forEach((s=>{n.push(s)})):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,s=this.limit();n<s;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const s=Math.min(t.length,n.length);for(let l=0;l<s;l++){const c=ai.compareSegments(t.get(l),n.get(l));if(c!==0)return c}return Nt(t.length,n.length)}static compareSegments(t,n){const s=ai.isNumericId(t),l=ai.isNumericId(n);return s&&!l?-1:!s&&l?1:s&&l?ai.extractNumericId(t).compare(ai.extractNumericId(n)):$d(t,n)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Vr.fromString(t.substring(4,t.length-2))}}class Jt extends ai{construct(t,n,s){return new Jt(t,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const s of t){if(s.indexOf("//")>=0)throw new rt(Y.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter((l=>l.length>0)))}return new Jt(n)}static emptyPath(){return new Jt([])}}const yR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class He extends ai{construct(t,n,s){return new He(t,n,s)}static isValidIdentifier(t){return yR.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),He.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===ov}static keyField(){return new He([ov])}static fromServerFormat(t){const n=[];let s="",l=0;const c=()=>{if(s.length===0)throw new rt(Y.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let d=!1;for(;l<t.length;){const g=t[l];if(g==="\\"){if(l+1===t.length)throw new rt(Y.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const p=t[l+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new rt(Y.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);s+=p,l+=2}else g==="`"?(d=!d,l++):g!=="."||d?(s+=g,l++):(c(),l++)}if(c(),d)throw new rt(Y.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new He(n)}static emptyPath(){return new He([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut{constructor(t){this.path=t}static fromPath(t){return new ut(Jt.fromString(t))}static fromName(t){return new ut(Jt.fromString(t).popFirst(5))}static empty(){return new ut(Jt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Jt.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return Jt.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new ut(new Jt(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oT(r,t,n){if(!n)throw new rt(Y.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${t}.`)}function _R(r,t,n,s){if(t===!0&&s===!0)throw new rt(Y.INVALID_ARGUMENT,`${r} and ${n} cannot be used together.`)}function lv(r){if(!ut.isDocumentKey(r))throw new rt(Y.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function uv(r){if(ut.isDocumentKey(r))throw new rt(Y.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function lT(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function ah(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const t=(function(s){return s.constructor?s.constructor.name:null})(r);return t?`a custom ${t} object`:"an object"}}return typeof r=="function"?"a function":yt(12329,{type:typeof r})}function Mr(r,t){if("_delegate"in r&&(r=r._delegate),!(r instanceof t)){if(t.name===r.constructor.name)throw new rt(Y.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=ah(r);throw new rt(Y.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return r}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ee(r,t){const n={typeString:r};return t&&(n.value=t),n}function Hl(r,t){if(!lT(r))throw new rt(Y.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in t)if(t[s]){const l=t[s].typeString,c="value"in t[s]?{value:t[s].value}:void 0;if(!(s in r)){n=`JSON missing required field: '${s}'`;break}const d=r[s];if(l&&typeof d!==l){n=`JSON field '${s}' must be a ${l}.`;break}if(c!==void 0&&d!==c.value){n=`Expected '${s}' field to equal '${c.value}'`;break}}if(n)throw new rt(Y.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cv=-62135596800,hv=1e6;class te{static now(){return te.fromMillis(Date.now())}static fromDate(t){return te.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),s=Math.floor((t-1e3*n)*hv);return new te(n,s)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new rt(Y.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new rt(Y.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<cv)throw new rt(Y.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new rt(Y.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/hv}_compareTo(t){return this.seconds===t.seconds?Nt(this.nanoseconds,t.nanoseconds):Nt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:te._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(Hl(t,te._jsonSchema))return new te(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-cv;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}te._jsonSchemaVersion="firestore/timestamp/1.0",te._jsonSchema={type:Ee("string",te._jsonSchemaVersion),seconds:Ee("number"),nanoseconds:Ee("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt{static fromTimestamp(t){return new Tt(t)}static min(){return new Tt(new te(0,0))}static max(){return new Tt(new te(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ol=-1;function vR(r,t){const n=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,l=Tt.fromTimestamp(s===1e9?new te(n+1,0):new te(n,s));return new Pr(l,ut.empty(),t)}function ER(r){return new Pr(r.readTime,r.key,Ol)}class Pr{constructor(t,n,s){this.readTime=t,this.documentKey=n,this.largestBatchId=s}static min(){return new Pr(Tt.min(),ut.empty(),Ol)}static max(){return new Pr(Tt.max(),ut.empty(),Ol)}}function TR(r,t){let n=r.readTime.compareTo(t.readTime);return n!==0?n:(n=ut.comparator(r.documentKey,t.documentKey),n!==0?n:Nt(r.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class SR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eo(r){if(r.code!==Y.FAILED_PRECONDITION||r.message!==AR)throw r;it("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&yt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new X(((s,l)=>{this.nextCallback=c=>{this.wrapSuccess(t,c).next(s,l)},this.catchCallback=c=>{this.wrapFailure(n,c).next(s,l)}}))}toPromise(){return new Promise(((t,n)=>{this.next(t,n)}))}wrapUserFunction(t){try{const n=t();return n instanceof X?n:X.resolve(n)}catch(n){return X.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction((()=>t(n))):X.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction((()=>t(n))):X.reject(n)}static resolve(t){return new X(((n,s)=>{n(t)}))}static reject(t){return new X(((n,s)=>{s(t)}))}static waitFor(t){return new X(((n,s)=>{let l=0,c=0,d=!1;t.forEach((g=>{++l,g.next((()=>{++c,d&&c===l&&n()}),(p=>s(p)))})),d=!0,c===l&&n()}))}static or(t){let n=X.resolve(!1);for(const s of t)n=n.next((l=>l?X.resolve(l):s()));return n}static forEach(t,n){const s=[];return t.forEach(((l,c)=>{s.push(n.call(this,l,c))})),this.waitFor(s)}static mapArray(t,n){return new X(((s,l)=>{const c=t.length,d=new Array(c);let g=0;for(let p=0;p<c;p++){const _=p;n(t[_]).next((A=>{d[_]=A,++g,g===c&&s(d)}),(A=>l(A)))}}))}static doWhile(t,n){return new X(((s,l)=>{const c=()=>{t()===!0?n().next((()=>{c()}),l):s()};c()}))}}function bR(r){const t=r.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function no(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oh{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>n.writeSequenceNumber(s))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}oh.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cm=-1;function lh(r){return r==null}function Gc(r){return r===0&&1/r==-1/0}function wR(r){return typeof r=="number"&&Number.isInteger(r)&&!Gc(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uT="";function RR(r){let t="";for(let n=0;n<r.length;n++)t.length>0&&(t=fv(t)),t=IR(r.get(n),t);return fv(t)}function IR(r,t){let n=t;const s=r.length;for(let l=0;l<s;l++){const c=r.charAt(l);switch(c){case"\0":n+="";break;case uT:n+="";break;default:n+=c}}return n}function fv(r){return r+uT+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dv(r){let t=0;for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&t++;return t}function Gr(r,t){for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&t(n,r[n])}function cT(r){for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{constructor(t,n){this.comparator=t,this.root=n||je.EMPTY}insert(t,n){return new ae(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,je.BLACK,null,null))}remove(t){return new ae(this.comparator,this.root.remove(t,this.comparator).copy(null,null,je.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(t,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(t){let n=0,s=this.root;for(;!s.isEmpty();){const l=this.comparator(t,s.key);if(l===0)return n+s.left.size;l<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((n,s)=>(t(n,s),!1)))}toString(){const t=[];return this.inorderTraversal(((n,s)=>(t.push(`${n}:${s}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Ac(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Ac(this.root,t,this.comparator,!1)}getReverseIterator(){return new Ac(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Ac(this.root,t,this.comparator,!0)}}class Ac{constructor(t,n,s,l){this.isReverse=l,this.nodeStack=[];let c=1;for(;!t.isEmpty();)if(c=n?s(t.key,n):1,n&&l&&(c*=-1),c<0)t=this.isReverse?t.left:t.right;else{if(c===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class je{constructor(t,n,s,l,c){this.key=t,this.value=n,this.color=s??je.RED,this.left=l??je.EMPTY,this.right=c??je.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,s,l,c){return new je(t??this.key,n??this.value,s??this.color,l??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,s){let l=this;const c=s(t,l.key);return l=c<0?l.copy(null,null,null,l.left.insert(t,n,s),null):c===0?l.copy(null,n,null,null,null):l.copy(null,null,null,null,l.right.insert(t,n,s)),l.fixUp()}removeMin(){if(this.left.isEmpty())return je.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let s,l=this;if(n(t,l.key)<0)l.left.isEmpty()||l.left.isRed()||l.left.left.isRed()||(l=l.moveRedLeft()),l=l.copy(null,null,null,l.left.remove(t,n),null);else{if(l.left.isRed()&&(l=l.rotateRight()),l.right.isEmpty()||l.right.isRed()||l.right.left.isRed()||(l=l.moveRedRight()),n(t,l.key)===0){if(l.right.isEmpty())return je.EMPTY;s=l.right.min(),l=l.copy(s.key,s.value,null,null,l.right.removeMin())}l=l.copy(null,null,null,null,l.right.remove(t,n))}return l.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,je.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,je.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw yt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw yt(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw yt(27949);return t+(this.isRed()?0:1)}}je.EMPTY=null,je.RED=!0,je.BLACK=!1;je.EMPTY=new class{constructor(){this.size=0}get key(){throw yt(57766)}get value(){throw yt(16141)}get color(){throw yt(16727)}get left(){throw yt(29726)}get right(){throw yt(36894)}copy(t,n,s,l,c){return this}insert(t,n,s){return new je(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce{constructor(t){this.comparator=t,this.data=new ae(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((n,s)=>(t(n),!1)))}forEachInRange(t,n){const s=this.data.getIteratorFrom(t[0]);for(;s.hasNext();){const l=s.getNext();if(this.comparator(l.key,t[1])>=0)return;n(l.key)}}forEachWhile(t,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!t(s.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new mv(this.data.getIterator())}getIteratorFrom(t){return new mv(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach((s=>{n=n.add(s)})),n}isEqual(t){if(!(t instanceof Ce)||this.size!==t.size)return!1;const n=this.data.getIterator(),s=t.data.getIterator();for(;n.hasNext();){const l=n.getNext().key,c=s.getNext().key;if(this.comparator(l,c)!==0)return!1}return!0}toArray(){const t=[];return this.forEach((n=>{t.push(n)})),t}toString(){const t=[];return this.forEach((n=>t.push(n))),"SortedSet("+t.toString()+")"}copy(t){const n=new Ce(this.comparator);return n.data=t,n}}class mv{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(t){this.fields=t,t.sort(He.comparator)}static empty(){return new yn([])}unionWith(t){let n=new Ce(He.comparator);for(const s of this.fields)n=n.add(s);for(const s of t)n=n.add(s);return new yn(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return Fa(this.fields,t.fields,((n,s)=>n.isEqual(s)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ge{constructor(t){this.binaryString=t}static fromBase64String(t){const n=(function(l){try{return atob(l)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new hT("Invalid base64 string: "+c):c}})(t);return new Ge(n)}static fromUint8Array(t){const n=(function(l){let c="";for(let d=0;d<l.length;++d)c+=String.fromCharCode(l[d]);return c})(t);return new Ge(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const s=new Uint8Array(n.length);for(let l=0;l<n.length;l++)s[l]=n.charCodeAt(l);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Nt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Ge.EMPTY_BYTE_STRING=new Ge("");const CR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ur(r){if(jt(!!r,39018),typeof r=="string"){let t=0;const n=CR.exec(r);if(jt(!!n,46558,{timestamp:r}),n[1]){let l=n[1];l=(l+"000000000").substr(0,9),t=Number(l)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:t}}return{seconds:de(r.seconds),nanos:de(r.nanos)}}function de(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Lr(r){return typeof r=="string"?Ge.fromBase64String(r):Ge.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fT="server_timestamp",dT="__type__",mT="__previous_value__",gT="__local_write_time__";function Dm(r){return(r?.mapValue?.fields||{})[dT]?.stringValue===fT}function uh(r){const t=r.mapValue.fields[mT];return Dm(t)?uh(t):t}function Vl(r){const t=Ur(r.mapValue.fields[gT].timestampValue);return new te(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DR{constructor(t,n,s,l,c,d,g,p,_,A){this.databaseId=t,this.appId=n,this.persistenceKey=s,this.host=l,this.ssl=c,this.forceLongPolling=d,this.autoDetectLongPolling=g,this.longPollingOptions=p,this.useFetchStreams=_,this.isUsingEmulator=A}}const Fc="(default)";class Ml{constructor(t,n){this.projectId=t,this.database=n||Fc}static empty(){return new Ml("","")}get isDefaultDatabase(){return this.database===Fc}isEqual(t){return t instanceof Ml&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pT="__type__",NR="__max__",Sc={mapValue:{}},yT="__vector__",Qc="value";function zr(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Dm(r)?4:VR(r)?9007199254740991:OR(r)?10:11:yt(28295,{value:r})}function di(r,t){if(r===t)return!0;const n=zr(r);if(n!==zr(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===t.booleanValue;case 4:return Vl(r).isEqual(Vl(t));case 3:return(function(l,c){if(typeof l.timestampValue=="string"&&typeof c.timestampValue=="string"&&l.timestampValue.length===c.timestampValue.length)return l.timestampValue===c.timestampValue;const d=Ur(l.timestampValue),g=Ur(c.timestampValue);return d.seconds===g.seconds&&d.nanos===g.nanos})(r,t);case 5:return r.stringValue===t.stringValue;case 6:return(function(l,c){return Lr(l.bytesValue).isEqual(Lr(c.bytesValue))})(r,t);case 7:return r.referenceValue===t.referenceValue;case 8:return(function(l,c){return de(l.geoPointValue.latitude)===de(c.geoPointValue.latitude)&&de(l.geoPointValue.longitude)===de(c.geoPointValue.longitude)})(r,t);case 2:return(function(l,c){if("integerValue"in l&&"integerValue"in c)return de(l.integerValue)===de(c.integerValue);if("doubleValue"in l&&"doubleValue"in c){const d=de(l.doubleValue),g=de(c.doubleValue);return d===g?Gc(d)===Gc(g):isNaN(d)&&isNaN(g)}return!1})(r,t);case 9:return Fa(r.arrayValue.values||[],t.arrayValue.values||[],di);case 10:case 11:return(function(l,c){const d=l.mapValue.fields||{},g=c.mapValue.fields||{};if(dv(d)!==dv(g))return!1;for(const p in d)if(d.hasOwnProperty(p)&&(g[p]===void 0||!di(d[p],g[p])))return!1;return!0})(r,t);default:return yt(52216,{left:r})}}function xl(r,t){return(r.values||[]).find((n=>di(n,t)))!==void 0}function Qa(r,t){if(r===t)return 0;const n=zr(r),s=zr(t);if(n!==s)return Nt(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Nt(r.booleanValue,t.booleanValue);case 2:return(function(c,d){const g=de(c.integerValue||c.doubleValue),p=de(d.integerValue||d.doubleValue);return g<p?-1:g>p?1:g===p?0:isNaN(g)?isNaN(p)?0:-1:1})(r,t);case 3:return gv(r.timestampValue,t.timestampValue);case 4:return gv(Vl(r),Vl(t));case 5:return $d(r.stringValue,t.stringValue);case 6:return(function(c,d){const g=Lr(c),p=Lr(d);return g.compareTo(p)})(r.bytesValue,t.bytesValue);case 7:return(function(c,d){const g=c.split("/"),p=d.split("/");for(let _=0;_<g.length&&_<p.length;_++){const A=Nt(g[_],p[_]);if(A!==0)return A}return Nt(g.length,p.length)})(r.referenceValue,t.referenceValue);case 8:return(function(c,d){const g=Nt(de(c.latitude),de(d.latitude));return g!==0?g:Nt(de(c.longitude),de(d.longitude))})(r.geoPointValue,t.geoPointValue);case 9:return pv(r.arrayValue,t.arrayValue);case 10:return(function(c,d){const g=c.fields||{},p=d.fields||{},_=g[Qc]?.arrayValue,A=p[Qc]?.arrayValue,I=Nt(_?.values?.length||0,A?.values?.length||0);return I!==0?I:pv(_,A)})(r.mapValue,t.mapValue);case 11:return(function(c,d){if(c===Sc.mapValue&&d===Sc.mapValue)return 0;if(c===Sc.mapValue)return 1;if(d===Sc.mapValue)return-1;const g=c.fields||{},p=Object.keys(g),_=d.fields||{},A=Object.keys(_);p.sort(),A.sort();for(let I=0;I<p.length&&I<A.length;++I){const D=$d(p[I],A[I]);if(D!==0)return D;const H=Qa(g[p[I]],_[A[I]]);if(H!==0)return H}return Nt(p.length,A.length)})(r.mapValue,t.mapValue);default:throw yt(23264,{he:n})}}function gv(r,t){if(typeof r=="string"&&typeof t=="string"&&r.length===t.length)return Nt(r,t);const n=Ur(r),s=Ur(t),l=Nt(n.seconds,s.seconds);return l!==0?l:Nt(n.nanos,s.nanos)}function pv(r,t){const n=r.values||[],s=t.values||[];for(let l=0;l<n.length&&l<s.length;++l){const c=Qa(n[l],s[l]);if(c)return c}return Nt(n.length,s.length)}function Ka(r){return Zd(r)}function Zd(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(n){const s=Ur(n);return`time(${s.seconds},${s.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(n){return Lr(n).toBase64()})(r.bytesValue):"referenceValue"in r?(function(n){return ut.fromName(n).toString()})(r.referenceValue):"geoPointValue"in r?(function(n){return`geo(${n.latitude},${n.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(n){let s="[",l=!0;for(const c of n.values||[])l?l=!1:s+=",",s+=Zd(c);return s+"]"})(r.arrayValue):"mapValue"in r?(function(n){const s=Object.keys(n.fields||{}).sort();let l="{",c=!0;for(const d of s)c?c=!1:l+=",",l+=`${d}:${Zd(n.fields[d])}`;return l+"}"})(r.mapValue):yt(61005,{value:r})}function Oc(r){switch(zr(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=uh(r);return t?16+Oc(t):16;case 5:return 2*r.stringValue.length;case 6:return Lr(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((l,c)=>l+Oc(c)),0)})(r.arrayValue);case 10:case 11:return(function(s){let l=0;return Gr(s.fields,((c,d)=>{l+=c.length+Oc(d)})),l})(r.mapValue);default:throw yt(13486,{value:r})}}function yv(r,t){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${t.path.canonicalString()}`}}function Wd(r){return!!r&&"integerValue"in r}function Nm(r){return!!r&&"arrayValue"in r}function _v(r){return!!r&&"nullValue"in r}function vv(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function Vc(r){return!!r&&"mapValue"in r}function OR(r){return(r?.mapValue?.fields||{})[pT]?.stringValue===yT}function bl(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const t={mapValue:{fields:{}}};return Gr(r.mapValue.fields,((n,s)=>t.mapValue.fields[n]=bl(s))),t}if(r.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(r.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=bl(r.arrayValue.values[n]);return t}return{...r}}function VR(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===NR}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(t){this.value=t}static empty(){return new on({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let s=0;s<t.length-1;++s)if(n=(n.mapValue.fields||{})[t.get(s)],!Vc(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=bl(n)}setAll(t){let n=He.emptyPath(),s={},l=[];t.forEach(((d,g)=>{if(!n.isImmediateParentOf(g)){const p=this.getFieldsMap(n);this.applyChanges(p,s,l),s={},l=[],n=g.popLast()}d?s[g.lastSegment()]=bl(d):l.push(g.lastSegment())}));const c=this.getFieldsMap(n);this.applyChanges(c,s,l)}delete(t){const n=this.field(t.popLast());Vc(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return di(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<t.length;++s){let l=n.mapValue.fields[t.get(s)];Vc(l)&&l.mapValue.fields||(l={mapValue:{fields:{}}},n.mapValue.fields[t.get(s)]=l),n=l}return n.mapValue.fields}applyChanges(t,n,s){Gr(n,((l,c)=>t[l]=c));for(const l of s)delete t[l]}clone(){return new on(bl(this.value))}}function _T(r){const t=[];return Gr(r.fields,((n,s)=>{const l=new He([n]);if(Vc(s)){const c=_T(s.mapValue).fields;if(c.length===0)t.push(l);else for(const d of c)t.push(l.child(d))}else t.push(l)})),new yn(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $e{constructor(t,n,s,l,c,d,g){this.key=t,this.documentType=n,this.version=s,this.readTime=l,this.createTime=c,this.data=d,this.documentState=g}static newInvalidDocument(t){return new $e(t,0,Tt.min(),Tt.min(),Tt.min(),on.empty(),0)}static newFoundDocument(t,n,s,l){return new $e(t,1,n,Tt.min(),s,l,0)}static newNoDocument(t,n){return new $e(t,2,n,Tt.min(),Tt.min(),on.empty(),0)}static newUnknownDocument(t,n){return new $e(t,3,n,Tt.min(),Tt.min(),on.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(Tt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=on.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=on.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Tt.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof $e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new $e(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kc{constructor(t,n){this.position=t,this.inclusive=n}}function Ev(r,t,n){let s=0;for(let l=0;l<r.position.length;l++){const c=t[l],d=r.position[l];if(c.field.isKeyField()?s=ut.comparator(ut.fromName(d.referenceValue),n.key):s=Qa(d,n.data.field(c.field)),c.dir==="desc"&&(s*=-1),s!==0)break}return s}function Tv(r,t){if(r===null)return t===null;if(t===null||r.inclusive!==t.inclusive||r.position.length!==t.position.length)return!1;for(let n=0;n<r.position.length;n++)if(!di(r.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yc{constructor(t,n="asc"){this.field=t,this.dir=n}}function MR(r,t){return r.dir===t.dir&&r.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vT{}class ve extends vT{constructor(t,n,s){super(),this.field=t,this.op=n,this.value=s}static create(t,n,s){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,s):new kR(t,n,s):n==="array-contains"?new LR(t,s):n==="in"?new zR(t,s):n==="not-in"?new BR(t,s):n==="array-contains-any"?new qR(t,s):new ve(t,n,s)}static createKeyFieldInFilter(t,n,s){return n==="in"?new PR(t,s):new UR(t,s)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Qa(n,this.value)):n!==null&&zr(this.value)===zr(n)&&this.matchesComparison(Qa(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return yt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class jn extends vT{constructor(t,n){super(),this.filters=t,this.op=n,this.Pe=null}static create(t,n){return new jn(t,n)}matches(t){return ET(this)?this.filters.find((n=>!n.matches(t)))===void 0:this.filters.find((n=>n.matches(t)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((t,n)=>t.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function ET(r){return r.op==="and"}function TT(r){return xR(r)&&ET(r)}function xR(r){for(const t of r.filters)if(t instanceof jn)return!1;return!0}function Jd(r){if(r instanceof ve)return r.field.canonicalString()+r.op.toString()+Ka(r.value);if(TT(r))return r.filters.map((t=>Jd(t))).join(",");{const t=r.filters.map((n=>Jd(n))).join(",");return`${r.op}(${t})`}}function AT(r,t){return r instanceof ve?(function(s,l){return l instanceof ve&&s.op===l.op&&s.field.isEqual(l.field)&&di(s.value,l.value)})(r,t):r instanceof jn?(function(s,l){return l instanceof jn&&s.op===l.op&&s.filters.length===l.filters.length?s.filters.reduce(((c,d,g)=>c&&AT(d,l.filters[g])),!0):!1})(r,t):void yt(19439)}function ST(r){return r instanceof ve?(function(n){return`${n.field.canonicalString()} ${n.op} ${Ka(n.value)}`})(r):r instanceof jn?(function(n){return n.op.toString()+" {"+n.getFilters().map(ST).join(" ,")+"}"})(r):"Filter"}class kR extends ve{constructor(t,n,s){super(t,n,s),this.key=ut.fromName(s.referenceValue)}matches(t){const n=ut.comparator(t.key,this.key);return this.matchesComparison(n)}}class PR extends ve{constructor(t,n){super(t,"in",n),this.keys=bT("in",n)}matches(t){return this.keys.some((n=>n.isEqual(t.key)))}}class UR extends ve{constructor(t,n){super(t,"not-in",n),this.keys=bT("not-in",n)}matches(t){return!this.keys.some((n=>n.isEqual(t.key)))}}function bT(r,t){return(t.arrayValue?.values||[]).map((n=>ut.fromName(n.referenceValue)))}class LR extends ve{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return Nm(n)&&xl(n.arrayValue,this.value)}}class zR extends ve{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&xl(this.value.arrayValue,n)}}class BR extends ve{constructor(t,n){super(t,"not-in",n)}matches(t){if(xl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&n.nullValue===void 0&&!xl(this.value.arrayValue,n)}}class qR extends ve{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!Nm(n)||!n.arrayValue.values)&&n.arrayValue.values.some((s=>xl(this.value.arrayValue,s)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jR{constructor(t,n=null,s=[],l=[],c=null,d=null,g=null){this.path=t,this.collectionGroup=n,this.orderBy=s,this.filters=l,this.limit=c,this.startAt=d,this.endAt=g,this.Te=null}}function Av(r,t=null,n=[],s=[],l=null,c=null,d=null){return new jR(r,t,n,s,l,c,d)}function Om(r){const t=St(r);if(t.Te===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((s=>Jd(s))).join(","),n+="|ob:",n+=t.orderBy.map((s=>(function(c){return c.field.canonicalString()+c.dir})(s))).join(","),lh(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((s=>Ka(s))).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((s=>Ka(s))).join(",")),t.Te=n}return t.Te}function Vm(r,t){if(r.limit!==t.limit||r.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<r.orderBy.length;n++)if(!MR(r.orderBy[n],t.orderBy[n]))return!1;if(r.filters.length!==t.filters.length)return!1;for(let n=0;n<r.filters.length;n++)if(!AT(r.filters[n],t.filters[n]))return!1;return r.collectionGroup===t.collectionGroup&&!!r.path.isEqual(t.path)&&!!Tv(r.startAt,t.startAt)&&Tv(r.endAt,t.endAt)}function tm(r){return ut.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gl{constructor(t,n=null,s=[],l=[],c=null,d="F",g=null,p=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=l,this.limit=c,this.limitType=d,this.startAt=g,this.endAt=p,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function HR(r,t,n,s,l,c,d,g){return new Gl(r,t,n,s,l,c,d,g)}function Mm(r){return new Gl(r)}function Sv(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function wT(r){return r.collectionGroup!==null}function wl(r){const t=St(r);if(t.Ie===null){t.Ie=[];const n=new Set;for(const c of t.explicitOrderBy)t.Ie.push(c),n.add(c.field.canonicalString());const s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(d){let g=new Ce(He.comparator);return d.filters.forEach((p=>{p.getFlattenedFilters().forEach((_=>{_.isInequality()&&(g=g.add(_.field))}))})),g})(t).forEach((c=>{n.has(c.canonicalString())||c.isKeyField()||t.Ie.push(new Yc(c,s))})),n.has(He.keyField().canonicalString())||t.Ie.push(new Yc(He.keyField(),s))}return t.Ie}function ui(r){const t=St(r);return t.Ee||(t.Ee=GR(t,wl(r))),t.Ee}function GR(r,t){if(r.limitType==="F")return Av(r.path,r.collectionGroup,t,r.filters,r.limit,r.startAt,r.endAt);{t=t.map((l=>{const c=l.dir==="desc"?"asc":"desc";return new Yc(l.field,c)}));const n=r.endAt?new Kc(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new Kc(r.startAt.position,r.startAt.inclusive):null;return Av(r.path,r.collectionGroup,t,r.filters,r.limit,n,s)}}function em(r,t){const n=r.filters.concat([t]);return new Gl(r.path,r.collectionGroup,r.explicitOrderBy.slice(),n,r.limit,r.limitType,r.startAt,r.endAt)}function nm(r,t,n){return new Gl(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),t,n,r.startAt,r.endAt)}function ch(r,t){return Vm(ui(r),ui(t))&&r.limitType===t.limitType}function RT(r){return`${Om(ui(r))}|lt:${r.limitType}`}function xa(r){return`Query(target=${(function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map((l=>ST(l))).join(", ")}]`),lh(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map((l=>(function(d){return`${d.field.canonicalString()} (${d.dir})`})(l))).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map((l=>Ka(l))).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map((l=>Ka(l))).join(",")),`Target(${s})`})(ui(r))}; limitType=${r.limitType})`}function hh(r,t){return t.isFoundDocument()&&(function(s,l){const c=l.key.path;return s.collectionGroup!==null?l.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(c):ut.isDocumentKey(s.path)?s.path.isEqual(c):s.path.isImmediateParentOf(c)})(r,t)&&(function(s,l){for(const c of wl(s))if(!c.field.isKeyField()&&l.data.field(c.field)===null)return!1;return!0})(r,t)&&(function(s,l){for(const c of s.filters)if(!c.matches(l))return!1;return!0})(r,t)&&(function(s,l){return!(s.startAt&&!(function(d,g,p){const _=Ev(d,g,p);return d.inclusive?_<=0:_<0})(s.startAt,wl(s),l)||s.endAt&&!(function(d,g,p){const _=Ev(d,g,p);return d.inclusive?_>=0:_>0})(s.endAt,wl(s),l))})(r,t)}function FR(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function IT(r){return(t,n)=>{let s=!1;for(const l of wl(r)){const c=QR(l,t,n);if(c!==0)return c;s=s||l.field.isKeyField()}return 0}}function QR(r,t,n){const s=r.field.isKeyField()?ut.comparator(t.key,n.key):(function(c,d,g){const p=d.data.field(c),_=g.data.field(c);return p!==null&&_!==null?Qa(p,_):yt(42886)})(r.field,t,n);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return yt(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zs{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),s=this.inner[n];if(s!==void 0){for(const[l,c]of s)if(this.equalsFn(l,t))return c}}has(t){return this.get(t)!==void 0}set(t,n){const s=this.mapKeyFn(t),l=this.inner[s];if(l===void 0)return this.inner[s]=[[t,n]],void this.innerSize++;for(let c=0;c<l.length;c++)if(this.equalsFn(l[c][0],t))return void(l[c]=[t,n]);l.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),s=this.inner[n];if(s===void 0)return!1;for(let l=0;l<s.length;l++)if(this.equalsFn(s[l][0],t))return s.length===1?delete this.inner[n]:s.splice(l,1),this.innerSize--,!0;return!1}forEach(t){Gr(this.inner,((n,s)=>{for(const[l,c]of s)t(l,c)}))}isEmpty(){return cT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KR=new ae(ut.comparator);function Qi(){return KR}const CT=new ae(ut.comparator);function vl(...r){let t=CT;for(const n of r)t=t.insert(n.key,n);return t}function DT(r){let t=CT;return r.forEach(((n,s)=>t=t.insert(n,s.overlayedDocument))),t}function Ns(){return Rl()}function NT(){return Rl()}function Rl(){return new zs((r=>r.toString()),((r,t)=>r.isEqual(t)))}const YR=new ae(ut.comparator),XR=new Ce(ut.comparator);function Ot(...r){let t=XR;for(const n of r)t=t.add(n);return t}const $R=new Ce(Nt);function ZR(){return $R}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xm(r,t){if(r.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Gc(t)?"-0":t}}function OT(r){return{integerValue:""+r}}function WR(r,t){return wR(t)?OT(t):xm(r,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fh{constructor(){this._=void 0}}function JR(r,t,n){return r instanceof Xc?(function(l,c){const d={fields:{[dT]:{stringValue:fT},[gT]:{timestampValue:{seconds:l.seconds,nanos:l.nanoseconds}}}};return c&&Dm(c)&&(c=uh(c)),c&&(d.fields[mT]=c),{mapValue:d}})(n,t):r instanceof kl?MT(r,t):r instanceof Pl?xT(r,t):(function(l,c){const d=VT(l,c),g=bv(d)+bv(l.Ae);return Wd(d)&&Wd(l.Ae)?OT(g):xm(l.serializer,g)})(r,t)}function tI(r,t,n){return r instanceof kl?MT(r,t):r instanceof Pl?xT(r,t):n}function VT(r,t){return r instanceof $c?(function(s){return Wd(s)||(function(c){return!!c&&"doubleValue"in c})(s)})(t)?t:{integerValue:0}:null}class Xc extends fh{}class kl extends fh{constructor(t){super(),this.elements=t}}function MT(r,t){const n=kT(t);for(const s of r.elements)n.some((l=>di(l,s)))||n.push(s);return{arrayValue:{values:n}}}class Pl extends fh{constructor(t){super(),this.elements=t}}function xT(r,t){let n=kT(t);for(const s of r.elements)n=n.filter((l=>!di(l,s)));return{arrayValue:{values:n}}}class $c extends fh{constructor(t,n){super(),this.serializer=t,this.Ae=n}}function bv(r){return de(r.integerValue||r.doubleValue)}function kT(r){return Nm(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}function eI(r,t){return r.field.isEqual(t.field)&&(function(s,l){return s instanceof kl&&l instanceof kl||s instanceof Pl&&l instanceof Pl?Fa(s.elements,l.elements,di):s instanceof $c&&l instanceof $c?di(s.Ae,l.Ae):s instanceof Xc&&l instanceof Xc})(r.transform,t.transform)}class nI{constructor(t,n){this.version=t,this.transformResults=n}}class Bn{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new Bn}static exists(t){return new Bn(void 0,t)}static updateTime(t){return new Bn(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Mc(r,t){return r.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(r.updateTime):r.exists===void 0||r.exists===t.isFoundDocument()}class dh{}function PT(r,t){if(!r.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return r.isNoDocument()?new km(r.key,Bn.none()):new Fl(r.key,r.data,Bn.none());{const n=r.data,s=on.empty();let l=new Ce(He.comparator);for(let c of t.fields)if(!l.has(c)){let d=n.field(c);d===null&&c.length>1&&(c=c.popLast(),d=n.field(c)),d===null?s.delete(c):s.set(c,d),l=l.add(c)}return new Fr(r.key,s,new yn(l.toArray()),Bn.none())}}function iI(r,t,n){r instanceof Fl?(function(l,c,d){const g=l.value.clone(),p=Rv(l.fieldTransforms,c,d.transformResults);g.setAll(p),c.convertToFoundDocument(d.version,g).setHasCommittedMutations()})(r,t,n):r instanceof Fr?(function(l,c,d){if(!Mc(l.precondition,c))return void c.convertToUnknownDocument(d.version);const g=Rv(l.fieldTransforms,c,d.transformResults),p=c.data;p.setAll(UT(l)),p.setAll(g),c.convertToFoundDocument(d.version,p).setHasCommittedMutations()})(r,t,n):(function(l,c,d){c.convertToNoDocument(d.version).setHasCommittedMutations()})(0,t,n)}function Il(r,t,n,s){return r instanceof Fl?(function(c,d,g,p){if(!Mc(c.precondition,d))return g;const _=c.value.clone(),A=Iv(c.fieldTransforms,p,d);return _.setAll(A),d.convertToFoundDocument(d.version,_).setHasLocalMutations(),null})(r,t,n,s):r instanceof Fr?(function(c,d,g,p){if(!Mc(c.precondition,d))return g;const _=Iv(c.fieldTransforms,p,d),A=d.data;return A.setAll(UT(c)),A.setAll(_),d.convertToFoundDocument(d.version,A).setHasLocalMutations(),g===null?null:g.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map((I=>I.field)))})(r,t,n,s):(function(c,d,g){return Mc(c.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):g})(r,t,n)}function rI(r,t){let n=null;for(const s of r.fieldTransforms){const l=t.data.field(s.field),c=VT(s.transform,l||null);c!=null&&(n===null&&(n=on.empty()),n.set(s.field,c))}return n||null}function wv(r,t){return r.type===t.type&&!!r.key.isEqual(t.key)&&!!r.precondition.isEqual(t.precondition)&&!!(function(s,l){return s===void 0&&l===void 0||!(!s||!l)&&Fa(s,l,((c,d)=>eI(c,d)))})(r.fieldTransforms,t.fieldTransforms)&&(r.type===0?r.value.isEqual(t.value):r.type!==1||r.data.isEqual(t.data)&&r.fieldMask.isEqual(t.fieldMask))}class Fl extends dh{constructor(t,n,s,l=[]){super(),this.key=t,this.value=n,this.precondition=s,this.fieldTransforms=l,this.type=0}getFieldMask(){return null}}class Fr extends dh{constructor(t,n,s,l,c=[]){super(),this.key=t,this.data=n,this.fieldMask=s,this.precondition=l,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function UT(r){const t=new Map;return r.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const s=r.data.field(n);t.set(n,s)}})),t}function Rv(r,t,n){const s=new Map;jt(r.length===n.length,32656,{Re:n.length,Ve:r.length});for(let l=0;l<n.length;l++){const c=r[l],d=c.transform,g=t.data.field(c.field);s.set(c.field,tI(d,g,n[l]))}return s}function Iv(r,t,n){const s=new Map;for(const l of r){const c=l.transform,d=n.data.field(l.field);s.set(l.field,JR(c,d,t))}return s}class km extends dh{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class sI extends dh{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aI{constructor(t,n,s,l){this.batchId=t,this.localWriteTime=n,this.baseMutations=s,this.mutations=l}applyToRemoteDocument(t,n){const s=n.mutationResults;for(let l=0;l<this.mutations.length;l++){const c=this.mutations[l];c.key.isEqual(t.key)&&iI(c,t,s[l])}}applyToLocalView(t,n){for(const s of this.baseMutations)s.key.isEqual(t.key)&&(n=Il(s,t,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(t.key)&&(n=Il(s,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const s=NT();return this.mutations.forEach((l=>{const c=t.get(l.key),d=c.overlayedDocument;let g=this.applyToLocalView(d,c.mutatedFields);g=n.has(l.key)?null:g;const p=PT(d,g);p!==null&&s.set(l.key,p),d.isValidDocument()||d.convertToNoDocument(Tt.min())})),s}keys(){return this.mutations.reduce(((t,n)=>t.add(n.key)),Ot())}isEqual(t){return this.batchId===t.batchId&&Fa(this.mutations,t.mutations,((n,s)=>wv(n,s)))&&Fa(this.baseMutations,t.baseMutations,((n,s)=>wv(n,s)))}}class Pm{constructor(t,n,s,l){this.batch=t,this.commitVersion=n,this.mutationResults=s,this.docVersions=l}static from(t,n,s){jt(t.mutations.length===s.length,58842,{me:t.mutations.length,fe:s.length});let l=(function(){return YR})();const c=t.mutations;for(let d=0;d<c.length;d++)l=l.insert(c[d].key,s[d].version);return new Pm(t,n,s,l)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oI{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lI{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _e,Pt;function uI(r){switch(r){case Y.OK:return yt(64938);case Y.CANCELLED:case Y.UNKNOWN:case Y.DEADLINE_EXCEEDED:case Y.RESOURCE_EXHAUSTED:case Y.INTERNAL:case Y.UNAVAILABLE:case Y.UNAUTHENTICATED:return!1;case Y.INVALID_ARGUMENT:case Y.NOT_FOUND:case Y.ALREADY_EXISTS:case Y.PERMISSION_DENIED:case Y.FAILED_PRECONDITION:case Y.ABORTED:case Y.OUT_OF_RANGE:case Y.UNIMPLEMENTED:case Y.DATA_LOSS:return!0;default:return yt(15467,{code:r})}}function LT(r){if(r===void 0)return Fi("GRPC error has no .code"),Y.UNKNOWN;switch(r){case _e.OK:return Y.OK;case _e.CANCELLED:return Y.CANCELLED;case _e.UNKNOWN:return Y.UNKNOWN;case _e.DEADLINE_EXCEEDED:return Y.DEADLINE_EXCEEDED;case _e.RESOURCE_EXHAUSTED:return Y.RESOURCE_EXHAUSTED;case _e.INTERNAL:return Y.INTERNAL;case _e.UNAVAILABLE:return Y.UNAVAILABLE;case _e.UNAUTHENTICATED:return Y.UNAUTHENTICATED;case _e.INVALID_ARGUMENT:return Y.INVALID_ARGUMENT;case _e.NOT_FOUND:return Y.NOT_FOUND;case _e.ALREADY_EXISTS:return Y.ALREADY_EXISTS;case _e.PERMISSION_DENIED:return Y.PERMISSION_DENIED;case _e.FAILED_PRECONDITION:return Y.FAILED_PRECONDITION;case _e.ABORTED:return Y.ABORTED;case _e.OUT_OF_RANGE:return Y.OUT_OF_RANGE;case _e.UNIMPLEMENTED:return Y.UNIMPLEMENTED;case _e.DATA_LOSS:return Y.DATA_LOSS;default:return yt(39323,{code:r})}}(Pt=_e||(_e={}))[Pt.OK=0]="OK",Pt[Pt.CANCELLED=1]="CANCELLED",Pt[Pt.UNKNOWN=2]="UNKNOWN",Pt[Pt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Pt[Pt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Pt[Pt.NOT_FOUND=5]="NOT_FOUND",Pt[Pt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Pt[Pt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Pt[Pt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Pt[Pt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Pt[Pt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Pt[Pt.ABORTED=10]="ABORTED",Pt[Pt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Pt[Pt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Pt[Pt.INTERNAL=13]="INTERNAL",Pt[Pt.UNAVAILABLE=14]="UNAVAILABLE",Pt[Pt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cI(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hI=new Vr([4294967295,4294967295],0);function Cv(r){const t=cI().encode(r),n=new JE;return n.update(t),new Uint8Array(n.digest())}function Dv(r){const t=new DataView(r.buffer),n=t.getUint32(0,!0),s=t.getUint32(4,!0),l=t.getUint32(8,!0),c=t.getUint32(12,!0);return[new Vr([n,s],0),new Vr([l,c],0)]}class Um{constructor(t,n,s){if(this.bitmap=t,this.padding=n,this.hashCount=s,n<0||n>=8)throw new El(`Invalid padding: ${n}`);if(s<0)throw new El(`Invalid hash count: ${s}`);if(t.length>0&&this.hashCount===0)throw new El(`Invalid hash count: ${s}`);if(t.length===0&&n!==0)throw new El(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*t.length-n,this.pe=Vr.fromNumber(this.ge)}ye(t,n,s){let l=t.add(n.multiply(Vr.fromNumber(s)));return l.compare(hI)===1&&(l=new Vr([l.getBits(0),l.getBits(1)],0)),l.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const n=Cv(t),[s,l]=Dv(n);for(let c=0;c<this.hashCount;c++){const d=this.ye(s,l,c);if(!this.we(d))return!1}return!0}static create(t,n,s){const l=t%8==0?0:8-t%8,c=new Uint8Array(Math.ceil(t/8)),d=new Um(c,l,n);return s.forEach((g=>d.insert(g))),d}insert(t){if(this.ge===0)return;const n=Cv(t),[s,l]=Dv(n);for(let c=0;c<this.hashCount;c++){const d=this.ye(s,l,c);this.Se(d)}}Se(t){const n=Math.floor(t/8),s=t%8;this.bitmap[n]|=1<<s}}class El extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mh{constructor(t,n,s,l,c){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=l,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(t,n,s){const l=new Map;return l.set(t,Ql.createSynthesizedTargetChangeForCurrentChange(t,n,s)),new mh(Tt.min(),l,new ae(Nt),Qi(),Ot())}}class Ql{constructor(t,n,s,l,c){this.resumeToken=t,this.current=n,this.addedDocuments=s,this.modifiedDocuments=l,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(t,n,s){return new Ql(s,n,Ot(),Ot(),Ot())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xc{constructor(t,n,s,l){this.be=t,this.removedTargetIds=n,this.key=s,this.De=l}}class zT{constructor(t,n){this.targetId=t,this.Ce=n}}class BT{constructor(t,n,s=Ge.EMPTY_BYTE_STRING,l=null){this.state=t,this.targetIds=n,this.resumeToken=s,this.cause=l}}class Nv{constructor(){this.ve=0,this.Fe=Ov(),this.Me=Ge.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=Ot(),n=Ot(),s=Ot();return this.Fe.forEach(((l,c)=>{switch(c){case 0:t=t.add(l);break;case 2:n=n.add(l);break;case 1:s=s.add(l);break;default:yt(38017,{changeType:c})}})),new Ql(this.Me,this.xe,t,n,s)}qe(){this.Oe=!1,this.Fe=Ov()}Qe(t,n){this.Oe=!0,this.Fe=this.Fe.insert(t,n)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,jt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class fI{constructor(t){this.Ge=t,this.ze=new Map,this.je=Qi(),this.Je=bc(),this.He=bc(),this.Ye=new ae(Nt)}Ze(t){for(const n of t.be)t.De&&t.De.isFoundDocument()?this.Xe(n,t.De):this.et(n,t.key,t.De);for(const n of t.removedTargetIds)this.et(n,t.key,t.De)}tt(t){this.forEachTarget(t,(n=>{const s=this.nt(n);switch(t.state){case 0:this.rt(n)&&s.Le(t.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(t.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(s.We(),s.Le(t.resumeToken));break;case 4:this.rt(n)&&(this.it(n),s.Le(t.resumeToken));break;default:yt(56790,{state:t.state})}}))}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.ze.forEach(((s,l)=>{this.rt(l)&&n(l)}))}st(t){const n=t.targetId,s=t.Ce.count,l=this.ot(n);if(l){const c=l.target;if(tm(c))if(s===0){const d=new ut(c.path);this.et(n,d,$e.newNoDocument(d,Tt.min()))}else jt(s===1,20013,{expectedCount:s});else{const d=this._t(n);if(d!==s){const g=this.ut(t),p=g?this.ct(g,t,d):1;if(p!==0){this.it(n);const _=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,_)}}}}}ut(t){const n=t.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:l=0},hashCount:c=0}=n;let d,g;try{d=Lr(s).toUint8Array()}catch(p){if(p instanceof hT)return Ga("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{g=new Um(d,l,c)}catch(p){return Ga(p instanceof El?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return g.ge===0?null:g}ct(t,n,s){return n.Ce.count===s-this.Pt(t,n.targetId)?0:2}Pt(t,n){const s=this.Ge.getRemoteKeysForTarget(n);let l=0;return s.forEach((c=>{const d=this.Ge.ht(),g=`projects/${d.projectId}/databases/${d.database}/documents/${c.path.canonicalString()}`;t.mightContain(g)||(this.et(n,c,null),l++)})),l}Tt(t){const n=new Map;this.ze.forEach(((c,d)=>{const g=this.ot(d);if(g){if(c.current&&tm(g.target)){const p=new ut(g.target.path);this.It(p).has(d)||this.Et(d,p)||this.et(d,p,$e.newNoDocument(p,t))}c.Be&&(n.set(d,c.ke()),c.qe())}}));let s=Ot();this.He.forEach(((c,d)=>{let g=!0;d.forEachWhile((p=>{const _=this.ot(p);return!_||_.purpose==="TargetPurposeLimboResolution"||(g=!1,!1)})),g&&(s=s.add(c))})),this.je.forEach(((c,d)=>d.setReadTime(t)));const l=new mh(t,n,this.Ye,this.je,s);return this.je=Qi(),this.Je=bc(),this.He=bc(),this.Ye=new ae(Nt),l}Xe(t,n){if(!this.rt(t))return;const s=this.Et(t,n.key)?2:0;this.nt(t).Qe(n.key,s),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(t)),this.He=this.He.insert(n.key,this.dt(n.key).add(t))}et(t,n,s){if(!this.rt(t))return;const l=this.nt(t);this.Et(t,n)?l.Qe(n,1):l.$e(n),this.He=this.He.insert(n,this.dt(n).delete(t)),this.He=this.He.insert(n,this.dt(n).add(t)),s&&(this.je=this.je.insert(n,s))}removeTarget(t){this.ze.delete(t)}_t(t){const n=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let n=this.ze.get(t);return n||(n=new Nv,this.ze.set(t,n)),n}dt(t){let n=this.He.get(t);return n||(n=new Ce(Nt),this.He=this.He.insert(t,n)),n}It(t){let n=this.Je.get(t);return n||(n=new Ce(Nt),this.Je=this.Je.insert(t,n)),n}rt(t){const n=this.ot(t)!==null;return n||it("WatchChangeAggregator","Detected inactive target",t),n}ot(t){const n=this.ze.get(t);return n&&n.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new Nv),this.Ge.getRemoteKeysForTarget(t).forEach((n=>{this.et(t,n,null)}))}Et(t,n){return this.Ge.getRemoteKeysForTarget(t).has(n)}}function bc(){return new ae(ut.comparator)}function Ov(){return new ae(ut.comparator)}const dI={asc:"ASCENDING",desc:"DESCENDING"},mI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},gI={and:"AND",or:"OR"};class pI{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function im(r,t){return r.useProto3Json||lh(t)?t:{value:t}}function Zc(r,t){return r.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function qT(r,t){return r.useProto3Json?t.toBase64():t.toUint8Array()}function yI(r,t){return Zc(r,t.toTimestamp())}function ci(r){return jt(!!r,49232),Tt.fromTimestamp((function(n){const s=Ur(n);return new te(s.seconds,s.nanos)})(r))}function Lm(r,t){return rm(r,t).canonicalString()}function rm(r,t){const n=(function(l){return new Jt(["projects",l.projectId,"databases",l.database])})(r).child("documents");return t===void 0?n:n.child(t)}function jT(r){const t=Jt.fromString(r);return jt(KT(t),10190,{key:t.toString()}),t}function sm(r,t){return Lm(r.databaseId,t.path)}function Pd(r,t){const n=jT(t);if(n.get(1)!==r.databaseId.projectId)throw new rt(Y.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+r.databaseId.projectId);if(n.get(3)!==r.databaseId.database)throw new rt(Y.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+r.databaseId.database);return new ut(GT(n))}function HT(r,t){return Lm(r.databaseId,t)}function _I(r){const t=jT(r);return t.length===4?Jt.emptyPath():GT(t)}function am(r){return new Jt(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function GT(r){return jt(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function Vv(r,t,n){return{name:sm(r,t),fields:n.value.mapValue.fields}}function vI(r,t){let n;if("targetChange"in t){t.targetChange;const s=(function(_){return _==="NO_CHANGE"?0:_==="ADD"?1:_==="REMOVE"?2:_==="CURRENT"?3:_==="RESET"?4:yt(39313,{state:_})})(t.targetChange.targetChangeType||"NO_CHANGE"),l=t.targetChange.targetIds||[],c=(function(_,A){return _.useProto3Json?(jt(A===void 0||typeof A=="string",58123),Ge.fromBase64String(A||"")):(jt(A===void 0||A instanceof Buffer||A instanceof Uint8Array,16193),Ge.fromUint8Array(A||new Uint8Array))})(r,t.targetChange.resumeToken),d=t.targetChange.cause,g=d&&(function(_){const A=_.code===void 0?Y.UNKNOWN:LT(_.code);return new rt(A,_.message||"")})(d);n=new BT(s,l,c,g||null)}else if("documentChange"in t){t.documentChange;const s=t.documentChange;s.document,s.document.name,s.document.updateTime;const l=Pd(r,s.document.name),c=ci(s.document.updateTime),d=s.document.createTime?ci(s.document.createTime):Tt.min(),g=new on({mapValue:{fields:s.document.fields}}),p=$e.newFoundDocument(l,c,d,g),_=s.targetIds||[],A=s.removedTargetIds||[];n=new xc(_,A,p.key,p)}else if("documentDelete"in t){t.documentDelete;const s=t.documentDelete;s.document;const l=Pd(r,s.document),c=s.readTime?ci(s.readTime):Tt.min(),d=$e.newNoDocument(l,c),g=s.removedTargetIds||[];n=new xc([],g,d.key,d)}else if("documentRemove"in t){t.documentRemove;const s=t.documentRemove;s.document;const l=Pd(r,s.document),c=s.removedTargetIds||[];n=new xc([],c,l,null)}else{if(!("filter"in t))return yt(11601,{Rt:t});{t.filter;const s=t.filter;s.targetId;const{count:l=0,unchangedNames:c}=s,d=new lI(l,c),g=s.targetId;n=new zT(g,d)}}return n}function EI(r,t){let n;if(t instanceof Fl)n={update:Vv(r,t.key,t.value)};else if(t instanceof km)n={delete:sm(r,t.key)};else if(t instanceof Fr)n={update:Vv(r,t.key,t.data),updateMask:DI(t.fieldMask)};else{if(!(t instanceof sI))return yt(16599,{Vt:t.type});n={verify:sm(r,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((s=>(function(c,d){const g=d.transform;if(g instanceof Xc)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(g instanceof kl)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:g.elements}};if(g instanceof Pl)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:g.elements}};if(g instanceof $c)return{fieldPath:d.field.canonicalString(),increment:g.Ae};throw yt(20930,{transform:d.transform})})(0,s)))),t.precondition.isNone||(n.currentDocument=(function(l,c){return c.updateTime!==void 0?{updateTime:yI(l,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:yt(27497)})(r,t.precondition)),n}function TI(r,t){return r&&r.length>0?(jt(t!==void 0,14353),r.map((n=>(function(l,c){let d=l.updateTime?ci(l.updateTime):ci(c);return d.isEqual(Tt.min())&&(d=ci(c)),new nI(d,l.transformResults||[])})(n,t)))):[]}function AI(r,t){return{documents:[HT(r,t.path)]}}function SI(r,t){const n={structuredQuery:{}},s=t.path;let l;t.collectionGroup!==null?(l=s,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(l=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=HT(r,l);const c=(function(_){if(_.length!==0)return QT(jn.create(_,"and"))})(t.filters);c&&(n.structuredQuery.where=c);const d=(function(_){if(_.length!==0)return _.map((A=>(function(D){return{field:ka(D.field),direction:RI(D.dir)}})(A)))})(t.orderBy);d&&(n.structuredQuery.orderBy=d);const g=im(r,t.limit);return g!==null&&(n.structuredQuery.limit=g),t.startAt&&(n.structuredQuery.startAt=(function(_){return{before:_.inclusive,values:_.position}})(t.startAt)),t.endAt&&(n.structuredQuery.endAt=(function(_){return{before:!_.inclusive,values:_.position}})(t.endAt)),{ft:n,parent:l}}function bI(r){let t=_I(r.parent);const n=r.structuredQuery,s=n.from?n.from.length:0;let l=null;if(s>0){jt(s===1,65062);const A=n.from[0];A.allDescendants?l=A.collectionId:t=t.child(A.collectionId)}let c=[];n.where&&(c=(function(I){const D=FT(I);return D instanceof jn&&TT(D)?D.getFilters():[D]})(n.where));let d=[];n.orderBy&&(d=(function(I){return I.map((D=>(function(Z){return new Yc(Pa(Z.field),(function(W){switch(W){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(Z.direction))})(D)))})(n.orderBy));let g=null;n.limit&&(g=(function(I){let D;return D=typeof I=="object"?I.value:I,lh(D)?null:D})(n.limit));let p=null;n.startAt&&(p=(function(I){const D=!!I.before,H=I.values||[];return new Kc(H,D)})(n.startAt));let _=null;return n.endAt&&(_=(function(I){const D=!I.before,H=I.values||[];return new Kc(H,D)})(n.endAt)),HR(t,l,d,c,g,"F",p,_)}function wI(r,t){const n=(function(l){switch(l){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return yt(28987,{purpose:l})}})(t.purpose);return n==null?null:{"goog-listen-tags":n}}function FT(r){return r.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=Pa(n.unaryFilter.field);return ve.create(s,"==",{doubleValue:NaN});case"IS_NULL":const l=Pa(n.unaryFilter.field);return ve.create(l,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=Pa(n.unaryFilter.field);return ve.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=Pa(n.unaryFilter.field);return ve.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return yt(61313);default:return yt(60726)}})(r):r.fieldFilter!==void 0?(function(n){return ve.create(Pa(n.fieldFilter.field),(function(l){switch(l){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return yt(58110);default:return yt(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(n){return jn.create(n.compositeFilter.filters.map((s=>FT(s))),(function(l){switch(l){case"AND":return"and";case"OR":return"or";default:return yt(1026)}})(n.compositeFilter.op))})(r):yt(30097,{filter:r})}function RI(r){return dI[r]}function II(r){return mI[r]}function CI(r){return gI[r]}function ka(r){return{fieldPath:r.canonicalString()}}function Pa(r){return He.fromServerFormat(r.fieldPath)}function QT(r){return r instanceof ve?(function(n){if(n.op==="=="){if(vv(n.value))return{unaryFilter:{field:ka(n.field),op:"IS_NAN"}};if(_v(n.value))return{unaryFilter:{field:ka(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(vv(n.value))return{unaryFilter:{field:ka(n.field),op:"IS_NOT_NAN"}};if(_v(n.value))return{unaryFilter:{field:ka(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ka(n.field),op:II(n.op),value:n.value}}})(r):r instanceof jn?(function(n){const s=n.getFilters().map((l=>QT(l)));return s.length===1?s[0]:{compositeFilter:{op:CI(n.op),filters:s}}})(r):yt(54877,{filter:r})}function DI(r){const t=[];return r.fields.forEach((n=>t.push(n.canonicalString()))),{fieldPaths:t}}function KT(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cr{constructor(t,n,s,l,c=Tt.min(),d=Tt.min(),g=Ge.EMPTY_BYTE_STRING,p=null){this.target=t,this.targetId=n,this.purpose=s,this.sequenceNumber=l,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=g,this.expectedCount=p}withSequenceNumber(t){return new Cr(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new Cr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Cr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Cr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NI{constructor(t){this.yt=t}}function OI(r){const t=bI({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?nm(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VI{constructor(){this.Cn=new MI}addToCollectionParentIndex(t,n){return this.Cn.add(n),X.resolve()}getCollectionParents(t,n){return X.resolve(this.Cn.getEntries(n))}addFieldIndex(t,n){return X.resolve()}deleteFieldIndex(t,n){return X.resolve()}deleteAllFieldIndexes(t){return X.resolve()}createTargetIndexes(t,n){return X.resolve()}getDocumentsMatchingTarget(t,n){return X.resolve(null)}getIndexType(t,n){return X.resolve(0)}getFieldIndexes(t,n){return X.resolve([])}getNextCollectionGroupToUpdate(t){return X.resolve(null)}getMinOffset(t,n){return X.resolve(Pr.min())}getMinOffsetFromCollectionGroup(t,n){return X.resolve(Pr.min())}updateCollectionGroup(t,n,s){return X.resolve()}updateIndexEntries(t,n){return X.resolve()}}class MI{constructor(){this.index={}}add(t){const n=t.lastSegment(),s=t.popLast(),l=this.index[n]||new Ce(Jt.comparator),c=!l.has(s);return this.index[n]=l.add(s),c}has(t){const n=t.lastSegment(),s=t.popLast(),l=this.index[n];return l&&l.has(s)}getEntries(t){return(this.index[t]||new Ce(Jt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},YT=41943040;class an{static withCacheSize(t){return new an(t,an.DEFAULT_COLLECTION_PERCENTILE,an.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,s){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */an.DEFAULT_COLLECTION_PERCENTILE=10,an.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,an.DEFAULT=new an(YT,an.DEFAULT_COLLECTION_PERCENTILE,an.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),an.DISABLED=new an(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ya{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new Ya(0)}static cr(){return new Ya(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xv="LruGarbageCollector",xI=1048576;function kv([r,t],[n,s]){const l=Nt(r,n);return l===0?Nt(t,s):l}class kI{constructor(t){this.Ir=t,this.buffer=new Ce(kv),this.Er=0}dr(){return++this.Er}Ar(t){const n=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();kv(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class PI{constructor(t,n,s){this.garbageCollector=t,this.asyncQueue=n,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){it(xv,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){no(n)?it(xv,"Ignoring IndexedDB error during garbage collection: ",n):await eo(n)}await this.Vr(3e5)}))}}class UI{constructor(t,n){this.mr=t,this.params=n}calculateTargetCount(t,n){return this.mr.gr(t).next((s=>Math.floor(n/100*s)))}nthSequenceNumber(t,n){if(n===0)return X.resolve(oh.ce);const s=new kI(n);return this.mr.forEachTarget(t,(l=>s.Ar(l.sequenceNumber))).next((()=>this.mr.pr(t,(l=>s.Ar(l))))).next((()=>s.maxValue))}removeTargets(t,n,s){return this.mr.removeTargets(t,n,s)}removeOrphanedDocuments(t,n){return this.mr.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(it("LruGarbageCollector","Garbage collection skipped; disabled"),X.resolve(Mv)):this.getCacheSize(t).next((s=>s<this.params.cacheSizeCollectionThreshold?(it("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Mv):this.yr(t,n)))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,n){let s,l,c,d,g,p,_;const A=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((I=>(I>this.params.maximumSequenceNumbersToCollect?(it("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${I}`),l=this.params.maximumSequenceNumbersToCollect):l=I,d=Date.now(),this.nthSequenceNumber(t,l)))).next((I=>(s=I,g=Date.now(),this.removeTargets(t,s,n)))).next((I=>(c=I,p=Date.now(),this.removeOrphanedDocuments(t,s)))).next((I=>(_=Date.now(),Ma()<=Dt.DEBUG&&it("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-A}ms
	Determined least recently used ${l} in `+(g-d)+`ms
	Removed ${c} targets in `+(p-g)+`ms
	Removed ${I} documents in `+(_-p)+`ms
Total Duration: ${_-A}ms`),X.resolve({didRun:!0,sequenceNumbersCollected:l,targetsRemoved:c,documentsRemoved:I}))))}}function LI(r,t){return new UI(r,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zI{constructor(){this.changes=new zs((t=>t.toString()),((t,n)=>t.isEqual(n))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,$e.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?X.resolve(s):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BI{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qI{constructor(t,n,s,l){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=l}getDocument(t,n){let s=null;return this.documentOverlayCache.getOverlay(t,n).next((l=>(s=l,this.remoteDocumentCache.getEntry(t,n)))).next((l=>(s!==null&&Il(s.mutation,l,yn.empty(),te.now()),l)))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next((s=>this.getLocalViewOfDocuments(t,s,Ot()).next((()=>s))))}getLocalViewOfDocuments(t,n,s=Ot()){const l=Ns();return this.populateOverlays(t,l,n).next((()=>this.computeViews(t,n,l,s).next((c=>{let d=vl();return c.forEach(((g,p)=>{d=d.insert(g,p.overlayedDocument)})),d}))))}getOverlayedDocuments(t,n){const s=Ns();return this.populateOverlays(t,s,n).next((()=>this.computeViews(t,n,s,Ot())))}populateOverlays(t,n,s){const l=[];return s.forEach((c=>{n.has(c)||l.push(c)})),this.documentOverlayCache.getOverlays(t,l).next((c=>{c.forEach(((d,g)=>{n.set(d,g)}))}))}computeViews(t,n,s,l){let c=Qi();const d=Rl(),g=(function(){return Rl()})();return n.forEach(((p,_)=>{const A=s.get(_.key);l.has(_.key)&&(A===void 0||A.mutation instanceof Fr)?c=c.insert(_.key,_):A!==void 0?(d.set(_.key,A.mutation.getFieldMask()),Il(A.mutation,_,A.mutation.getFieldMask(),te.now())):d.set(_.key,yn.empty())})),this.recalculateAndSaveOverlays(t,c).next((p=>(p.forEach(((_,A)=>d.set(_,A))),n.forEach(((_,A)=>g.set(_,new BI(A,d.get(_)??null)))),g)))}recalculateAndSaveOverlays(t,n){const s=Rl();let l=new ae(((d,g)=>d-g)),c=Ot();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next((d=>{for(const g of d)g.keys().forEach((p=>{const _=n.get(p);if(_===null)return;let A=s.get(p)||yn.empty();A=g.applyToLocalView(_,A),s.set(p,A);const I=(l.get(g.batchId)||Ot()).add(p);l=l.insert(g.batchId,I)}))})).next((()=>{const d=[],g=l.getReverseIterator();for(;g.hasNext();){const p=g.getNext(),_=p.key,A=p.value,I=NT();A.forEach((D=>{if(!c.has(D)){const H=PT(n.get(D),s.get(D));H!==null&&I.set(D,H),c=c.add(D)}})),d.push(this.documentOverlayCache.saveOverlays(t,_,I))}return X.waitFor(d)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next((s=>this.recalculateAndSaveOverlays(t,s)))}getDocumentsMatchingQuery(t,n,s,l){return(function(d){return ut.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):wT(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,s,l):this.getDocumentsMatchingCollectionQuery(t,n,s,l)}getNextDocuments(t,n,s,l){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,s,l).next((c=>{const d=l-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,s.largestBatchId,l-c.size):X.resolve(Ns());let g=Ol,p=c;return d.next((_=>X.forEach(_,((A,I)=>(g<I.largestBatchId&&(g=I.largestBatchId),c.get(A)?X.resolve():this.remoteDocumentCache.getEntry(t,A).next((D=>{p=p.insert(A,D)}))))).next((()=>this.populateOverlays(t,_,c))).next((()=>this.computeViews(t,p,_,Ot()))).next((A=>({batchId:g,changes:DT(A)})))))}))}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new ut(n)).next((s=>{let l=vl();return s.isFoundDocument()&&(l=l.insert(s.key,s)),l}))}getDocumentsMatchingCollectionGroupQuery(t,n,s,l){const c=n.collectionGroup;let d=vl();return this.indexManager.getCollectionParents(t,c).next((g=>X.forEach(g,(p=>{const _=(function(I,D){return new Gl(D,null,I.explicitOrderBy.slice(),I.filters.slice(),I.limit,I.limitType,I.startAt,I.endAt)})(n,p.child(c));return this.getDocumentsMatchingCollectionQuery(t,_,s,l).next((A=>{A.forEach(((I,D)=>{d=d.insert(I,D)}))}))})).next((()=>d))))}getDocumentsMatchingCollectionQuery(t,n,s,l){let c;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,s.largestBatchId).next((d=>(c=d,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,s,c,l)))).next((d=>{c.forEach(((p,_)=>{const A=_.getKey();d.get(A)===null&&(d=d.insert(A,$e.newInvalidDocument(A)))}));let g=vl();return d.forEach(((p,_)=>{const A=c.get(p);A!==void 0&&Il(A.mutation,_,yn.empty(),te.now()),hh(n,_)&&(g=g.insert(p,_))})),g}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jI{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,n){return X.resolve(this.Lr.get(n))}saveBundleMetadata(t,n){return this.Lr.set(n.id,(function(l){return{id:l.id,version:l.version,createTime:ci(l.createTime)}})(n)),X.resolve()}getNamedQuery(t,n){return X.resolve(this.kr.get(n))}saveNamedQuery(t,n){return this.kr.set(n.name,(function(l){return{name:l.name,query:OI(l.bundledQuery),readTime:ci(l.readTime)}})(n)),X.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HI{constructor(){this.overlays=new ae(ut.comparator),this.qr=new Map}getOverlay(t,n){return X.resolve(this.overlays.get(n))}getOverlays(t,n){const s=Ns();return X.forEach(n,(l=>this.getOverlay(t,l).next((c=>{c!==null&&s.set(l,c)})))).next((()=>s))}saveOverlays(t,n,s){return s.forEach(((l,c)=>{this.St(t,n,c)})),X.resolve()}removeOverlaysForBatchId(t,n,s){const l=this.qr.get(s);return l!==void 0&&(l.forEach((c=>this.overlays=this.overlays.remove(c))),this.qr.delete(s)),X.resolve()}getOverlaysForCollection(t,n,s){const l=Ns(),c=n.length+1,d=new ut(n.child("")),g=this.overlays.getIteratorFrom(d);for(;g.hasNext();){const p=g.getNext().value,_=p.getKey();if(!n.isPrefixOf(_.path))break;_.path.length===c&&p.largestBatchId>s&&l.set(p.getKey(),p)}return X.resolve(l)}getOverlaysForCollectionGroup(t,n,s,l){let c=new ae(((_,A)=>_-A));const d=this.overlays.getIterator();for(;d.hasNext();){const _=d.getNext().value;if(_.getKey().getCollectionGroup()===n&&_.largestBatchId>s){let A=c.get(_.largestBatchId);A===null&&(A=Ns(),c=c.insert(_.largestBatchId,A)),A.set(_.getKey(),_)}}const g=Ns(),p=c.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((_,A)=>g.set(_,A))),!(g.size()>=l)););return X.resolve(g)}St(t,n,s){const l=this.overlays.get(s.key);if(l!==null){const d=this.qr.get(l.largestBatchId).delete(s.key);this.qr.set(l.largestBatchId,d)}this.overlays=this.overlays.insert(s.key,new oI(n,s));let c=this.qr.get(n);c===void 0&&(c=Ot(),this.qr.set(n,c)),this.qr.set(n,c.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GI{constructor(){this.sessionToken=Ge.EMPTY_BYTE_STRING}getSessionToken(t){return X.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,X.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zm{constructor(){this.Qr=new Ce(ke.$r),this.Ur=new Ce(ke.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,n){const s=new ke(t,n);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(t,n){t.forEach((s=>this.addReference(s,n)))}removeReference(t,n){this.Gr(new ke(t,n))}zr(t,n){t.forEach((s=>this.removeReference(s,n)))}jr(t){const n=new ut(new Jt([])),s=new ke(n,t),l=new ke(n,t+1),c=[];return this.Ur.forEachInRange([s,l],(d=>{this.Gr(d),c.push(d.key)})),c}Jr(){this.Qr.forEach((t=>this.Gr(t)))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const n=new ut(new Jt([])),s=new ke(n,t),l=new ke(n,t+1);let c=Ot();return this.Ur.forEachInRange([s,l],(d=>{c=c.add(d.key)})),c}containsKey(t){const n=new ke(t,0),s=this.Qr.firstAfterOrEqual(n);return s!==null&&t.isEqual(s.key)}}class ke{constructor(t,n){this.key=t,this.Yr=n}static $r(t,n){return ut.comparator(t.key,n.key)||Nt(t.Yr,n.Yr)}static Kr(t,n){return Nt(t.Yr,n.Yr)||ut.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FI{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Ce(ke.$r)}checkEmpty(t){return X.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,s,l){const c=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new aI(c,n,s,l);this.mutationQueue.push(d);for(const g of l)this.Zr=this.Zr.add(new ke(g.key,c)),this.indexManager.addToCollectionParentIndex(t,g.key.path.popLast());return X.resolve(d)}lookupMutationBatch(t,n){return X.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(t,n){const s=n+1,l=this.ei(s),c=l<0?0:l;return X.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return X.resolve(this.mutationQueue.length===0?Cm:this.tr-1)}getAllMutationBatches(t){return X.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const s=new ke(n,0),l=new ke(n,Number.POSITIVE_INFINITY),c=[];return this.Zr.forEachInRange([s,l],(d=>{const g=this.Xr(d.Yr);c.push(g)})),X.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(t,n){let s=new Ce(Nt);return n.forEach((l=>{const c=new ke(l,0),d=new ke(l,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([c,d],(g=>{s=s.add(g.Yr)}))})),X.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(t,n){const s=n.path,l=s.length+1;let c=s;ut.isDocumentKey(c)||(c=c.child(""));const d=new ke(new ut(c),0);let g=new Ce(Nt);return this.Zr.forEachWhile((p=>{const _=p.key.path;return!!s.isPrefixOf(_)&&(_.length===l&&(g=g.add(p.Yr)),!0)}),d),X.resolve(this.ti(g))}ti(t){const n=[];return t.forEach((s=>{const l=this.Xr(s);l!==null&&n.push(l)})),n}removeMutationBatch(t,n){jt(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return X.forEach(n.mutations,(l=>{const c=new ke(l.key,n.batchId);return s=s.delete(c),this.referenceDelegate.markPotentiallyOrphaned(t,l.key)})).next((()=>{this.Zr=s}))}ir(t){}containsKey(t,n){const s=new ke(n,0),l=this.Zr.firstAfterOrEqual(s);return X.resolve(n.isEqual(l&&l.key))}performConsistencyCheck(t){return this.mutationQueue.length,X.resolve()}ni(t,n){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const n=this.ei(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QI{constructor(t){this.ri=t,this.docs=(function(){return new ae(ut.comparator)})(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const s=n.key,l=this.docs.get(s),c=l?l.size:0,d=this.ri(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:d}),this.size+=d-c,this.indexManager.addToCollectionParentIndex(t,s.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const s=this.docs.get(n);return X.resolve(s?s.document.mutableCopy():$e.newInvalidDocument(n))}getEntries(t,n){let s=Qi();return n.forEach((l=>{const c=this.docs.get(l);s=s.insert(l,c?c.document.mutableCopy():$e.newInvalidDocument(l))})),X.resolve(s)}getDocumentsMatchingQuery(t,n,s,l){let c=Qi();const d=n.path,g=new ut(d.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(g);for(;p.hasNext();){const{key:_,value:{document:A}}=p.getNext();if(!d.isPrefixOf(_.path))break;_.path.length>d.length+1||TR(ER(A),s)<=0||(l.has(A.key)||hh(n,A))&&(c=c.insert(A.key,A.mutableCopy()))}return X.resolve(c)}getAllFromCollectionGroup(t,n,s,l){yt(9500)}ii(t,n){return X.forEach(this.docs,(s=>n(s)))}newChangeBuffer(t){return new KI(this)}getSize(t){return X.resolve(this.size)}}class KI extends zI{constructor(t){super(),this.Nr=t}applyChanges(t){const n=[];return this.changes.forEach(((s,l)=>{l.isValidDocument()?n.push(this.Nr.addEntry(t,l)):this.Nr.removeEntry(s)})),X.waitFor(n)}getFromCache(t,n){return this.Nr.getEntry(t,n)}getAllFromCache(t,n){return this.Nr.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YI{constructor(t){this.persistence=t,this.si=new zs((n=>Om(n)),Vm),this.lastRemoteSnapshotVersion=Tt.min(),this.highestTargetId=0,this.oi=0,this._i=new zm,this.targetCount=0,this.ai=Ya.ur()}forEachTarget(t,n){return this.si.forEach(((s,l)=>n(l))),X.resolve()}getLastRemoteSnapshotVersion(t){return X.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return X.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),X.resolve(this.highestTargetId)}setTargetsMetadata(t,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.oi&&(this.oi=n),X.resolve()}Pr(t){this.si.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.ai=new Ya(n),this.highestTargetId=n),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,n){return this.Pr(n),this.targetCount+=1,X.resolve()}updateTargetData(t,n){return this.Pr(n),X.resolve()}removeTargetData(t,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,X.resolve()}removeTargets(t,n,s){let l=0;const c=[];return this.si.forEach(((d,g)=>{g.sequenceNumber<=n&&s.get(g.targetId)===null&&(this.si.delete(d),c.push(this.removeMatchingKeysForTargetId(t,g.targetId)),l++)})),X.waitFor(c).next((()=>l))}getTargetCount(t){return X.resolve(this.targetCount)}getTargetData(t,n){const s=this.si.get(n)||null;return X.resolve(s)}addMatchingKeys(t,n,s){return this._i.Wr(n,s),X.resolve()}removeMatchingKeys(t,n,s){this._i.zr(n,s);const l=this.persistence.referenceDelegate,c=[];return l&&n.forEach((d=>{c.push(l.markPotentiallyOrphaned(t,d))})),X.waitFor(c)}removeMatchingKeysForTargetId(t,n){return this._i.jr(n),X.resolve()}getMatchingKeysForTargetId(t,n){const s=this._i.Hr(n);return X.resolve(s)}containsKey(t,n){return X.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XT{constructor(t,n){this.ui={},this.overlays={},this.ci=new oh(0),this.li=!1,this.li=!0,this.hi=new GI,this.referenceDelegate=t(this),this.Pi=new YI(this),this.indexManager=new VI,this.remoteDocumentCache=(function(l){return new QI(l)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new NI(n),this.Ii=new jI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new HI,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let s=this.ui[t.toKey()];return s||(s=new FI(n,this.referenceDelegate),this.ui[t.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,n,s){it("MemoryPersistence","Starting transaction:",t);const l=new XI(this.ci.next());return this.referenceDelegate.Ei(),s(l).next((c=>this.referenceDelegate.di(l).next((()=>c)))).toPromise().then((c=>(l.raiseOnCommittedEvent(),c)))}Ai(t,n){return X.or(Object.values(this.ui).map((s=>()=>s.containsKey(t,n))))}}class XI extends SR{constructor(t){super(),this.currentSequenceNumber=t}}class Bm{constructor(t){this.persistence=t,this.Ri=new zm,this.Vi=null}static mi(t){return new Bm(t)}get fi(){if(this.Vi)return this.Vi;throw yt(60996)}addReference(t,n,s){return this.Ri.addReference(s,n),this.fi.delete(s.toString()),X.resolve()}removeReference(t,n,s){return this.Ri.removeReference(s,n),this.fi.add(s.toString()),X.resolve()}markPotentiallyOrphaned(t,n){return this.fi.add(n.toString()),X.resolve()}removeTarget(t,n){this.Ri.jr(n.targetId).forEach((l=>this.fi.add(l.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(t,n.targetId).next((l=>{l.forEach((c=>this.fi.add(c.toString())))})).next((()=>s.removeTargetData(t,n)))}Ei(){this.Vi=new Set}di(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return X.forEach(this.fi,(s=>{const l=ut.fromPath(s);return this.gi(t,l).next((c=>{c||n.removeEntry(l,Tt.min())}))})).next((()=>(this.Vi=null,n.apply(t))))}updateLimboDocument(t,n){return this.gi(t,n).next((s=>{s?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(t){return 0}gi(t,n){return X.or([()=>X.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Ai(t,n)])}}class Wc{constructor(t,n){this.persistence=t,this.pi=new zs((s=>RR(s.path)),((s,l)=>s.isEqual(l))),this.garbageCollector=LI(this,n)}static mi(t,n){return new Wc(t,n)}Ei(){}di(t){return X.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}gr(t){const n=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next((s=>n.next((l=>s+l))))}wr(t){let n=0;return this.pr(t,(s=>{n++})).next((()=>n))}pr(t,n){return X.forEach(this.pi,((s,l)=>this.br(t,s,l).next((c=>c?X.resolve():n(l)))))}removeTargets(t,n,s){return this.persistence.getTargetCache().removeTargets(t,n,s)}removeOrphanedDocuments(t,n){let s=0;const l=this.persistence.getRemoteDocumentCache(),c=l.newChangeBuffer();return l.ii(t,(d=>this.br(t,d,n).next((g=>{g||(s++,c.removeEntry(d,Tt.min()))})))).next((()=>c.apply(t))).next((()=>s))}markPotentiallyOrphaned(t,n){return this.pi.set(n,t.currentSequenceNumber),X.resolve()}removeTarget(t,n){const s=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,s)}addReference(t,n,s){return this.pi.set(s,t.currentSequenceNumber),X.resolve()}removeReference(t,n,s){return this.pi.set(s,t.currentSequenceNumber),X.resolve()}updateLimboDocument(t,n){return this.pi.set(n,t.currentSequenceNumber),X.resolve()}Ti(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=Oc(t.data.value)),n}br(t,n,s){return X.or([()=>this.persistence.Ai(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const l=this.pi.get(n);return X.resolve(l!==void 0&&l>s)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qm{constructor(t,n,s,l){this.targetId=t,this.fromCache=n,this.Es=s,this.ds=l}static As(t,n){let s=Ot(),l=Ot();for(const c of n.docChanges)switch(c.type){case 0:s=s.add(c.doc.key);break;case 1:l=l.add(c.doc.key)}return new qm(t,n.fromCache,s,l)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $I{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZI{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return RA()?8:bR(Ze())>0?6:4})()}initialize(t,n){this.ps=t,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(t,n,s,l){const c={result:null};return this.ys(t,n).next((d=>{c.result=d})).next((()=>{if(!c.result)return this.ws(t,n,l,s).next((d=>{c.result=d}))})).next((()=>{if(c.result)return;const d=new $I;return this.Ss(t,n,d).next((g=>{if(c.result=g,this.Vs)return this.bs(t,n,d,g.size)}))})).next((()=>c.result))}bs(t,n,s,l){return s.documentReadCount<this.fs?(Ma()<=Dt.DEBUG&&it("QueryEngine","SDK will not create cache indexes for query:",xa(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),X.resolve()):(Ma()<=Dt.DEBUG&&it("QueryEngine","Query:",xa(n),"scans",s.documentReadCount,"local documents and returns",l,"documents as results."),s.documentReadCount>this.gs*l?(Ma()<=Dt.DEBUG&&it("QueryEngine","The SDK decides to create cache indexes for query:",xa(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,ui(n))):X.resolve())}ys(t,n){if(Sv(n))return X.resolve(null);let s=ui(n);return this.indexManager.getIndexType(t,s).next((l=>l===0?null:(n.limit!==null&&l===1&&(n=nm(n,null,"F"),s=ui(n)),this.indexManager.getDocumentsMatchingTarget(t,s).next((c=>{const d=Ot(...c);return this.ps.getDocuments(t,d).next((g=>this.indexManager.getMinOffset(t,s).next((p=>{const _=this.Ds(n,g);return this.Cs(n,_,d,p.readTime)?this.ys(t,nm(n,null,"F")):this.vs(t,_,n,p)}))))})))))}ws(t,n,s,l){return Sv(n)||l.isEqual(Tt.min())?X.resolve(null):this.ps.getDocuments(t,s).next((c=>{const d=this.Ds(n,c);return this.Cs(n,d,s,l)?X.resolve(null):(Ma()<=Dt.DEBUG&&it("QueryEngine","Re-using previous result from %s to execute query: %s",l.toString(),xa(n)),this.vs(t,d,n,vR(l,Ol)).next((g=>g)))}))}Ds(t,n){let s=new Ce(IT(t));return n.forEach(((l,c)=>{hh(t,c)&&(s=s.add(c))})),s}Cs(t,n,s,l){if(t.limit===null)return!1;if(s.size!==n.size)return!0;const c=t.limitType==="F"?n.last():n.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(l)>0)}Ss(t,n,s){return Ma()<=Dt.DEBUG&&it("QueryEngine","Using full collection scan to execute query:",xa(n)),this.ps.getDocumentsMatchingQuery(t,n,Pr.min(),s)}vs(t,n,s,l){return this.ps.getDocumentsMatchingQuery(t,s,l).next((c=>(n.forEach((d=>{c=c.insert(d.key,d)})),c)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jm="LocalStore",WI=3e8;class JI{constructor(t,n,s,l){this.persistence=t,this.Fs=n,this.serializer=l,this.Ms=new ae(Nt),this.xs=new zs((c=>Om(c)),Vm),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(s)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new qI(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>t.collect(n,this.Ms)))}}function tC(r,t,n,s){return new JI(r,t,n,s)}async function $T(r,t){const n=St(r);return await n.persistence.runTransaction("Handle user change","readonly",(s=>{let l;return n.mutationQueue.getAllMutationBatches(s).next((c=>(l=c,n.Bs(t),n.mutationQueue.getAllMutationBatches(s)))).next((c=>{const d=[],g=[];let p=Ot();for(const _ of l){d.push(_.batchId);for(const A of _.mutations)p=p.add(A.key)}for(const _ of c){g.push(_.batchId);for(const A of _.mutations)p=p.add(A.key)}return n.localDocuments.getDocuments(s,p).next((_=>({Ls:_,removedBatchIds:d,addedBatchIds:g})))}))}))}function eC(r,t){const n=St(r);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const l=t.batch.keys(),c=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(g,p,_,A){const I=_.batch,D=I.keys();let H=X.resolve();return D.forEach((Z=>{H=H.next((()=>A.getEntry(p,Z))).next((nt=>{const W=_.docVersions.get(Z);jt(W!==null,48541),nt.version.compareTo(W)<0&&(I.applyToRemoteDocument(nt,_),nt.isValidDocument()&&(nt.setReadTime(_.commitVersion),A.addEntry(nt)))}))})),H.next((()=>g.mutationQueue.removeMutationBatch(p,I)))})(n,s,t,c).next((()=>c.apply(s))).next((()=>n.mutationQueue.performConsistencyCheck(s))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(s,l,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(g){let p=Ot();for(let _=0;_<g.mutationResults.length;++_)g.mutationResults[_].transformResults.length>0&&(p=p.add(g.batch.mutations[_].key));return p})(t)))).next((()=>n.localDocuments.getDocuments(s,l)))}))}function ZT(r){const t=St(r);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>t.Pi.getLastRemoteSnapshotVersion(n)))}function nC(r,t){const n=St(r),s=t.snapshotVersion;let l=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(c=>{const d=n.Ns.newChangeBuffer({trackRemovals:!0});l=n.Ms;const g=[];t.targetChanges.forEach(((A,I)=>{const D=l.get(I);if(!D)return;g.push(n.Pi.removeMatchingKeys(c,A.removedDocuments,I).next((()=>n.Pi.addMatchingKeys(c,A.addedDocuments,I))));let H=D.withSequenceNumber(c.currentSequenceNumber);t.targetMismatches.get(I)!==null?H=H.withResumeToken(Ge.EMPTY_BYTE_STRING,Tt.min()).withLastLimboFreeSnapshotVersion(Tt.min()):A.resumeToken.approximateByteSize()>0&&(H=H.withResumeToken(A.resumeToken,s)),l=l.insert(I,H),(function(nt,W,vt){return nt.resumeToken.approximateByteSize()===0||W.snapshotVersion.toMicroseconds()-nt.snapshotVersion.toMicroseconds()>=WI?!0:vt.addedDocuments.size+vt.modifiedDocuments.size+vt.removedDocuments.size>0})(D,H,A)&&g.push(n.Pi.updateTargetData(c,H))}));let p=Qi(),_=Ot();if(t.documentUpdates.forEach((A=>{t.resolvedLimboDocuments.has(A)&&g.push(n.persistence.referenceDelegate.updateLimboDocument(c,A))})),g.push(iC(c,d,t.documentUpdates).next((A=>{p=A.ks,_=A.qs}))),!s.isEqual(Tt.min())){const A=n.Pi.getLastRemoteSnapshotVersion(c).next((I=>n.Pi.setTargetsMetadata(c,c.currentSequenceNumber,s)));g.push(A)}return X.waitFor(g).next((()=>d.apply(c))).next((()=>n.localDocuments.getLocalViewOfDocuments(c,p,_))).next((()=>p))})).then((c=>(n.Ms=l,c)))}function iC(r,t,n){let s=Ot(),l=Ot();return n.forEach((c=>s=s.add(c))),t.getEntries(r,s).next((c=>{let d=Qi();return n.forEach(((g,p)=>{const _=c.get(g);p.isFoundDocument()!==_.isFoundDocument()&&(l=l.add(g)),p.isNoDocument()&&p.version.isEqual(Tt.min())?(t.removeEntry(g,p.readTime),d=d.insert(g,p)):!_.isValidDocument()||p.version.compareTo(_.version)>0||p.version.compareTo(_.version)===0&&_.hasPendingWrites?(t.addEntry(p),d=d.insert(g,p)):it(jm,"Ignoring outdated watch update for ",g,". Current version:",_.version," Watch version:",p.version)})),{ks:d,qs:l}}))}function rC(r,t){const n=St(r);return n.persistence.runTransaction("Get next mutation batch","readonly",(s=>(t===void 0&&(t=Cm),n.mutationQueue.getNextMutationBatchAfterBatchId(s,t))))}function sC(r,t){const n=St(r);return n.persistence.runTransaction("Allocate target","readwrite",(s=>{let l;return n.Pi.getTargetData(s,t).next((c=>c?(l=c,X.resolve(l)):n.Pi.allocateTargetId(s).next((d=>(l=new Cr(t,d,"TargetPurposeListen",s.currentSequenceNumber),n.Pi.addTargetData(s,l).next((()=>l)))))))})).then((s=>{const l=n.Ms.get(s.targetId);return(l===null||s.snapshotVersion.compareTo(l.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(s.targetId,s),n.xs.set(t,s.targetId)),s}))}async function om(r,t,n){const s=St(r),l=s.Ms.get(t),c=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",c,(d=>s.persistence.referenceDelegate.removeTarget(d,l)))}catch(d){if(!no(d))throw d;it(jm,`Failed to update sequence numbers for target ${t}: ${d}`)}s.Ms=s.Ms.remove(t),s.xs.delete(l.target)}function Pv(r,t,n){const s=St(r);let l=Tt.min(),c=Ot();return s.persistence.runTransaction("Execute query","readwrite",(d=>(function(p,_,A){const I=St(p),D=I.xs.get(A);return D!==void 0?X.resolve(I.Ms.get(D)):I.Pi.getTargetData(_,A)})(s,d,ui(t)).next((g=>{if(g)return l=g.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(d,g.targetId).next((p=>{c=p}))})).next((()=>s.Fs.getDocumentsMatchingQuery(d,t,n?l:Tt.min(),n?c:Ot()))).next((g=>(aC(s,FR(t),g),{documents:g,Qs:c})))))}function aC(r,t,n){let s=r.Os.get(t)||Tt.min();n.forEach(((l,c)=>{c.readTime.compareTo(s)>0&&(s=c.readTime)})),r.Os.set(t,s)}class Uv{constructor(){this.activeTargetIds=ZR()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class oC{constructor(){this.Mo=new Uv,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,s){}addLocalQueryTarget(t,n=!0){return n&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,n,s){this.xo[t]=n}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new Uv,Promise.resolve()}handleUserChange(t,n,s){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lC{Oo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lv="ConnectivityMonitor";class zv{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){it(Lv,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){it(Lv,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wc=null;function lm(){return wc===null?wc=(function(){return 268435456+Math.round(2147483648*Math.random())})():wc++,"0x"+wc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ud="RestConnection",uC={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class cC{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+t.host,this.Ko=`projects/${s}/databases/${l}`,this.Wo=this.databaseId.database===Fc?`project_id=${s}`:`project_id=${s}&database_id=${l}`}Go(t,n,s,l,c){const d=lm(),g=this.zo(t,n.toUriEncodedString());it(Ud,`Sending RPC '${t}' ${d}:`,g,s);const p={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(p,l,c);const{host:_}=new URL(g),A=Za(_);return this.Jo(t,g,p,s,A).then((I=>(it(Ud,`Received RPC '${t}' ${d}: `,I),I)),(I=>{throw Ga(Ud,`RPC '${t}' ${d} failed with error: `,I,"url: ",g,"request:",s),I}))}Ho(t,n,s,l,c,d){return this.Go(t,n,s,l,c)}jo(t,n,s){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+to})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((l,c)=>t[c]=l)),s&&s.headers.forEach(((l,c)=>t[c]=l))}zo(t,n){const s=uC[t];return`${this.Uo}/v1/${n}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hC{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ye="WebChannelConnection";class fC extends cC{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,n,s,l,c){const d=lm();return new Promise(((g,p)=>{const _=new tT;_.setWithCredentials(!0),_.listenOnce(eT.COMPLETE,(()=>{try{switch(_.getLastErrorCode()){case Nc.NO_ERROR:const I=_.getResponseJson();it(Ye,`XHR for RPC '${t}' ${d} received:`,JSON.stringify(I)),g(I);break;case Nc.TIMEOUT:it(Ye,`RPC '${t}' ${d} timed out`),p(new rt(Y.DEADLINE_EXCEEDED,"Request time out"));break;case Nc.HTTP_ERROR:const D=_.getStatus();if(it(Ye,`RPC '${t}' ${d} failed with status:`,D,"response text:",_.getResponseText()),D>0){let H=_.getResponseJson();Array.isArray(H)&&(H=H[0]);const Z=H?.error;if(Z&&Z.status&&Z.message){const nt=(function(vt){const dt=vt.toLowerCase().replace(/_/g,"-");return Object.values(Y).indexOf(dt)>=0?dt:Y.UNKNOWN})(Z.status);p(new rt(nt,Z.message))}else p(new rt(Y.UNKNOWN,"Server responded with status "+_.getStatus()))}else p(new rt(Y.UNAVAILABLE,"Connection failed."));break;default:yt(9055,{l_:t,streamId:d,h_:_.getLastErrorCode(),P_:_.getLastError()})}}finally{it(Ye,`RPC '${t}' ${d} completed.`)}}));const A=JSON.stringify(l);it(Ye,`RPC '${t}' ${d} sending request:`,l),_.send(n,"POST",A,s,15)}))}T_(t,n,s){const l=lm(),c=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],d=rT(),g=iT(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},_=this.longPollingOptions.timeoutSeconds;_!==void 0&&(p.longPollingTimeout=Math.round(1e3*_)),this.useFetchStreams&&(p.useFetchStreams=!0),this.jo(p.initMessageHeaders,n,s),p.encodeInitMessageHeaders=!0;const A=c.join("");it(Ye,`Creating RPC '${t}' stream ${l}: ${A}`,p);const I=d.createWebChannel(A,p);this.I_(I);let D=!1,H=!1;const Z=new hC({Yo:W=>{H?it(Ye,`Not sending because RPC '${t}' stream ${l} is closed:`,W):(D||(it(Ye,`Opening RPC '${t}' stream ${l} transport.`),I.open(),D=!0),it(Ye,`RPC '${t}' stream ${l} sending:`,W),I.send(W))},Zo:()=>I.close()}),nt=(W,vt,dt)=>{W.listen(vt,(ht=>{try{dt(ht)}catch(Vt){setTimeout((()=>{throw Vt}),0)}}))};return nt(I,_l.EventType.OPEN,(()=>{H||(it(Ye,`RPC '${t}' stream ${l} transport opened.`),Z.o_())})),nt(I,_l.EventType.CLOSE,(()=>{H||(H=!0,it(Ye,`RPC '${t}' stream ${l} transport closed`),Z.a_(),this.E_(I))})),nt(I,_l.EventType.ERROR,(W=>{H||(H=!0,Ga(Ye,`RPC '${t}' stream ${l} transport errored. Name:`,W.name,"Message:",W.message),Z.a_(new rt(Y.UNAVAILABLE,"The operation could not be completed")))})),nt(I,_l.EventType.MESSAGE,(W=>{if(!H){const vt=W.data[0];jt(!!vt,16349);const dt=vt,ht=dt?.error||dt[0]?.error;if(ht){it(Ye,`RPC '${t}' stream ${l} received error:`,ht);const Vt=ht.status;let Et=(function(S){const w=_e[S];if(w!==void 0)return LT(w)})(Vt),Ut=ht.message;Et===void 0&&(Et=Y.INTERNAL,Ut="Unknown error status: "+Vt+" with message "+ht.message),H=!0,Z.a_(new rt(Et,Ut)),I.close()}else it(Ye,`RPC '${t}' stream ${l} received:`,vt),Z.u_(vt)}})),nt(g,nT.STAT_EVENT,(W=>{W.stat===Xd.PROXY?it(Ye,`RPC '${t}' stream ${l} detected buffering proxy`):W.stat===Xd.NOPROXY&&it(Ye,`RPC '${t}' stream ${l} detected no buffering proxy`)})),setTimeout((()=>{Z.__()}),0),Z}terminate(){this.c_.forEach((t=>t.close())),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter((n=>n===t))}}function Ld(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gh(r){return new pI(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WT{constructor(t,n,s=1e3,l=1.5,c=6e4){this.Mi=t,this.timerId=n,this.d_=s,this.A_=l,this.R_=c,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const n=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),l=Math.max(0,n-s);l>0&&it("ExponentialBackoff",`Backing off for ${l} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,l,(()=>(this.f_=Date.now(),t()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bv="PersistentStream";class JT{constructor(t,n,s,l,c,d,g,p){this.Mi=t,this.S_=s,this.b_=l,this.connection=c,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=g,this.listener=p,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new WT(t,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():n&&n.code===Y.RESOURCE_EXHAUSTED?(Fi(n.toString()),Fi("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===Y.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(n)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,l])=>{this.D_===n&&this.G_(s,l)}),(s=>{t((()=>{const l=new rt(Y.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(l)}))}))}G_(t,n){const s=this.W_(this.D_);this.stream=this.j_(t,n),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((l=>{s((()=>this.z_(l)))})),this.stream.onMessage((l=>{s((()=>++this.F_==1?this.J_(l):this.onNext(l)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(t){return it(Bv,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return n=>{this.Mi.enqueueAndForget((()=>this.D_===t?n():(it(Bv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class dC extends JT{constructor(t,n,s,l,c,d){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,l,d),this.serializer=c}j_(t,n){return this.connection.T_("Listen",t,n)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const n=vI(this.serializer,t),s=(function(c){if(!("targetChange"in c))return Tt.min();const d=c.targetChange;return d.targetIds&&d.targetIds.length?Tt.min():d.readTime?ci(d.readTime):Tt.min()})(t);return this.listener.H_(n,s)}Y_(t){const n={};n.database=am(this.serializer),n.addTarget=(function(c,d){let g;const p=d.target;if(g=tm(p)?{documents:AI(c,p)}:{query:SI(c,p).ft},g.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){g.resumeToken=qT(c,d.resumeToken);const _=im(c,d.expectedCount);_!==null&&(g.expectedCount=_)}else if(d.snapshotVersion.compareTo(Tt.min())>0){g.readTime=Zc(c,d.snapshotVersion.toTimestamp());const _=im(c,d.expectedCount);_!==null&&(g.expectedCount=_)}return g})(this.serializer,t);const s=wI(this.serializer,t);s&&(n.labels=s),this.q_(n)}Z_(t){const n={};n.database=am(this.serializer),n.removeTarget=t,this.q_(n)}}class mC extends JT{constructor(t,n,s,l,c,d){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,l,d),this.serializer=c}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,n){return this.connection.T_("Write",t,n)}J_(t){return jt(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,jt(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){jt(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const n=TI(t.writeResults,t.commitTime),s=ci(t.commitTime);return this.listener.na(s,n)}ra(){const t={};t.database=am(this.serializer),this.q_(t)}ea(t){const n={streamToken:this.lastStreamToken,writes:t.map((s=>EI(this.serializer,s)))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gC{}class pC extends gC{constructor(t,n,s,l){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=s,this.serializer=l,this.ia=!1}sa(){if(this.ia)throw new rt(Y.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,n,s,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,d])=>this.connection.Go(t,rm(n,s),l,c,d))).catch((c=>{throw c.name==="FirebaseError"?(c.code===Y.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new rt(Y.UNKNOWN,c.toString())}))}Ho(t,n,s,l,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,g])=>this.connection.Ho(t,rm(n,s),l,d,g,c))).catch((d=>{throw d.name==="FirebaseError"?(d.code===Y.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new rt(Y.UNKNOWN,d.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class yC{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Fi(n),this.aa=!1):it("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Us="RemoteStore";class _C{constructor(t,n,s,l,c){this.localStore=t,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=c,this.Aa.Oo((d=>{s.enqueueAndForget((async()=>{Bs(this)&&(it(Us,"Restarting streams for network reachability change."),await(async function(p){const _=St(p);_.Ea.add(4),await Kl(_),_.Ra.set("Unknown"),_.Ea.delete(4),await ph(_)})(this))}))})),this.Ra=new yC(s,l)}}async function ph(r){if(Bs(r))for(const t of r.da)await t(!0)}async function Kl(r){for(const t of r.da)await t(!1)}function t0(r,t){const n=St(r);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),Qm(n)?Fm(n):io(n).O_()&&Gm(n,t))}function Hm(r,t){const n=St(r),s=io(n);n.Ia.delete(t),s.O_()&&e0(n,t),n.Ia.size===0&&(s.O_()?s.L_():Bs(n)&&n.Ra.set("Unknown"))}function Gm(r,t){if(r.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Tt.min())>0){const n=r.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}io(r).Y_(t)}function e0(r,t){r.Va.Ue(t),io(r).Z_(t)}function Fm(r){r.Va=new fI({getRemoteKeysForTarget:t=>r.remoteSyncer.getRemoteKeysForTarget(t),At:t=>r.Ia.get(t)||null,ht:()=>r.datastore.serializer.databaseId}),io(r).start(),r.Ra.ua()}function Qm(r){return Bs(r)&&!io(r).x_()&&r.Ia.size>0}function Bs(r){return St(r).Ea.size===0}function n0(r){r.Va=void 0}async function vC(r){r.Ra.set("Online")}async function EC(r){r.Ia.forEach(((t,n)=>{Gm(r,t)}))}async function TC(r,t){n0(r),Qm(r)?(r.Ra.ha(t),Fm(r)):r.Ra.set("Unknown")}async function AC(r,t,n){if(r.Ra.set("Online"),t instanceof BT&&t.state===2&&t.cause)try{await(async function(l,c){const d=c.cause;for(const g of c.targetIds)l.Ia.has(g)&&(await l.remoteSyncer.rejectListen(g,d),l.Ia.delete(g),l.Va.removeTarget(g))})(r,t)}catch(s){it(Us,"Failed to remove targets %s: %s ",t.targetIds.join(","),s),await Jc(r,s)}else if(t instanceof xc?r.Va.Ze(t):t instanceof zT?r.Va.st(t):r.Va.tt(t),!n.isEqual(Tt.min()))try{const s=await ZT(r.localStore);n.compareTo(s)>=0&&await(function(c,d){const g=c.Va.Tt(d);return g.targetChanges.forEach(((p,_)=>{if(p.resumeToken.approximateByteSize()>0){const A=c.Ia.get(_);A&&c.Ia.set(_,A.withResumeToken(p.resumeToken,d))}})),g.targetMismatches.forEach(((p,_)=>{const A=c.Ia.get(p);if(!A)return;c.Ia.set(p,A.withResumeToken(Ge.EMPTY_BYTE_STRING,A.snapshotVersion)),e0(c,p);const I=new Cr(A.target,p,_,A.sequenceNumber);Gm(c,I)})),c.remoteSyncer.applyRemoteEvent(g)})(r,n)}catch(s){it(Us,"Failed to raise snapshot:",s),await Jc(r,s)}}async function Jc(r,t,n){if(!no(t))throw t;r.Ea.add(1),await Kl(r),r.Ra.set("Offline"),n||(n=()=>ZT(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{it(Us,"Retrying IndexedDB access"),await n(),r.Ea.delete(1),await ph(r)}))}function i0(r,t){return t().catch((n=>Jc(r,n,t)))}async function yh(r){const t=St(r),n=Br(t);let s=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:Cm;for(;SC(t);)try{const l=await rC(t.localStore,s);if(l===null){t.Ta.length===0&&n.L_();break}s=l.batchId,bC(t,l)}catch(l){await Jc(t,l)}r0(t)&&s0(t)}function SC(r){return Bs(r)&&r.Ta.length<10}function bC(r,t){r.Ta.push(t);const n=Br(r);n.O_()&&n.X_&&n.ea(t.mutations)}function r0(r){return Bs(r)&&!Br(r).x_()&&r.Ta.length>0}function s0(r){Br(r).start()}async function wC(r){Br(r).ra()}async function RC(r){const t=Br(r);for(const n of r.Ta)t.ea(n.mutations)}async function IC(r,t,n){const s=r.Ta.shift(),l=Pm.from(s,t,n);await i0(r,(()=>r.remoteSyncer.applySuccessfulWrite(l))),await yh(r)}async function CC(r,t){t&&Br(r).X_&&await(async function(s,l){if((function(d){return uI(d)&&d!==Y.ABORTED})(l.code)){const c=s.Ta.shift();Br(s).B_(),await i0(s,(()=>s.remoteSyncer.rejectFailedWrite(c.batchId,l))),await yh(s)}})(r,t),r0(r)&&s0(r)}async function qv(r,t){const n=St(r);n.asyncQueue.verifyOperationInProgress(),it(Us,"RemoteStore received new credentials");const s=Bs(n);n.Ea.add(3),await Kl(n),s&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await ph(n)}async function DC(r,t){const n=St(r);t?(n.Ea.delete(2),await ph(n)):t||(n.Ea.add(2),await Kl(n),n.Ra.set("Unknown"))}function io(r){return r.ma||(r.ma=(function(n,s,l){const c=St(n);return c.sa(),new dC(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,l)})(r.datastore,r.asyncQueue,{Xo:vC.bind(null,r),t_:EC.bind(null,r),r_:TC.bind(null,r),H_:AC.bind(null,r)}),r.da.push((async t=>{t?(r.ma.B_(),Qm(r)?Fm(r):r.Ra.set("Unknown")):(await r.ma.stop(),n0(r))}))),r.ma}function Br(r){return r.fa||(r.fa=(function(n,s,l){const c=St(n);return c.sa(),new mC(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,l)})(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:wC.bind(null,r),r_:CC.bind(null,r),ta:RC.bind(null,r),na:IC.bind(null,r)}),r.da.push((async t=>{t?(r.fa.B_(),await yh(r)):(await r.fa.stop(),r.Ta.length>0&&(it(Us,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Km{constructor(t,n,s,l,c){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=s,this.op=l,this.removalCallback=c,this.deferred=new Os,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((d=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,n,s,l,c){const d=Date.now()+s,g=new Km(t,n,d,l,c);return g.start(s),g}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new rt(Y.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ym(r,t){if(Fi("AsyncQueue",`${t}: ${r}`),no(r))return new rt(Y.UNAVAILABLE,`${t}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qa{static emptySet(t){return new qa(t.comparator)}constructor(t){this.comparator=t?(n,s)=>t(n,s)||ut.comparator(n.key,s.key):(n,s)=>ut.comparator(n.key,s.key),this.keyedMap=vl(),this.sortedSet=new ae(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((n,s)=>(t(n),!1)))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof qa)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),s=t.sortedSet.getIterator();for(;n.hasNext();){const l=n.getNext().key,c=s.getNext().key;if(!l.isEqual(c))return!1}return!0}toString(){const t=[];return this.forEach((n=>{t.push(n.toString())})),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const s=new qa;return s.comparator=this.comparator,s.keyedMap=t,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jv{constructor(){this.ga=new ae(ut.comparator)}track(t){const n=t.doc.key,s=this.ga.get(n);s?t.type!==0&&s.type===3?this.ga=this.ga.insert(n,t):t.type===3&&s.type!==1?this.ga=this.ga.insert(n,{type:s.type,doc:t.doc}):t.type===2&&s.type===2?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):t.type===2&&s.type===0?this.ga=this.ga.insert(n,{type:0,doc:t.doc}):t.type===1&&s.type===0?this.ga=this.ga.remove(n):t.type===1&&s.type===2?this.ga=this.ga.insert(n,{type:1,doc:s.doc}):t.type===0&&s.type===1?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):yt(63341,{Rt:t,pa:s}):this.ga=this.ga.insert(n,t)}ya(){const t=[];return this.ga.inorderTraversal(((n,s)=>{t.push(s)})),t}}class Xa{constructor(t,n,s,l,c,d,g,p,_){this.query=t,this.docs=n,this.oldDocs=s,this.docChanges=l,this.mutatedKeys=c,this.fromCache=d,this.syncStateChanged=g,this.excludesMetadataChanges=p,this.hasCachedResults=_}static fromInitialDocuments(t,n,s,l,c){const d=[];return n.forEach((g=>{d.push({type:0,doc:g})})),new Xa(t,n,qa.emptySet(n),d,s,l,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&ch(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,s=t.docChanges;if(n.length!==s.length)return!1;for(let l=0;l<n.length;l++)if(n[l].type!==s[l].type||!n[l].doc.isEqual(s[l].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NC{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((t=>t.Da()))}}class OC{constructor(){this.queries=Hv(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const l=St(n),c=l.queries;l.queries=Hv(),c.forEach(((d,g)=>{for(const p of g.Sa)p.onError(s)}))})(this,new rt(Y.ABORTED,"Firestore shutting down"))}}function Hv(){return new zs((r=>RT(r)),ch)}async function VC(r,t){const n=St(r);let s=3;const l=t.query;let c=n.queries.get(l);c?!c.ba()&&t.Da()&&(s=2):(c=new NC,s=t.Da()?0:1);try{switch(s){case 0:c.wa=await n.onListen(l,!0);break;case 1:c.wa=await n.onListen(l,!1);break;case 2:await n.onFirstRemoteStoreListen(l)}}catch(d){const g=Ym(d,`Initialization of query '${xa(t.query)}' failed`);return void t.onError(g)}n.queries.set(l,c),c.Sa.push(t),t.va(n.onlineState),c.wa&&t.Fa(c.wa)&&Xm(n)}async function MC(r,t){const n=St(r),s=t.query;let l=3;const c=n.queries.get(s);if(c){const d=c.Sa.indexOf(t);d>=0&&(c.Sa.splice(d,1),c.Sa.length===0?l=t.Da()?0:1:!c.ba()&&t.Da()&&(l=2))}switch(l){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function xC(r,t){const n=St(r);let s=!1;for(const l of t){const c=l.query,d=n.queries.get(c);if(d){for(const g of d.Sa)g.Fa(l)&&(s=!0);d.wa=l}}s&&Xm(n)}function kC(r,t,n){const s=St(r),l=s.queries.get(t);if(l)for(const c of l.Sa)c.onError(n);s.queries.delete(t)}function Xm(r){r.Ca.forEach((t=>{t.next()}))}var um,Gv;(Gv=um||(um={})).Ma="default",Gv.Cache="cache";class PC{constructor(t,n,s){this.query=t,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(t){if(!this.options.includeMetadataChanges){const s=[];for(const l of t.docChanges)l.type!==3&&s.push(l);t=new Xa(t.query,t.docs,t.oldDocs,s,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),n=!0):this.La(t,this.onlineState)&&(this.ka(t),n=!0),this.Na=t,n}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),n=!0),n}La(t,n){if(!t.fromCache||!this.Da())return!0;const s=n!=="Offline";return(!this.options.qa||!s)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(t){t=Xa.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==um.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a0{constructor(t){this.key=t}}class o0{constructor(t){this.key=t}}class UC{constructor(t,n){this.query=t,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ot(),this.mutatedKeys=Ot(),this.eu=IT(t),this.tu=new qa(this.eu)}get nu(){return this.Ya}ru(t,n){const s=n?n.iu:new jv,l=n?n.tu:this.tu;let c=n?n.mutatedKeys:this.mutatedKeys,d=l,g=!1;const p=this.query.limitType==="F"&&l.size===this.query.limit?l.last():null,_=this.query.limitType==="L"&&l.size===this.query.limit?l.first():null;if(t.inorderTraversal(((A,I)=>{const D=l.get(A),H=hh(this.query,I)?I:null,Z=!!D&&this.mutatedKeys.has(D.key),nt=!!H&&(H.hasLocalMutations||this.mutatedKeys.has(H.key)&&H.hasCommittedMutations);let W=!1;D&&H?D.data.isEqual(H.data)?Z!==nt&&(s.track({type:3,doc:H}),W=!0):this.su(D,H)||(s.track({type:2,doc:H}),W=!0,(p&&this.eu(H,p)>0||_&&this.eu(H,_)<0)&&(g=!0)):!D&&H?(s.track({type:0,doc:H}),W=!0):D&&!H&&(s.track({type:1,doc:D}),W=!0,(p||_)&&(g=!0)),W&&(H?(d=d.add(H),c=nt?c.add(A):c.delete(A)):(d=d.delete(A),c=c.delete(A)))})),this.query.limit!==null)for(;d.size>this.query.limit;){const A=this.query.limitType==="F"?d.last():d.first();d=d.delete(A.key),c=c.delete(A.key),s.track({type:1,doc:A})}return{tu:d,iu:s,Cs:g,mutatedKeys:c}}su(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,s,l){const c=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const d=t.iu.ya();d.sort(((A,I)=>(function(H,Z){const nt=W=>{switch(W){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return yt(20277,{Rt:W})}};return nt(H)-nt(Z)})(A.type,I.type)||this.eu(A.doc,I.doc))),this.ou(s),l=l??!1;const g=n&&!l?this._u():[],p=this.Xa.size===0&&this.current&&!l?1:0,_=p!==this.Za;return this.Za=p,d.length!==0||_?{snapshot:new Xa(this.query,t.tu,c,d,t.mutatedKeys,p===0,_,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:g}:{au:g}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new jv,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),t.modifiedDocuments.forEach((n=>{})),t.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=Ot(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const n=[];return t.forEach((s=>{this.Xa.has(s)||n.push(new o0(s))})),this.Xa.forEach((s=>{t.has(s)||n.push(new a0(s))})),n}cu(t){this.Ya=t.Qs,this.Xa=Ot();const n=this.ru(t.documents);return this.applyChanges(n,!0)}lu(){return Xa.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const $m="SyncEngine";class LC{constructor(t,n,s){this.query=t,this.targetId=n,this.view=s}}class zC{constructor(t){this.key=t,this.hu=!1}}class BC{constructor(t,n,s,l,c,d){this.localStore=t,this.remoteStore=n,this.eventManager=s,this.sharedClientState=l,this.currentUser=c,this.maxConcurrentLimboResolutions=d,this.Pu={},this.Tu=new zs((g=>RT(g)),ch),this.Iu=new Map,this.Eu=new Set,this.du=new ae(ut.comparator),this.Au=new Map,this.Ru=new zm,this.Vu={},this.mu=new Map,this.fu=Ya.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function qC(r,t,n=!0){const s=d0(r);let l;const c=s.Tu.get(t);return c?(s.sharedClientState.addLocalQueryTarget(c.targetId),l=c.view.lu()):l=await l0(s,t,n,!0),l}async function jC(r,t){const n=d0(r);await l0(n,t,!0,!1)}async function l0(r,t,n,s){const l=await sC(r.localStore,ui(t)),c=l.targetId,d=r.sharedClientState.addLocalQueryTarget(c,n);let g;return s&&(g=await HC(r,t,c,d==="current",l.resumeToken)),r.isPrimaryClient&&n&&t0(r.remoteStore,l),g}async function HC(r,t,n,s,l){r.pu=(I,D,H)=>(async function(nt,W,vt,dt){let ht=W.view.ru(vt);ht.Cs&&(ht=await Pv(nt.localStore,W.query,!1).then((({documents:V})=>W.view.ru(V,ht))));const Vt=dt&&dt.targetChanges.get(W.targetId),Et=dt&&dt.targetMismatches.get(W.targetId)!=null,Ut=W.view.applyChanges(ht,nt.isPrimaryClient,Vt,Et);return Qv(nt,W.targetId,Ut.au),Ut.snapshot})(r,I,D,H);const c=await Pv(r.localStore,t,!0),d=new UC(t,c.Qs),g=d.ru(c.documents),p=Ql.createSynthesizedTargetChangeForCurrentChange(n,s&&r.onlineState!=="Offline",l),_=d.applyChanges(g,r.isPrimaryClient,p);Qv(r,n,_.au);const A=new LC(t,n,d);return r.Tu.set(t,A),r.Iu.has(n)?r.Iu.get(n).push(t):r.Iu.set(n,[t]),_.snapshot}async function GC(r,t,n){const s=St(r),l=s.Tu.get(t),c=s.Iu.get(l.targetId);if(c.length>1)return s.Iu.set(l.targetId,c.filter((d=>!ch(d,t)))),void s.Tu.delete(t);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(l.targetId),s.sharedClientState.isActiveQueryTarget(l.targetId)||await om(s.localStore,l.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(l.targetId),n&&Hm(s.remoteStore,l.targetId),cm(s,l.targetId)})).catch(eo)):(cm(s,l.targetId),await om(s.localStore,l.targetId,!0))}async function FC(r,t){const n=St(r),s=n.Tu.get(t),l=n.Iu.get(s.targetId);n.isPrimaryClient&&l.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),Hm(n.remoteStore,s.targetId))}async function QC(r,t,n){const s=JC(r);try{const l=await(function(d,g){const p=St(d),_=te.now(),A=g.reduce(((H,Z)=>H.add(Z.key)),Ot());let I,D;return p.persistence.runTransaction("Locally write mutations","readwrite",(H=>{let Z=Qi(),nt=Ot();return p.Ns.getEntries(H,A).next((W=>{Z=W,Z.forEach(((vt,dt)=>{dt.isValidDocument()||(nt=nt.add(vt))}))})).next((()=>p.localDocuments.getOverlayedDocuments(H,Z))).next((W=>{I=W;const vt=[];for(const dt of g){const ht=rI(dt,I.get(dt.key).overlayedDocument);ht!=null&&vt.push(new Fr(dt.key,ht,_T(ht.value.mapValue),Bn.exists(!0)))}return p.mutationQueue.addMutationBatch(H,_,vt,g)})).next((W=>{D=W;const vt=W.applyToLocalDocumentSet(I,nt);return p.documentOverlayCache.saveOverlays(H,W.batchId,vt)}))})).then((()=>({batchId:D.batchId,changes:DT(I)})))})(s.localStore,t);s.sharedClientState.addPendingMutation(l.batchId),(function(d,g,p){let _=d.Vu[d.currentUser.toKey()];_||(_=new ae(Nt)),_=_.insert(g,p),d.Vu[d.currentUser.toKey()]=_})(s,l.batchId,n),await Yl(s,l.changes),await yh(s.remoteStore)}catch(l){const c=Ym(l,"Failed to persist write");n.reject(c)}}async function u0(r,t){const n=St(r);try{const s=await nC(n.localStore,t);t.targetChanges.forEach(((l,c)=>{const d=n.Au.get(c);d&&(jt(l.addedDocuments.size+l.modifiedDocuments.size+l.removedDocuments.size<=1,22616),l.addedDocuments.size>0?d.hu=!0:l.modifiedDocuments.size>0?jt(d.hu,14607):l.removedDocuments.size>0&&(jt(d.hu,42227),d.hu=!1))})),await Yl(n,s,t)}catch(s){await eo(s)}}function Fv(r,t,n){const s=St(r);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const l=[];s.Tu.forEach(((c,d)=>{const g=d.view.va(t);g.snapshot&&l.push(g.snapshot)})),(function(d,g){const p=St(d);p.onlineState=g;let _=!1;p.queries.forEach(((A,I)=>{for(const D of I.Sa)D.va(g)&&(_=!0)})),_&&Xm(p)})(s.eventManager,t),l.length&&s.Pu.H_(l),s.onlineState=t,s.isPrimaryClient&&s.sharedClientState.setOnlineState(t)}}async function KC(r,t,n){const s=St(r);s.sharedClientState.updateQueryState(t,"rejected",n);const l=s.Au.get(t),c=l&&l.key;if(c){let d=new ae(ut.comparator);d=d.insert(c,$e.newNoDocument(c,Tt.min()));const g=Ot().add(c),p=new mh(Tt.min(),new Map,new ae(Nt),d,g);await u0(s,p),s.du=s.du.remove(c),s.Au.delete(t),Zm(s)}else await om(s.localStore,t,!1).then((()=>cm(s,t,n))).catch(eo)}async function YC(r,t){const n=St(r),s=t.batch.batchId;try{const l=await eC(n.localStore,t);h0(n,s,null),c0(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await Yl(n,l)}catch(l){await eo(l)}}async function XC(r,t,n){const s=St(r);try{const l=await(function(d,g){const p=St(d);return p.persistence.runTransaction("Reject batch","readwrite-primary",(_=>{let A;return p.mutationQueue.lookupMutationBatch(_,g).next((I=>(jt(I!==null,37113),A=I.keys(),p.mutationQueue.removeMutationBatch(_,I)))).next((()=>p.mutationQueue.performConsistencyCheck(_))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(_,A,g))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,A))).next((()=>p.localDocuments.getDocuments(_,A)))}))})(s.localStore,t);h0(s,t,n),c0(s,t),s.sharedClientState.updateMutationState(t,"rejected",n),await Yl(s,l)}catch(l){await eo(l)}}function c0(r,t){(r.mu.get(t)||[]).forEach((n=>{n.resolve()})),r.mu.delete(t)}function h0(r,t,n){const s=St(r);let l=s.Vu[s.currentUser.toKey()];if(l){const c=l.get(t);c&&(n?c.reject(n):c.resolve(),l=l.remove(t)),s.Vu[s.currentUser.toKey()]=l}}function cm(r,t,n=null){r.sharedClientState.removeLocalQueryTarget(t);for(const s of r.Iu.get(t))r.Tu.delete(s),n&&r.Pu.yu(s,n);r.Iu.delete(t),r.isPrimaryClient&&r.Ru.jr(t).forEach((s=>{r.Ru.containsKey(s)||f0(r,s)}))}function f0(r,t){r.Eu.delete(t.path.canonicalString());const n=r.du.get(t);n!==null&&(Hm(r.remoteStore,n),r.du=r.du.remove(t),r.Au.delete(n),Zm(r))}function Qv(r,t,n){for(const s of n)s instanceof a0?(r.Ru.addReference(s.key,t),$C(r,s)):s instanceof o0?(it($m,"Document no longer in limbo: "+s.key),r.Ru.removeReference(s.key,t),r.Ru.containsKey(s.key)||f0(r,s.key)):yt(19791,{wu:s})}function $C(r,t){const n=t.key,s=n.path.canonicalString();r.du.get(n)||r.Eu.has(s)||(it($m,"New document in limbo: "+n),r.Eu.add(s),Zm(r))}function Zm(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const t=r.Eu.values().next().value;r.Eu.delete(t);const n=new ut(Jt.fromString(t)),s=r.fu.next();r.Au.set(s,new zC(n)),r.du=r.du.insert(n,s),t0(r.remoteStore,new Cr(ui(Mm(n.path)),s,"TargetPurposeLimboResolution",oh.ce))}}async function Yl(r,t,n){const s=St(r),l=[],c=[],d=[];s.Tu.isEmpty()||(s.Tu.forEach(((g,p)=>{d.push(s.pu(p,t,n).then((_=>{if((_||n)&&s.isPrimaryClient){const A=_?!_.fromCache:n?.targetChanges.get(p.targetId)?.current;s.sharedClientState.updateQueryState(p.targetId,A?"current":"not-current")}if(_){l.push(_);const A=qm.As(p.targetId,_);c.push(A)}})))})),await Promise.all(d),s.Pu.H_(l),await(async function(p,_){const A=St(p);try{await A.persistence.runTransaction("notifyLocalViewChanges","readwrite",(I=>X.forEach(_,(D=>X.forEach(D.Es,(H=>A.persistence.referenceDelegate.addReference(I,D.targetId,H))).next((()=>X.forEach(D.ds,(H=>A.persistence.referenceDelegate.removeReference(I,D.targetId,H)))))))))}catch(I){if(!no(I))throw I;it(jm,"Failed to update sequence numbers: "+I)}for(const I of _){const D=I.targetId;if(!I.fromCache){const H=A.Ms.get(D),Z=H.snapshotVersion,nt=H.withLastLimboFreeSnapshotVersion(Z);A.Ms=A.Ms.insert(D,nt)}}})(s.localStore,c))}async function ZC(r,t){const n=St(r);if(!n.currentUser.isEqual(t)){it($m,"User change. New user:",t.toKey());const s=await $T(n.localStore,t);n.currentUser=t,(function(c,d){c.mu.forEach((g=>{g.forEach((p=>{p.reject(new rt(Y.CANCELLED,d))}))})),c.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,s.removedBatchIds,s.addedBatchIds),await Yl(n,s.Ls)}}function WC(r,t){const n=St(r),s=n.Au.get(t);if(s&&s.hu)return Ot().add(s.key);{let l=Ot();const c=n.Iu.get(t);if(!c)return l;for(const d of c){const g=n.Tu.get(d);l=l.unionWith(g.view.nu)}return l}}function d0(r){const t=St(r);return t.remoteStore.remoteSyncer.applyRemoteEvent=u0.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=WC.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=KC.bind(null,t),t.Pu.H_=xC.bind(null,t.eventManager),t.Pu.yu=kC.bind(null,t.eventManager),t}function JC(r){const t=St(r);return t.remoteStore.remoteSyncer.applySuccessfulWrite=YC.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=XC.bind(null,t),t}class th{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=gh(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,n){return null}Mu(t,n){return null}vu(t){return tC(this.persistence,new ZI,t.initialUser,this.serializer)}Cu(t){return new XT(Bm.mi,this.serializer)}Du(t){return new oC}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}th.provider={build:()=>new th};class t2 extends th{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,n){jt(this.persistence.referenceDelegate instanceof Wc,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new PI(s,t.asyncQueue,n)}Cu(t){const n=this.cacheSizeBytes!==void 0?an.withCacheSize(this.cacheSizeBytes):an.DEFAULT;return new XT((s=>Wc.mi(s,n)),this.serializer)}}class hm{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>Fv(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=ZC.bind(null,this.syncEngine),await DC(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new OC})()}createDatastore(t){const n=gh(t.databaseInfo.databaseId),s=(function(c){return new fC(c)})(t.databaseInfo);return(function(c,d,g,p){return new pC(c,d,g,p)})(t.authCredentials,t.appCheckCredentials,s,n)}createRemoteStore(t){return(function(s,l,c,d,g){return new _C(s,l,c,d,g)})(this.localStore,this.datastore,t.asyncQueue,(n=>Fv(this.syncEngine,n,0)),(function(){return zv.v()?new zv:new lC})())}createSyncEngine(t,n){return(function(l,c,d,g,p,_,A){const I=new BC(l,c,d,g,p,_);return A&&(I.gu=!0),I})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const s=St(n);it(Us,"RemoteStore shutting down."),s.Ea.add(5),await Kl(s),s.Aa.shutdown(),s.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}hm.provider={build:()=>new hm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e2{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):Fi("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,n){setTimeout((()=>{this.muted||t(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qr="FirestoreClient";class n2{constructor(t,n,s,l,c){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=l,this.user=Xe.UNAUTHENTICATED,this.clientId=Im.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(s,(async d=>{it(qr,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d})),this.appCheckCredentials.start(s,(d=>(it(qr,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Os;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const s=Ym(n,"Failed to shutdown persistence");t.reject(s)}})),t.promise}}async function zd(r,t){r.asyncQueue.verifyOperationInProgress(),it(qr,"Initializing OfflineComponentProvider");const n=r.configuration;await t.initialize(n);let s=n.initialUser;r.setCredentialChangeListener((async l=>{s.isEqual(l)||(await $T(t.localStore,l),s=l)})),t.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=t}async function Kv(r,t){r.asyncQueue.verifyOperationInProgress();const n=await i2(r);it(qr,"Initializing OnlineComponentProvider"),await t.initialize(n,r.configuration),r.setCredentialChangeListener((s=>qv(t.remoteStore,s))),r.setAppCheckTokenChangeListener(((s,l)=>qv(t.remoteStore,l))),r._onlineComponents=t}async function i2(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){it(qr,"Using user provided OfflineComponentProvider");try{await zd(r,r._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!(function(l){return l.name==="FirebaseError"?l.code===Y.FAILED_PRECONDITION||l.code===Y.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||l.code===22||l.code===20||l.code===11})(n))throw n;Ga("Error using user provided cache. Falling back to memory cache: "+n),await zd(r,new th)}}else it(qr,"Using default OfflineComponentProvider"),await zd(r,new t2(void 0));return r._offlineComponents}async function m0(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(it(qr,"Using user provided OnlineComponentProvider"),await Kv(r,r._uninitializedComponentsProvider._online)):(it(qr,"Using default OnlineComponentProvider"),await Kv(r,new hm))),r._onlineComponents}function r2(r){return m0(r).then((t=>t.syncEngine))}async function Yv(r){const t=await m0(r),n=t.eventManager;return n.onListen=qC.bind(null,t.syncEngine),n.onUnlisten=GC.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=jC.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=FC.bind(null,t.syncEngine),n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g0(r){const t={};return r.timeoutSeconds!==void 0&&(t.timeoutSeconds=r.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xv=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p0="firestore.googleapis.com",$v=!0;class Zv{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new rt(Y.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=p0,this.ssl=$v}else this.host=t.host,this.ssl=t.ssl??$v;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=YT;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<xI)throw new rt(Y.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}_R("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=g0(t.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new rt(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new rt(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new rt(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&(function(s,l){return s.timeoutSeconds===l.timeoutSeconds})(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class _h{constructor(t,n,s,l){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=s,this._app=l,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Zv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new rt(Y.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new rt(Y.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Zv(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new lR;switch(s.type){case"firstParty":return new fR(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new rt(Y.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const s=Xv.get(n);s&&(it("ComponentProvider","Removing Datastore"),Xv.delete(n),s.terminate())})(this),Promise.resolve()}}function s2(r,t,n,s={}){r=Mr(r,_h);const l=Za(t),c=r._getSettings(),d={...c,emulatorOptions:r._getEmulatorOptions()},g=`${t}:${n}`;l&&(hE(`https://${g}`),fE("Firestore",!0)),c.host!==p0&&c.host!==g&&Ga("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p={...c,host:g,ssl:l,emulatorOptions:s};if(!Ms(p,d)&&(r._setSettings(p),s.mockUserToken)){let _,A;if(typeof s.mockUserToken=="string")_=s.mockUserToken,A=Xe.MOCK_USER;else{_=yA(s.mockUserToken,r._app?.options.projectId);const I=s.mockUserToken.sub||s.mockUserToken.user_id;if(!I)throw new rt(Y.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");A=new Xe(I)}r._authCredentials=new uR(new aT(_,A))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ro{constructor(t,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=t}withConverter(t){return new ro(this.firestore,t,this._query)}}class Te{constructor(t,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new xr(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Te(this.firestore,t,this._key)}toJSON(){return{type:Te._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,n,s){if(Hl(n,Te._jsonSchema))return new Te(t,s||null,new ut(Jt.fromString(n.referencePath)))}}Te._jsonSchemaVersion="firestore/documentReference/1.0",Te._jsonSchema={type:Ee("string",Te._jsonSchemaVersion),referencePath:Ee("string")};class xr extends ro{constructor(t,n,s){super(t,n,Mm(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Te(this.firestore,null,new ut(t))}withConverter(t){return new xr(this.firestore,t,this._path)}}function Wv(r,t,...n){if(r=De(r),oT("collection","path",t),r instanceof _h){const s=Jt.fromString(t,...n);return uv(s),new xr(r,null,s)}{if(!(r instanceof Te||r instanceof xr))throw new rt(Y.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(Jt.fromString(t,...n));return uv(s),new xr(r.firestore,null,s)}}function fm(r,t,...n){if(r=De(r),arguments.length===1&&(t=Im.newId()),oT("doc","path",t),r instanceof _h){const s=Jt.fromString(t,...n);return lv(s),new Te(r,null,new ut(s))}{if(!(r instanceof Te||r instanceof xr))throw new rt(Y.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(Jt.fromString(t,...n));return lv(s),new Te(r.firestore,r instanceof xr?r.converter:null,new ut(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jv="AsyncQueue";class tE{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new WT(this,"async_queue_retry"),this._c=()=>{const s=Ld();s&&it(Jv,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=t;const n=Ld();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const n=Ld();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new Os;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(t().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Xu.push(t),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!no(t))throw t;it(Jv,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(t){const n=this.ac.then((()=>(this.rc=!0,t().catch((s=>{throw this.nc=s,this.rc=!1,Fi("INTERNAL UNHANDLED ERROR: ",eE(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=n,n}enqueueAfterDelay(t,n,s){this.uc(),this.oc.indexOf(t)>-1&&(n=0);const l=Km.createAndSchedule(this,t,n,s,(c=>this.hc(c)));return this.tc.push(l),l}uc(){this.nc&&yt(47125,{Pc:eE(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const n of this.tc)if(n.timerId===t)return!0;return!1}Ec(t){return this.Tc().then((()=>{this.tc.sort(((n,s)=>n.targetTimeMs-s.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.Tc()}))}dc(t){this.oc.push(t)}hc(t){const n=this.tc.indexOf(t);this.tc.splice(n,1)}}function eE(r){let t=r.message||"";return r.stack&&(t=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nE(r){return(function(n,s){if(typeof n!="object"||n===null)return!1;const l=n;for(const c of s)if(c in l&&typeof l[c]=="function")return!0;return!1})(r,["next","error","complete"])}class $a extends _h{constructor(t,n,s,l){super(t,n,s,l),this.type="firestore",this._queue=new tE,this._persistenceKey=l?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new tE(t),this._firestoreClient=void 0,await t}}}function a2(r,t){const n=typeof r=="object"?r:pE(),s=typeof r=="string"?r:Fc,l=ym(n,"firestore").getImmediate({identifier:s});if(!l._initialized){const c=gA("firestore");c&&s2(l,...c)}return l}function y0(r){if(r._terminated)throw new rt(Y.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||o2(r),r._firestoreClient}function o2(r){const t=r._freezeSettings(),n=(function(l,c,d,g){return new DR(l,c,d,g.host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,g0(g.experimentalLongPollingOptions),g.useFetchStreams,g.isUsingEmulator)})(r._databaseId,r._app?.options.appId||"",r._persistenceKey,t);r._componentsProvider||t.localCache?._offlineComponentProvider&&t.localCache?._onlineComponentProvider&&(r._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),r._firestoreClient=new n2(r._authCredentials,r._appCheckCredentials,r._queue,n,r._componentsProvider&&(function(l){const c=l?._online.build();return{_offline:l?._offline.build(c),_online:c}})(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Vn(Ge.fromBase64String(t))}catch(n){throw new rt(Y.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new Vn(Ge.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:Vn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(Hl(t,Vn._jsonSchema))return Vn.fromBase64String(t.bytes)}}Vn._jsonSchemaVersion="firestore/bytes/1.0",Vn._jsonSchema={type:Ee("string",Vn._jsonSchemaVersion),bytes:Ee("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vh{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new rt(Y.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new He(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wm{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new rt(Y.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new rt(Y.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return Nt(this._lat,t._lat)||Nt(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:hi._jsonSchemaVersion}}static fromJSON(t){if(Hl(t,hi._jsonSchema))return new hi(t.latitude,t.longitude)}}hi._jsonSchemaVersion="firestore/geoPoint/1.0",hi._jsonSchema={type:Ee("string",hi._jsonSchemaVersion),latitude:Ee("number"),longitude:Ee("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi{constructor(t){this._values=(t||[]).map((n=>n))}toArray(){return this._values.map((t=>t))}isEqual(t){return(function(s,l){if(s.length!==l.length)return!1;for(let c=0;c<s.length;++c)if(s[c]!==l[c])return!1;return!0})(this._values,t._values)}toJSON(){return{type:fi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(Hl(t,fi._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every((n=>typeof n=="number")))return new fi(t.vectorValues);throw new rt(Y.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}fi._jsonSchemaVersion="firestore/vectorValue/1.0",fi._jsonSchema={type:Ee("string",fi._jsonSchemaVersion),vectorValues:Ee("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l2=/^__.*__$/;class u2{constructor(t,n,s){this.data=t,this.fieldMask=n,this.fieldTransforms=s}toMutation(t,n){return this.fieldMask!==null?new Fr(t,this.data,this.fieldMask,n,this.fieldTransforms):new Fl(t,this.data,n,this.fieldTransforms)}}class _0{constructor(t,n,s){this.data=t,this.fieldMask=n,this.fieldTransforms=s}toMutation(t,n){return new Fr(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function v0(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw yt(40011,{Ac:r})}}class Jm{constructor(t,n,s,l,c,d){this.settings=t,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=l,c===void 0&&this.Rc(),this.fieldTransforms=c||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new Jm({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){const n=this.path?.child(t),s=this.Vc({path:n,fc:!1});return s.gc(t),s}yc(t){const n=this.path?.child(t),s=this.Vc({path:n,fc:!1});return s.Rc(),s}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return eh(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find((n=>t.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>t.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(v0(this.Ac)&&l2.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class c2{constructor(t,n,s){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=s||gh(t)}Cc(t,n,s,l=!1){return new Jm({Ac:t,methodName:n,Dc:s,path:He.emptyPath(),fc:!1,bc:l},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function tg(r){const t=r._freezeSettings(),n=gh(r._databaseId);return new c2(r._databaseId,!!t.ignoreUndefinedProperties,n)}function h2(r,t,n,s,l,c={}){const d=r.Cc(c.merge||c.mergeFields?2:0,t,n,l);eg("Data must be an object, but it was:",d,s);const g=E0(s,d);let p,_;if(c.merge)p=new yn(d.fieldMask),_=d.fieldTransforms;else if(c.mergeFields){const A=[];for(const I of c.mergeFields){const D=dm(t,I,n);if(!d.contains(D))throw new rt(Y.INVALID_ARGUMENT,`Field '${D}' is specified in your field mask but missing from your input data.`);A0(A,D)||A.push(D)}p=new yn(A),_=d.fieldTransforms.filter((I=>p.covers(I.field)))}else p=null,_=d.fieldTransforms;return new u2(new on(g),p,_)}class Eh extends Wm{_toFieldTransform(t){if(t.Ac!==2)throw t.Ac===1?t.Sc(`${this._methodName}() can only appear at the top level of your update data`):t.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof Eh}}function f2(r,t,n,s){const l=r.Cc(1,t,n);eg("Data must be an object, but it was:",l,s);const c=[],d=on.empty();Gr(s,((p,_)=>{const A=ng(t,p,n);_=De(_);const I=l.yc(A);if(_ instanceof Eh)c.push(A);else{const D=Xl(_,I);D!=null&&(c.push(A),d.set(A,D))}}));const g=new yn(c);return new _0(d,g,l.fieldTransforms)}function d2(r,t,n,s,l,c){const d=r.Cc(1,t,n),g=[dm(t,s,n)],p=[l];if(c.length%2!=0)throw new rt(Y.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let D=0;D<c.length;D+=2)g.push(dm(t,c[D])),p.push(c[D+1]);const _=[],A=on.empty();for(let D=g.length-1;D>=0;--D)if(!A0(_,g[D])){const H=g[D];let Z=p[D];Z=De(Z);const nt=d.yc(H);if(Z instanceof Eh)_.push(H);else{const W=Xl(Z,nt);W!=null&&(_.push(H),A.set(H,W))}}const I=new yn(_);return new _0(A,I,d.fieldTransforms)}function m2(r,t,n,s=!1){return Xl(n,r.Cc(s?4:3,t))}function Xl(r,t){if(T0(r=De(r)))return eg("Unsupported field value:",t,r),E0(r,t);if(r instanceof Wm)return(function(s,l){if(!v0(l.Ac))throw l.Sc(`${s._methodName}() can only be used with update() and set()`);if(!l.path)throw l.Sc(`${s._methodName}() is not currently supported inside arrays`);const c=s._toFieldTransform(l);c&&l.fieldTransforms.push(c)})(r,t),null;if(r===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),r instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return(function(s,l){const c=[];let d=0;for(const g of s){let p=Xl(g,l.wc(d));p==null&&(p={nullValue:"NULL_VALUE"}),c.push(p),d++}return{arrayValue:{values:c}}})(r,t)}return(function(s,l){if((s=De(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return WR(l.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const c=te.fromDate(s);return{timestampValue:Zc(l.serializer,c)}}if(s instanceof te){const c=new te(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Zc(l.serializer,c)}}if(s instanceof hi)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Vn)return{bytesValue:qT(l.serializer,s._byteString)};if(s instanceof Te){const c=l.databaseId,d=s.firestore._databaseId;if(!d.isEqual(c))throw l.Sc(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:Lm(s.firestore._databaseId||l.databaseId,s._key.path)}}if(s instanceof fi)return(function(d,g){return{mapValue:{fields:{[pT]:{stringValue:yT},[Qc]:{arrayValue:{values:d.toArray().map((_=>{if(typeof _!="number")throw g.Sc("VectorValues must only contain numeric values.");return xm(g.serializer,_)}))}}}}}})(s,l);throw l.Sc(`Unsupported field value: ${ah(s)}`)})(r,t)}function E0(r,t){const n={};return cT(r)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Gr(r,((s,l)=>{const c=Xl(l,t.mc(s));c!=null&&(n[s]=c)})),{mapValue:{fields:n}}}function T0(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof te||r instanceof hi||r instanceof Vn||r instanceof Te||r instanceof Wm||r instanceof fi)}function eg(r,t,n){if(!T0(n)||!lT(n)){const s=ah(n);throw s==="an object"?t.Sc(r+" a custom object"):t.Sc(r+" "+s)}}function dm(r,t,n){if((t=De(t))instanceof vh)return t._internalPath;if(typeof t=="string")return ng(r,t);throw eh("Field path arguments must be of type string or ",r,!1,void 0,n)}const g2=new RegExp("[~\\*/\\[\\]]");function ng(r,t,n){if(t.search(g2)>=0)throw eh(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,n);try{return new vh(...t.split("."))._internalPath}catch{throw eh(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,n)}}function eh(r,t,n,s,l){const c=s&&!s.isEmpty(),d=l!==void 0;let g=`Function ${t}() called with invalid data`;n&&(g+=" (via `toFirestore()`)"),g+=". ";let p="";return(c||d)&&(p+=" (found",c&&(p+=` in field ${s}`),d&&(p+=` in document ${l}`),p+=")"),new rt(Y.INVALID_ARGUMENT,g+r+p)}function A0(r,t){return r.some((n=>n.isEqual(t)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S0{constructor(t,n,s,l,c){this._firestore=t,this._userDataWriter=n,this._key=s,this._document=l,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new Te(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new p2(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(b0("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class p2 extends S0{data(){return super.data()}}function b0(r,t){return typeof t=="string"?ng(r,t):t instanceof vh?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y2(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new rt(Y.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ig{}class _2 extends ig{}function v2(r,t,...n){let s=[];t instanceof ig&&s.push(t),s=s.concat(n),(function(c){const d=c.filter((p=>p instanceof sg)).length,g=c.filter((p=>p instanceof rg)).length;if(d>1||d>0&&g>0)throw new rt(Y.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const l of s)r=l._apply(r);return r}class rg extends _2{constructor(t,n,s){super(),this._field=t,this._op=n,this._value=s,this.type="where"}static _create(t,n,s){return new rg(t,n,s)}_apply(t){const n=this._parse(t);return w0(t._query,n),new ro(t.firestore,t.converter,em(t._query,n))}_parse(t){const n=tg(t.firestore);return(function(c,d,g,p,_,A,I){let D;if(_.isKeyField()){if(A==="array-contains"||A==="array-contains-any")throw new rt(Y.INVALID_ARGUMENT,`Invalid Query. You can't perform '${A}' queries on documentId().`);if(A==="in"||A==="not-in"){rE(I,A);const Z=[];for(const nt of I)Z.push(iE(p,c,nt));D={arrayValue:{values:Z}}}else D=iE(p,c,I)}else A!=="in"&&A!=="not-in"&&A!=="array-contains-any"||rE(I,A),D=m2(g,d,I,A==="in"||A==="not-in");return ve.create(_,A,D)})(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}class sg extends ig{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new sg(t,n)}_parse(t){const n=this._queryConstraints.map((s=>s._parse(t))).filter((s=>s.getFilters().length>0));return n.length===1?n[0]:jn.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:((function(l,c){let d=l;const g=c.getFlattenedFilters();for(const p of g)w0(d,p),d=em(d,p)})(t._query,n),new ro(t.firestore,t.converter,em(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function iE(r,t,n){if(typeof(n=De(n))=="string"){if(n==="")throw new rt(Y.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!wT(t)&&n.indexOf("/")!==-1)throw new rt(Y.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=t.path.child(Jt.fromString(n));if(!ut.isDocumentKey(s))throw new rt(Y.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return yv(r,new ut(s))}if(n instanceof Te)return yv(r,n._key);throw new rt(Y.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ah(n)}.`)}function rE(r,t){if(!Array.isArray(r)||r.length===0)throw new rt(Y.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function w0(r,t){const n=(function(l,c){for(const d of l)for(const g of d.getFlattenedFilters())if(c.indexOf(g.op)>=0)return g.op;return null})(r.filters,(function(l){switch(l){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(t.op));if(n!==null)throw n===t.op?new rt(Y.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new rt(Y.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class E2{convertValue(t,n="none"){switch(zr(t)){case 0:return null;case 1:return t.booleanValue;case 2:return de(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(Lr(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw yt(62114,{value:t})}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const s={};return Gr(t,((l,c)=>{s[l]=this.convertValue(c,n)})),s}convertVectorValue(t){const n=t.fields?.[Qc].arrayValue?.values?.map((s=>de(s.doubleValue)));return new fi(n)}convertGeoPoint(t){return new hi(de(t.latitude),de(t.longitude))}convertArray(t,n){return(t.values||[]).map((s=>this.convertValue(s,n)))}convertServerTimestamp(t,n){switch(n){case"previous":const s=uh(t);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(Vl(t));default:return null}}convertTimestamp(t){const n=Ur(t);return new te(n.seconds,n.nanos)}convertDocumentKey(t,n){const s=Jt.fromString(t);jt(KT(s),9688,{name:t});const l=new Ml(s.get(1),s.get(3)),c=new ut(s.popFirst(5));return l.isEqual(n)||Fi(`Document ${c} contains a document reference within a different database (${l.projectId}/${l.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T2(r,t,n){let s;return s=r?r.toFirestore(t):t,s}class Tl{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Vs extends S0{constructor(t,n,s,l,c,d){super(t,n,s,l,d),this._firestore=t,this._firestoreImpl=t,this.metadata=c}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new kc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const s=this._document.data.field(b0("DocumentSnapshot.get",t));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new rt(Y.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,n={};return n.type=Vs._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Vs._jsonSchemaVersion="firestore/documentSnapshot/1.0",Vs._jsonSchema={type:Ee("string",Vs._jsonSchemaVersion),bundleSource:Ee("string","DocumentSnapshot"),bundleName:Ee("string"),bundle:Ee("string")};class kc extends Vs{data(t={}){return super.data(t)}}class ja{constructor(t,n,s,l){this._firestore=t,this._userDataWriter=n,this._snapshot=l,this.metadata=new Tl(l.hasPendingWrites,l.fromCache),this.query=s}get docs(){const t=[];return this.forEach((n=>t.push(n))),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach((s=>{t.call(n,new kc(this._firestore,this._userDataWriter,s.key,s,new Tl(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new rt(Y.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(l,c){if(l._snapshot.oldDocs.isEmpty()){let d=0;return l._snapshot.docChanges.map((g=>{const p=new kc(l._firestore,l._userDataWriter,g.doc.key,g.doc,new Tl(l._snapshot.mutatedKeys.has(g.doc.key),l._snapshot.fromCache),l.query.converter);return g.doc,{type:"added",doc:p,oldIndex:-1,newIndex:d++}}))}{let d=l._snapshot.oldDocs;return l._snapshot.docChanges.filter((g=>c||g.type!==3)).map((g=>{const p=new kc(l._firestore,l._userDataWriter,g.doc.key,g.doc,new Tl(l._snapshot.mutatedKeys.has(g.doc.key),l._snapshot.fromCache),l.query.converter);let _=-1,A=-1;return g.type!==0&&(_=d.indexOf(g.doc.key),d=d.delete(g.doc.key)),g.type!==1&&(d=d.add(g.doc),A=d.indexOf(g.doc.key)),{type:A2(g.type),doc:p,oldIndex:_,newIndex:A}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new rt(Y.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=ja._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=Im.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],l=[];return this.docs.forEach((c=>{c._document!==null&&(n.push(c._document),s.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),l.push(c.ref.path))})),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function A2(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return yt(61501,{type:r})}}ja._jsonSchemaVersion="firestore/querySnapshot/1.0",ja._jsonSchema={type:Ee("string",ja._jsonSchemaVersion),bundleSource:Ee("string","QuerySnapshot"),bundleName:Ee("string"),bundle:Ee("string")};class R0 extends E2{constructor(t){super(),this.firestore=t}convertBytes(t){return new Vn(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new Te(this.firestore,null,n)}}function S2(r,t,n,...s){r=Mr(r,Te);const l=Mr(r.firestore,$a),c=tg(l);let d;return d=typeof(t=De(t))=="string"||t instanceof vh?d2(c,"updateDoc",r._key,t,n,s):f2(c,"updateDoc",r._key,t),ag(l,[d.toMutation(r._key,Bn.exists(!0))])}function b2(r){return ag(Mr(r.firestore,$a),[new km(r._key,Bn.none())])}function w2(r,t){const n=Mr(r.firestore,$a),s=fm(r),l=T2(r.converter,t);return ag(n,[h2(tg(r.firestore),"addDoc",s._key,l,r.converter!==null,{}).toMutation(s._key,Bn.exists(!1))]).then((()=>s))}function R2(r,...t){r=De(r);let n={includeMetadataChanges:!1,source:"default"},s=0;typeof t[s]!="object"||nE(t[s])||(n=t[s++]);const l={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(nE(t[s])){const p=t[s];t[s]=p.next?.bind(p),t[s+1]=p.error?.bind(p),t[s+2]=p.complete?.bind(p)}let c,d,g;if(r instanceof Te)d=Mr(r.firestore,$a),g=Mm(r._key.path),c={next:p=>{t[s]&&t[s](I2(d,r,p))},error:t[s+1],complete:t[s+2]};else{const p=Mr(r,ro);d=Mr(p.firestore,$a),g=p._query;const _=new R0(d);c={next:A=>{t[s]&&t[s](new ja(d,_,p,A))},error:t[s+1],complete:t[s+2]},y2(r._query)}return(function(_,A,I,D){const H=new e2(D),Z=new PC(A,H,I);return _.asyncQueue.enqueueAndForget((async()=>VC(await Yv(_),Z))),()=>{H.Nu(),_.asyncQueue.enqueueAndForget((async()=>MC(await Yv(_),Z)))}})(y0(d),g,l,c)}function ag(r,t){return(function(s,l){const c=new Os;return s.asyncQueue.enqueueAndForget((async()=>QC(await r2(s),l,c))),c.promise})(y0(r),t)}function I2(r,t,n){const s=n.docs.get(t._key),l=new R0(r);return new Vs(r,l,t._key,s,new Tl(n.hasPendingWrites,n.fromCache),t.converter)}(function(t,n=!0){(function(l){to=l})(Wa),Ha(new xs("firestore",((s,{instanceIdentifier:l,options:c})=>{const d=s.getProvider("app").getImmediate(),g=new $a(new cR(s.getProvider("auth-internal")),new dR(d,s.getProvider("app-check-internal")),(function(_,A){if(!Object.prototype.hasOwnProperty.apply(_.options,["projectId"]))throw new rt(Y.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ml(_.options.projectId,A)})(d,l),d);return c={useFetchStreams:n,...c},g._setSettings(c),g}),"PUBLIC").setMultipleInstances(!0)),Or(rv,sv,t),Or(rv,sv,"esm2020")})();const C2=()=>{const[r,t]=qe.useState(null),[n,s]=qe.useState(null),[l,c]=qe.useState(null),[d,g]=qe.useState([]),[p,_]=qe.useState(""),[A,I]=qe.useState(""),[D,H]=qe.useState(!0),[Z,nt]=qe.useState(!1),[W,vt]=qe.useState(!0),[dt,ht]=qe.useState(""),[Vt,Et]=qe.useState(""),[Ut,V]=qe.useState(""),[S,w]=qe.useState({title:"",message:"",isVisible:!1}),[O,M]=qe.useState(!1);qe.useEffect(()=>{window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches&&M(!0);try{const q=JSON.parse('{"apiKey":"AIzaSyCQTetBsdId6g7JSBfi0MlwCKgCA_Q9ivQ","authDomain":"todo-9518f.firebaseapp.com","projectId":"todo-9518f","storageBucket":"todo-9518f.firebasestorage.app","messagingSenderId":"117252665084","appId":"1:117252665084:web:6444e439014909488b3179"}');if(!q||!"todo-9518f"){x("Configuration Error","Firebase config or app ID is missing from environment variables.");return}oR("debug");const $=gE(q),at=a2($),At=sR($);t(at),s(At);const ft=Kb(At,re=>{c(re||null),nt(!0),V("")});return()=>ft()}catch(q){console.error("Initialization error:",q),x("Initialization Error","An error occurred during app startup. Check your Firebase config.")}},[]),qe.useEffect(()=>{if(!l||!r){g([]),H(!1);return}H(!0);const q=Wv(r,"users",l.uid,"tasks"),J=v2(q),$=R2(J,at=>{const At=at.docs.map(ft=>({id:ft.id,...ft.data()}));At.sort((ft,re)=>ft.created_at?.toDate()-re.created_at?.toDate()),g(At),H(!1)},at=>{console.error("Error listening to tasks:",at),x("Real-time Error","Could not fetch tasks in real-time. Please check your connection."),H(!1)});return()=>$()},[l,r]);const x=(q,J)=>{w({title:q,message:J,isVisible:!0})},R=()=>{w({...S,isVisible:!1})},Ae=async q=>{if(q.preventDefault(),V(""),!dt||!Vt){V("Email and password cannot be empty.");return}try{W?await Gb(n,dt,Vt):await Hb(n,dt,Vt)}catch(J){let $="An unknown authentication error occurred.";switch(J.code){case"auth/invalid-email":$="The email address is not valid.";break;case"auth/user-disabled":$="This account has been disabled.";break;case"auth/user-not-found":case"auth/wrong-password":case"auth/invalid-credential":$="Invalid email or password.";break;case"auth/email-already-in-use":$="This email is already in use.";break;case"auth/weak-password":$="Password should be at least 6 characters.";break}V($)}},ee=async()=>{if(n)try{await Yb(n)}catch(q){console.error("Sign out error:",q),x("Sign Out Error","Failed to sign out. Please try again.")}},G=async q=>{if(q.preventDefault(),p.trim()===""){x("Input Error","Task title cannot be empty.");return}if(!l){x("Authentication Error","You must be signed in to add tasks.");return}try{const J=Wv(r,"users",l.uid,"tasks");await w2(J,{user_id:l.uid,user_email:l.email,task_title:p,is_completed:!1,created_at:new Date,due_date:A?new Date(A):null}),_(""),I("")}catch(J){console.error("Error adding document: ",J),x("Error","Failed to add the task. Please try again.")}},et=async(q,J)=>{if(!l){x("Authentication Error","You must be signed in to update tasks.");return}try{const $=fm(r,"users",l.uid,"tasks",q);await S2($,{is_completed:J})}catch($){console.error("Error updating document: ",$),x("Error","Failed to update task status. Please try again.")}},ot=async q=>{if(!l){x("Authentication Error","You must be signed in to delete tasks.");return}try{const J=fm(r,"users",l.uid,"tasks",q);await b2(J)}catch(J){console.error("Error deleting document: ",J),x("Error","Failed to delete the task. Please try again.")}},Lt=()=>{M(!O)},C=()=>!Z||D?ct.jsxs("div",{className:"text-center text-gray-500 dark:text-gray-400",children:[ct.jsxs("svg",{className:"animate-spin h-5 w-5 text-gray-400 dark:text-gray-300 inline-block",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[ct.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),ct.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),ct.jsx("span",{className:"ml-2",children:"Loading..."})]}):l?ct.jsxs("div",{className:"space-y-6 w-full p-4 md:p-8",children:[ct.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between space-y-4 sm:space-y-0",children:[ct.jsx("h1",{className:"text-3xl sm:text-4xl font-extrabold text-gray-800 dark:text-gray-100",children:"My Tasks"}),ct.jsx("div",{className:"flex items-center space-x-2 text-sm text-gray-500 dark:text-gray-400",children:ct.jsx("button",{onClick:ee,className:"text-red-500 dark:text-red-400 font-semibold hover:underline",children:"Sign Out"})})]}),ct.jsxs("form",{onSubmit:G,className:"grid grid-cols-1 sm:grid-cols-4 gap-3",children:[ct.jsx("input",{type:"text",value:p,onChange:q=>_(q.target.value),placeholder:"Add a new task...",className:"p-3 border border-gray-300 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-100 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500 transition-colors duration-200 col-span-2 sm:col-span-2"}),ct.jsx("input",{type:"date",value:A,onChange:q=>I(q.target.value),className:"p-3 border border-gray-300 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-100 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500 transition-colors duration-200 col-span-2 sm:col-span-1"}),ct.jsx("button",{type:"submit",className:"bg-purple-600 text-white p-3 rounded-xl font-semibold hover:bg-purple-700 transition duration-300 shadow-lg transform hover:scale-105 flex items-center justify-center",children:ct.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:ct.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})})]}),ct.jsx("ul",{className:"space-y-3",children:d.length===0?ct.jsx("li",{className:"text-center text-gray-500 dark:text-gray-400 italic",children:"No tasks yet. Add one above!"}):d.map(q=>ct.jsxs("li",{className:`task-card flex flex-col sm:flex-row items-start sm:items-center justify-between p-4 bg-white dark:bg-gray-800 rounded-xl shadow-md transition-all duration-300 ease-in-out transform hover:scale-[1.01] ${q.is_completed?"opacity-60 line-through":""}`,children:[ct.jsxs("div",{className:"flex items-center flex-1 min-w-0",children:[ct.jsx("input",{type:"checkbox",checked:q.is_completed,onChange:()=>et(q.id,!q.is_completed),className:"w-6 h-6 text-purple-600 dark:text-purple-500 bg-gray-100 dark:bg-gray-700 border-gray-300 dark:border-gray-600 rounded-full focus:ring-2 focus:ring-purple-500 mr-4 cursor-pointer"}),ct.jsxs("div",{className:"flex-1 min-w-0",children:[ct.jsx("span",{className:"task-text text-gray-700 dark:text-gray-100 font-semibold text-lg",children:q.task_title}),q.due_date&&ct.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:["Due: ",new Date(q.due_date.seconds*1e3).toLocaleDateString()]}),q.user_email&&ct.jsxs("div",{className:"text-xs text-gray-400 dark:text-gray-500 mt-1",children:["Created by: ",q.user_email]})]})]}),ct.jsx("button",{onClick:()=>ot(q.id),className:"delete-btn flex items-center p-2 text-red-500 dark:text-red-400 hover:text-red-700 transition-colors duration-200 mt-3 sm:mt-0",children:ct.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24",children:ct.jsx("path",{d:"M16 9v10H8V9h8zm-1.5-6h-5l-1 1H5v2h14V4h-3.5l-1-1zM18 7H6v12c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7z"})})})]},q.id))})]}):ct.jsxs("div",{className:"space-y-6 p-4 md:p-8 w-full max-w-lg mx-auto",children:[ct.jsx("h1",{className:"text-3xl sm:text-4xl font-extrabold text-gray-800 dark:text-gray-100 text-center",children:W?"Welcome Back!":"Join the Community"}),ct.jsxs("form",{onSubmit:Ae,className:"space-y-4",children:[ct.jsx("input",{type:"email",value:dt,onChange:q=>ht(q.target.value),placeholder:"Email",className:"w-full p-4 border border-gray-300 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-100 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500 transition-colors duration-200"}),ct.jsx("input",{type:"password",value:Vt,onChange:q=>Et(q.target.value),placeholder:"Password",className:"w-full p-4 border border-gray-300 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-100 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500 transition-colors duration-200"}),Ut&&ct.jsx("p",{className:"text-red-500 text-sm text-center",children:Ut}),ct.jsx("button",{type:"submit",className:"w-full bg-purple-600 text-white p-4 rounded-xl font-bold hover:bg-purple-700 transition duration-300 shadow-lg",children:W?"Sign In":"Sign Up"})]}),ct.jsxs("p",{className:"text-center text-gray-500 dark:text-gray-400 text-sm",children:[W?"Need an account?":"Already have an account?",ct.jsx("button",{onClick:()=>vt(!W),className:"ml-1 text-purple-600 dark:text-purple-500 font-semibold hover:underline",children:W?"Sign up":"Sign in"})]})]});return ct.jsxs("div",{className:`min-h-screen font-[Inter] transition-colors duration-500 ${O?"dark bg-gray-900 text-gray-100":"bg-gradient-to-tr from-blue-200 via-purple-300 to-pink-400 text-gray-900"}`,children:[ct.jsxs("div",{className:"flex flex-col items-center justify-center p-4",children:[ct.jsx("div",{className:"w-full max-w-4xl bg-white/20 dark:bg-gray-800/50 rounded-3xl backdrop-blur-lg border border-gray-200/50 dark:border-gray-700/50 shadow-2xl mt-12 mb-4 p-6 sm:p-10 transition-colors duration-500",children:C()}),ct.jsx("button",{onClick:Lt,className:"fixed bottom-6 right-6 p-3 rounded-full bg-white/50 dark:bg-gray-800/50 backdrop-blur-sm text-gray-800 dark:text-gray-100 shadow-xl border border-gray-200/50 dark:border-gray-700/50",children:O?ct.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 20 20",children:ct.jsx("path",{d:"M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"})}):ct.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 20 20",children:ct.jsx("path",{d:"M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 11a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zm-4 4a1 1 0 01-1-1v-1a1 1 0 112 0v1a1 1 0 01-1 1zM7 3a1 1 0 011 1v1a1 1 0 11-2 0V4a1 1 0 011-1zm7.146 2.854a1 1 0 01-1.414 0l-1.414-1.414a1 1 0 011.414-1.414l1.414 1.414a1 1 0 010 1.414zm-4 10a1 1 0 01-1-1v-1a1 1 0 112 0v1a1 1 0 01-1 1zm-7.146-2.854a1 1 0 011.414 0l1.414 1.414a1 1 0 01-1.414 1.414l-1.414-1.414a1 1 0 010-1.414zm-1.414-4a1 1 0 010-1.414l1.414-1.414a1 1 0 111.414 1.414L3.854 13.146a1 1 0 01-1.414 0zM10 8a2 2 0 11-4 0 2 2 0 014 0zM10 12a2 2 0 114 0 2 2 0 01-4 0z"})})})]}),S.isVisible&&ct.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center p-4 z-50",children:ct.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 sm:p-8 max-w-sm w-full shadow-lg text-center space-y-4 transition-colors duration-500",children:[ct.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-100",children:S.title}),ct.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:S.message}),ct.jsx("button",{onClick:R,className:"w-full bg-blue-600 text-white p-3 rounded-lg font-semibold hover:bg-blue-700 transition duration-300",children:"OK"})]})})]})};function D2(){return ct.jsx("div",{className:"App",children:ct.jsx(C2,{})})}aA.createRoot(document.getElementById("root")).render(ct.jsx(qe.StrictMode,{children:ct.jsx(D2,{})}));
